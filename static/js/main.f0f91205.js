/*! For license information please see main.f0f91205.js.LICENSE.txt */
(()=>{var e={5513:(e,t,n)=>{"use strict";n.d(t,{A:()=>ie});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,s=String.fromCharCode,o=Object.assign;function a(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function u(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,g=1,y=0,v=0,_=0,w="";function b(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:m,column:g,length:o,return:""}}function S(e,t){return o(b("",null,null,"",null,null,0),e,{length:-e.length},t)}function I(){return _=v>0?u(w,--v):0,g--,10===_&&(g=1,m--),_}function E(){return _=v<y?u(w,v++):0,g++,10===_&&(g=1,m++),_}function T(){return u(w,v)}function k(){return v}function C(e,t){return h(w,e,t)}function x(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A(e){return m=g=1,y=d(w=e),v=0,[]}function N(e){return w="",e}function P(e){return a(C(v-1,D(91===e?e+2:40===e?e+1:e)))}function R(e){for(;(_=T())&&_<33;)E();return x(e)>2||x(_)>3?"":" "}function O(e,t){for(;--t&&E()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return C(e,k()+(t<6&&32==T()&&32==E()))}function D(e){for(;E();)switch(_){case e:return v;case 34:case 39:34!==e&&39!==e&&D(_);break;case 40:41===e&&D(e);break;case 92:E()}return v}function L(e,t){for(;E()&&e+_!==57&&(e+_!==84||47!==T()););return"/*"+C(t,v-1)+"*"+s(47===e?e:E())}function M(e){for(;!x(T());)E();return C(e,v)}var F="-ms-",U="-moz-",j="-webkit-",V="comm",z="rule",B="decl",q="@keyframes";function W(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function K(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case B:return e.return=e.return||e.value;case V:return"";case q:return e.return=e.value+"{"+W(e.children,r)+"}";case z:e.value=e.props.join(",")}return d(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function H(e){return N(G("",null,null,null,[""],e=A(e),0,[0],e))}function G(e,t,n,r,i,o,a,h,f){for(var m=0,g=0,y=a,v=0,_=0,w=0,b=1,S=1,C=1,x=0,A="",N=i,D=o,F=r,U=A;S;)switch(w=x,x=E()){case 40:if(108!=w&&58==u(U,y-1)){-1!=c(U+=l(P(x),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:U+=P(x);break;case 9:case 10:case 13:case 32:U+=R(w);break;case 92:U+=O(k()-1,7);continue;case 47:switch(T()){case 42:case 47:p(Y(L(E(),k()),t,n),f);break;default:U+="/"}break;case 123*b:h[m++]=d(U)*C;case 125*b:case 59:case 0:switch(x){case 0:case 125:S=0;case 59+g:-1==C&&(U=l(U,/\f/g,"")),_>0&&d(U)-y&&p(_>32?$(U+";",r,n,y-1):$(l(U," ","")+";",r,n,y-2),f);break;case 59:U+=";";default:if(p(F=Q(U,t,n,m,g,i,h,A,N=[],D=[],y),o),123===x)if(0===g)G(U,t,F,F,N,o,y,h,D);else switch(99===v&&110===u(U,3)?100:v){case 100:case 108:case 109:case 115:G(e,F,F,r&&p(Q(e,F,F,0,0,i,h,A,i,N=[],y),D),i,D,y,h,r?N:D);break;default:G(U,F,F,F,[""],D,0,h,D)}}m=g=_=0,b=C=1,A=U="",y=a;break;case 58:y=1+d(U),_=w;default:if(b<1)if(123==x)--b;else if(125==x&&0==b++&&125==I())continue;switch(U+=s(x),x*b){case 38:C=g>0?1:(U+="\f",-1);break;case 44:h[m++]=(d(U)-1)*C,C=1;break;case 64:45===T()&&(U+=P(E())),v=T(),g=y=d(A=U+=M(k())),x++;break;case 45:45===w&&2==d(U)&&(b=0)}}return o}function Q(e,t,n,r,s,o,c,u,d,p,m){for(var g=s-1,y=0===s?o:[""],v=f(y),_=0,w=0,S=0;_<r;++_)for(var I=0,E=h(e,g+1,g=i(w=c[_])),T=e;I<v;++I)(T=a(w>0?y[I]+" "+E:l(E,/&\f/g,y[I])))&&(d[S++]=T);return b(e,t,n,0===s?z:u,d,p,m)}function Y(e,t,n){return b(e,t,n,V,s(_),h(e,2,-2),0)}function $(e,t,n,r){return b(e,t,n,B,h(e,0,r),h(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!x(i);)E();return C(e,v)},X=function(e,t){return N(function(e,t){var n=-1,r=44;do{switch(x(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=J(v-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=s(r)}}while(r=E());return e}(A(e),t))},Z=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Z.get(n))&&!r){Z.set(e,!0);for(var i=[],s=X(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^u(e,0)?(((t<<2^u(e,0))<<2^u(e,1))<<2^u(e,2))<<2^u(e,3):0}(e,t)){case 5103:return j+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+U+e+F+e+e;case 6828:case 4268:return j+e+F+e+e;case 6165:return j+e+F+"flex-"+e+e;case 5187:return j+e+l(e,/(\w+).+(:[^]+)/,j+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return j+e+F+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return j+e+F+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+F+l(e,"shrink","negative")+e;case 5292:return j+e+F+l(e,"basis","preferred-size")+e;case 6060:return j+"box-"+l(e,"-grow","")+j+e+F+l(e,"grow","positive")+e;case 4554:return j+l(e,/([^-])(transform)/g,"$1"+j+"$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,j+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(u(e,t+1)){case 109:if(45!==u(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+U+(108==u(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==u(e,t+1))break;case 6444:switch(u(e,d(e)-3-(~c(e,"!important")&&10))){case 107:return l(e,":",":"+j)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===u(e,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(u(e,t+11)){case 114:return j+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+F+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+F+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+F+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case B:e.return=ne(e.value,e.length);break;case q:return W([S(e,{value:l(e.value,"@","@"+j)})],r);case z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([S(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([S(e,{props:[l(t,/:(plac\w+)/,":"+j+"input-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),S(e,{props:[l(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var s,o,a={},l=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;l.push(e)}));var c,u,h=[K,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],d=function(e){var t=f(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([ee,te].concat(i,h));o=function(e,t,n,r){c=n,W(H(e?e+"{"+t.styles+"}":t.styles),d),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:o};return p.sheet.hydrate(l),p}},918:(e,t,n)=>{"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}n.d(t,{A:()=>r})},5756:(e,t,n)=>{"use strict";n.d(t,{C:()=>a,T:()=>c,i:()=>s,w:()=>l});var r=n(5043),i=n(5513),s=(n(2830),n(9436),!0),o=r.createContext("undefined"!==typeof HTMLElement?(0,i.A)({key:"css"}):null);var a=o.Provider,l=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(o);return e(t,i,n)}))};s||(l=function(e){return function(t){var n=(0,r.useContext)(o);return null===n?(n=(0,i.A)({key:"css"}),r.createElement(o.Provider,{value:n},e(t,n))):e(t,n)}});var c=r.createContext({})},2830:(e,t,n)=>{"use strict";n.d(t,{J:()=>p});var r={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(918),s=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},l=function(e){return null!=e&&"boolean"!==typeof e},c=(0,i.A)((function(e){return a(e)?e:e.replace(s,"-$&").toLowerCase()})),u=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(o,(function(e,t,n){return d={name:t,styles:n,next:d},t}))}return 1===r[e]||a(e)||"number"!==typeof t||0===t?t:t+"px"};function h(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)d={name:r.name,styles:r.styles,next:d},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=h(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":l(o)&&(r+=c(s)+":"+u(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=h(e,t,o);switch(s){case"animation":case"animationName":r+=c(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var d=0;d<o.length;d++)l(o[d])&&(r+=c(s)+":"+u(s,o[d])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=d,s=n(e);return d=i,h(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var d,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var p=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";d=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=h(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=h(n,t,e[o]),r&&(i+=s[o]);f.lastIndex=0;for(var a,l="";null!==(a=f.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:d}}},9436:(e,t,n)=>{"use strict";var r;n.d(t,{i:()=>a,s:()=>o});var i=n(5043),s=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,o=s||function(e){return e()},a=s||i.useLayoutEffect},9007:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2m-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25"}),"AddShoppingCart")},971:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M19 6h-2c0-2.76-2.24-5-5-5S7 3.24 7 6H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-7-3c1.66 0 3 1.34 3 3H9c0-1.66 1.34-3 3-3m0 10c-2.76 0-5-2.24-5-5h2c0 1.66 1.34 3 3 3s3-1.34 3-3h2c0 2.76-2.24 5-5 5"}),"LocalMall")},3282:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M22.73 22.73 2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2"}),"RemoveShoppingCart")},6360:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},1334:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),s=n(579);t.A=(0,i.default)((0,s.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart")},39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(6638)},6638:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>s,createChainedFunction:()=>o,createSvgIcon:()=>fe,debounce:()=>pe,deprecatedPropType:()=>me,isMuiElement:()=>ge,ownerDocument:()=>ve,ownerWindow:()=>_e,requirePropFactory:()=>we,setRef:()=>Se,unstable_ClassNameGenerator:()=>Be,unstable_useEnhancedEffect:()=>Ee,unstable_useId:()=>Ce,unsupportedProp:()=>xe,useControlled:()=>Ae,useEventCallback:()=>Ne,useForkRef:()=>Pe,useIsFocusVisible:()=>ze});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})();const s=n(410).A;const o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))};var a=n(8168),l=n(5043),c=n.t(l,2),u=n(8587);function h(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=h(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const d=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=h(e))&&(r&&(r+=" "),r+=t);return r};function f(e,t){const n=(0,a.A)({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=(0,a.A)({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},s=t[r];n[r]={},s&&Object.keys(s)?i&&Object.keys(i)?(n[r]=(0,a.A)({},s),Object.keys(i).forEach((e=>{n[r][e]=f(i[e],s[e])}))):n[r]=s:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function p(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?f(t.components[n].defaultProps,r):r}var m=n(8280),g=n(5756);const y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=l.useContext(g.T);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},v=(0,m.A)();const _=function(){return y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:v)};var w=n(6632),b=n(3216),S=n(7758),I=n(8812);var E=n(7266);const T={black:"#000",white:"#fff"},k={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},C={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},x={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},A={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},N={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},P={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},R={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},O=["mode","contrastThreshold","tonalOffset"],D={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:T.white,default:T.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},L={text:{primary:T.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:T.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function M(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,E.a)(e.main,i):"dark"===t&&(e.dark=(0,E.e$)(e.main,s)))}function F(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=(0,u.A)(e,O),s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:N[200],light:N[50],dark:N[400]}:{main:N[700],light:N[400],dark:N[800]}}(t),o=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:C[200],light:C[50],dark:C[400]}:{main:C[500],light:C[300],dark:C[700]}}(t),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:x[500],light:x[300],dark:x[700]}:{main:x[700],light:x[400],dark:x[800]}}(t),c=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:P[400],light:P[300],dark:P[700]}:{main:P[700],light:P[500],dark:P[900]}}(t),h=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:R[400],light:R[300],dark:R[700]}:{main:R[800],light:R[500],dark:R[900]}}(t),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:A[400],light:A[300],dark:A[700]}:{main:"#ed6c02",light:A[500],dark:A[900]}}(t);function f(e){return(0,E.eM)(e,L.text.primary)>=n?L.text.primary:D.text.primary}const p=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:o=700}=e;if(t=(0,a.A)({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,w.A)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,w.A)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return M(t,"light",s,r),M(t,"dark",o,r),t.contrastText||(t.contrastText=f(t.main)),t},m={dark:L,light:D};return(0,b.A)((0,a.A)({common:(0,a.A)({},T),mode:t,primary:p({color:s,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:l,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:c,name:"info"}),success:p({color:h,name:"success"}),grey:k,contrastThreshold:n,getContrastText:f,augmentColor:p,tonalOffset:r},m[t]),i)}const U=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const j={textTransform:"uppercase"},V='"Roboto", "Helvetica", "Arial", sans-serif';function z(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=V,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:l=500,fontWeightBold:c=700,htmlFontSize:h=16,allVariants:d,pxToRem:f}=n,p=(0,u.A)(n,U);const m=i/14,g=f||(e=>"".concat(e/h*m,"rem")),y=(e,t,n,i,s)=>{return(0,a.A)({fontFamily:r,fontWeight:e,fontSize:g(t),lineHeight:n},r===V?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{},s,d);var o},v={h1:y(s,96,1.167,-1.5),h2:y(s,60,1.2,-.5),h3:y(o,48,1.167,0),h4:y(o,34,1.235,.25),h5:y(o,24,1.334,0),h6:y(l,20,1.6,.15),subtitle1:y(o,16,1.75,.15),subtitle2:y(l,14,1.57,.1),body1:y(o,16,1.5,.15),body2:y(o,14,1.43,.15),button:y(l,14,1.75,.4,j),caption:y(o,12,1.66,.4),overline:y(o,12,2.66,1,j),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,b.A)((0,a.A)({htmlFontSize:h,pxToRem:g,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:l,fontWeightBold:c},v),p,{clone:!1})}function B(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const q=["none",B(0,2,1,-1,0,1,1,0,0,1,3,0),B(0,3,1,-2,0,2,2,0,0,1,5,0),B(0,3,3,-2,0,3,4,0,0,1,8,0),B(0,2,4,-1,0,4,5,0,0,1,10,0),B(0,3,5,-1,0,5,8,0,0,1,14,0),B(0,3,5,-1,0,6,10,0,0,1,18,0),B(0,4,5,-2,0,7,10,1,0,2,16,1),B(0,5,5,-3,0,8,10,1,0,3,14,2),B(0,5,6,-3,0,9,12,1,0,3,16,2),B(0,6,6,-3,0,10,14,1,0,4,18,3),B(0,6,7,-4,0,11,15,1,0,4,20,3),B(0,7,8,-4,0,12,17,2,0,5,22,4),B(0,7,8,-4,0,13,19,2,0,5,24,4),B(0,7,9,-4,0,14,21,2,0,5,26,4),B(0,8,9,-5,0,15,22,2,0,6,28,5),B(0,8,10,-5,0,16,24,2,0,6,30,5),B(0,8,11,-5,0,17,26,2,0,6,32,5),B(0,9,11,-5,0,18,28,2,0,7,34,6),B(0,9,12,-6,0,19,29,2,0,7,36,6),B(0,10,13,-6,0,20,31,3,0,8,38,7),B(0,10,13,-6,0,21,33,3,0,8,40,7),B(0,10,14,-6,0,22,35,3,0,8,42,7),B(0,11,14,-7,0,23,36,3,0,9,44,8),B(0,11,15,-7,0,24,38,3,0,9,46,8)],W=["duration","easing","delay"],K={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},H={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function G(e){return"".concat(Math.round(e),"ms")}function Q(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function Y(e){const t=(0,a.A)({},K,e.easing),n=(0,a.A)({},H,e.duration);return(0,a.A)({getAutoHeightDuration:Q,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:s=t.easeInOut,delay:o=0}=r;(0,u.A)(r,W);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:G(i)," ").concat(s," ").concat("string"===typeof o?o:G(o)))).join(",")}},e,{easing:t,duration:n})}const $={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},J=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mixins:t={},palette:n={},transitions:r={},typography:i={}}=e,s=(0,u.A)(e,J);if(e.vars)throw new Error((0,w.A)(18));const o=F(n),l=(0,m.A)(e);let c=(0,b.A)(l,{mixins:(h=l.breakpoints,d=t,(0,a.A)({toolbar:{minHeight:56,[h.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[h.up("sm")]:{minHeight:64}}},d)),palette:o,shadows:q.slice(),typography:z(o,i),transitions:Y(r),zIndex:(0,a.A)({},$)});var h,d;c=(0,b.A)(c,s);for(var f=arguments.length,p=new Array(f>1?f-1:0),g=1;g<f;g++)p[g-1]=arguments[g];return c=p.reduce(((e,t)=>(0,b.A)(e,t)),c),c.unstable_sxConfig=(0,a.A)({},S.A,null==s?void 0:s.unstable_sxConfig),c.unstable_sx=function(e){return(0,I.A)({sx:e,theme:this})},c}const Z=X(),ee="$$material";function te(e){let{props:t,name:n}=e;return function(e){let{props:t,name:n,defaultTheme:r,themeId:i}=e,s=_(r);return i&&(s=s[i]||s),p({theme:s,name:n,props:t})}({props:t,name:n,defaultTheme:Z,themeId:ee})}var ne=n(8052);const re=(0,ne.Ay)({themeId:ee,defaultTheme:Z,rootShouldForwardProp:e=>(0,ne.MC)(e)&&"classes"!==e}),ie={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function se(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=ie[t];return r?"".concat(n,"-").concat(r):"".concat(i.generate(e),"-").concat(t)}function oe(e){return se("MuiSvgIcon",e)}!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};t.forEach((t=>{r[t]=se(e,t,n)}))}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var ae=n(579);const le=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],ce=e=>{const{color:t,fontSize:n,classes:r}=e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}({root:["root","inherit"!==t&&"color".concat(s(t)),"fontSize".concat(s(n))]},oe,r)},ue=re("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(s(n.color))],t["fontSize".concat(s(n.fontSize))]]}})((e=>{let{theme:t,ownerState:n}=e;var r,i,s,o,a,l,c,u,h,d,f,p,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(r=t.transitions)||null==(i=r.create)?void 0:i.call(r,"fill",{duration:null==(s=t.transitions)||null==(s=s.duration)?void 0:s.shorter}),fontSize:{inherit:"inherit",small:(null==(o=t.typography)||null==(a=o.pxToRem)?void 0:a.call(o,20))||"1.25rem",medium:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,24))||"1.5rem",large:(null==(u=t.typography)||null==(h=u.pxToRem)?void 0:h.call(u,35))||"2.1875rem"}[n.fontSize],color:null!=(d=null==(f=(t.vars||t).palette)||null==(f=f[n.color])?void 0:f.main)?d:{action:null==(p=(t.vars||t).palette)||null==(p=p.action)?void 0:p.active,disabled:null==(m=(t.vars||t).palette)||null==(m=m.action)?void 0:m.disabled,inherit:void 0}[n.color]}})),he=l.forwardRef((function(e,t){const n=te({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:s="inherit",component:o="svg",fontSize:c="medium",htmlColor:h,inheritViewBox:f=!1,titleAccess:p,viewBox:m="0 0 24 24"}=n,g=(0,u.A)(n,le),y=l.isValidElement(r)&&"svg"===r.type,v=(0,a.A)({},n,{color:s,component:o,fontSize:c,instanceFontSize:e.fontSize,inheritViewBox:f,viewBox:m,hasSvgAsChild:y}),_={};f||(_.viewBox=m);const w=ce(v);return(0,ae.jsxs)(ue,(0,a.A)({as:o,className:d(w.root,i),focusable:"false",color:h,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:t},_,g,y&&r.props,{ownerState:v,children:[y?r.props.children:r,p?(0,ae.jsx)("title",{children:p}):null]}))}));he.muiName="SvgIcon";const de=he;function fe(e,t){function n(n,r){return(0,ae.jsx)(de,(0,a.A)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=de.muiName,l.memo(l.forwardRef(n))}const pe=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r};const me=function(e,t){return()=>null};const ge=function(e,t){var n,r;return l.isValidElement(e)&&-1!==t.indexOf(null!=(n=e.type.muiName)?n:null==(r=e.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)};function ye(e){return e&&e.ownerDocument||document}const ve=ye;const _e=function(e){return ye(e).defaultView||window};const we=function(e,t){return()=>null};function be(e,t){"function"===typeof e?e(t):e&&(e.current=t)}const Se=be,Ie="undefined"!==typeof window?l.useLayoutEffect:l.useEffect,Ee=Ie;let Te=0;const ke=c["useId".toString()];const Ce=function(e){if(void 0!==ke){const t=ke();return null!=e?e:t}return function(e){const[t,n]=l.useState(e),r=e||t;return l.useEffect((()=>{null==t&&(Te+=1,n("mui-".concat(Te)))}),[t]),r}(e)};const xe=function(e,t,n,r,i){return null};const Ae=function(e){let{controlled:t,default:n,name:r,state:i="value"}=e;const{current:s}=l.useRef(void 0!==t),[o,a]=l.useState(n);return[s?t:o,l.useCallback((e=>{s||a(e)}),[])]};const Ne=function(e){const t=l.useRef(e);return Ie((()=>{t.current=e})),l.useRef((function(){return(0,t.current)(...arguments)})).current};const Pe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{be(t,e)}))}),t)};class Re{constructor(){this.currentId=0,this.clear=()=>{0!==this.currentId&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new Re}start(e,t){this.clear(),this.currentId=setTimeout((()=>{this.currentId=0,t()}),e)}}let Oe=!0,De=!1;const Le=new Re,Me={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Fe(e){e.metaKey||e.altKey||e.ctrlKey||(Oe=!0)}function Ue(){Oe=!1}function je(){"hidden"===this.visibilityState&&De&&(Oe=!0)}function Ve(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(n){}return Oe||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!Me[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}const ze=function(){const e=l.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",Fe,!0),t.addEventListener("mousedown",Ue,!0),t.addEventListener("pointerdown",Ue,!0),t.addEventListener("touchstart",Ue,!0),t.addEventListener("visibilitychange",je,!0))}),[]),t=l.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!Ve(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(De=!0,Le.start(100,(()=>{De=!1})),t.current=!1,!0)},ref:e}},Be={configure:e=>{i.configure(e)}}},568:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalStyles:()=>k,StyledEngineProvider:()=>T,ThemeContext:()=>l.T,css:()=>b,default:()=>C,internal_processStyles:()=>x,keyframes:()=>S});var r=n(8168),i=n(5043),s=n(918),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,s.A)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),l=n(5756);var c=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},u=function(e,t,n){c(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},h=n(2830),d=n(9436),f=a,p=function(e){return"theme"!==e},m=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?f:p},g=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},y=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return c(t,n,r),(0,d.s)((function(){return u(t,n,r)})),null},v=function e(t,n){var s,o,a=t.__emotion_real===t,c=a&&t.__emotion_base||t;void 0!==n&&(s=n.label,o=n.target);var u=g(t,n,a),d=u||m(c),f=!d("as");return function(){var p=arguments,v=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==s&&v.push("label:"+s+";"),null==p[0]||void 0===p[0].raw)v.push.apply(v,p);else{0,v.push(p[0][0]);for(var _=p.length,w=1;w<_;w++)v.push(p[w],p[0][w])}var b=(0,l.w)((function(e,t,n){var r=f&&e.as||c,s="",a=[],p=e;if(null==e.theme){for(var g in p={},e)p[g]=e[g];p.theme=i.useContext(l.T)}"string"===typeof e.className?s=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(t.registered,a,e.className):null!=e.className&&(s=e.className+" ");var _=(0,h.J)(v.concat(a),t.registered,p);s+=t.key+"-"+_.name,void 0!==o&&(s+=" "+o);var w=f&&void 0===u?m(r):d,b={};for(var S in e)f&&"as"===S||w(S)&&(b[S]=e[S]);return b.className=s,b.ref=n,i.createElement(i.Fragment,null,i.createElement(y,{cache:t,serialized:_,isStringTag:"string"===typeof r}),i.createElement(r,b))}));return b.displayName=void 0!==s?s:"Styled("+("string"===typeof c?c:c.displayName||c.name||"Component")+")",b.defaultProps=t.defaultProps,b.__emotion_real=b,b.__emotion_base=c,b.__emotion_styles=v,b.__emotion_forwardProp=u,Object.defineProperty(b,"toString",{value:function(){return"."+o}}),b.withComponent=function(t,i){return e(t,(0,r.A)({},n,i,{shouldForwardProp:g(b,i,!0)})).apply(void 0,v)},b}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));var _=n(5513),w=(n(219),(0,l.w)((function(e,t){var n=e.styles,r=(0,h.J)([n],void 0,i.useContext(l.T));if(!l.i){for(var s,o=r.name,a=r.styles,c=r.next;void 0!==c;)o+=" "+c.name,a+=c.styles,c=c.next;var f=!0===t.compat,p=t.insert("",{name:o,styles:a},t.sheet,f);return f?null:i.createElement("style",((s={})["data-emotion"]=t.key+"-global "+o,s.dangerouslySetInnerHTML={__html:p},s.nonce=t.sheet.nonce,s))}var m=i.useRef();return(0,d.i)((function(){var e=t.key+"-global",n=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,s=document.querySelector('style[data-emotion="'+e+" "+r.name+'"]');return t.sheet.tags.length&&(n.before=t.sheet.tags[0]),null!==s&&(i=!0,s.setAttribute("data-emotion",e),n.hydrate([s])),m.current=[n,i],function(){n.flush()}}),[t]),(0,d.i)((function(){var e=m.current,n=e[0];if(e[1])e[1]=!1;else{if(void 0!==r.next&&u(t,r.next,!0),n.tags.length){var i=n.tags[n.tags.length-1].nextElementSibling;n.before=i,n.flush()}t.insert("",r,n,!1)}}),[t,r.name]),null})));function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,h.J)(t)}var S=function(){var e=b.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var I=n(579);let E;function T(e){const{injectFirst:t,children:n}=e;return t&&E?(0,I.jsx)(l.C,{value:E,children:n}):n}function k(e){const{styles:t,defaultTheme:n={}}=e,r="function"===typeof t?e=>{return t(void 0===(r=e)||null===r||0===Object.keys(r).length?n:e);var r}:t;return(0,I.jsx)(w,{styles:r})}function C(e,t){return v(e,t)}"object"===typeof document&&(E=(0,_.A)({key:"css",prepend:!0}));const x=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},7266:(e,t,n)=>{"use strict";var r=n(4994);t.e$=p,t.eM=function(e,t){const n=d(e),r=d(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},t.a=m;var i=r(n(7245)),s=r(n(1098));function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,s.default)(e,t,n)}function a(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}function l(e){if(e.type)return e;if("#"===e.charAt(0))return l(a(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.default)(9,e));let r,s=e.substring(t+1,e.length-1);if("color"===n){if(s=s.split(" "),r=s.shift(),4===s.length&&"/"===s[3].charAt(0)&&(s[3]=s[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.default)(10,r))}else s=s.split(",");return s=s.map((e=>parseFloat(e))),{type:n,values:s,colorSpace:r}}const c=e=>{const t=l(e);return t.values.slice(0,3).map(((e,n)=>-1!==t.type.indexOf("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")};function u(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function h(e){e=l(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const c=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",c.push(t[3])),u({type:a,values:c})}function d(e){let t="hsl"===(e=l(e)).type||"hsla"===e.type?l(h(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function f(e,t){return e=l(e),t=o(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,u(e)}function p(e,t){if(e=l(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return u(e)}function m(e,t){if(e=l(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return u(e)}},8052:(e,t,n)=>{"use strict";var r=n(4994);t.Ay=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=m,rootShouldForwardProp:r=p,slotShouldForwardProp:l=p}=e,u=e=>(0,c.default)((0,i.default)({},e,{theme:y((0,i.default)({},e,{defaultTheme:n,themeId:t}))}));return u.__mui_systemSx=!0,function(e){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.internal_processStyles)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:h,slot:f,skipVariantsResolver:m,skipSx:w,overridesResolver:b=v(g(f))}=c,S=(0,s.default)(c,d),I=void 0!==m?m:f&&"Root"!==f&&"root"!==f||!1,E=w||!1;let T=p;"Root"===f||"root"===f?T=r:f?T=l:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(T=void 0);const k=(0,o.default)(e,(0,i.default)({shouldForwardProp:T,label:undefined},S)),C=e=>"function"===typeof e&&e.__emotion_real!==e||(0,a.isPlainObject)(e)?r=>_(e,(0,i.default)({},r,{theme:y({theme:r.theme,defaultTheme:n,themeId:t})})):e,x=function(r){let s=C(r);for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];const c=a?a.map(C):[];h&&b&&c.push((e=>{const r=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));if(!r.components||!r.components[h]||!r.components[h].styleOverrides)return null;const s=r.components[h].styleOverrides,o={};return Object.entries(s).forEach((t=>{let[n,s]=t;o[n]=_(s,(0,i.default)({},e,{theme:r}))})),b(e,o)})),h&&!I&&c.push((e=>{var r;const s=y((0,i.default)({},e,{defaultTheme:n,themeId:t}));return _({variants:null==s||null==(r=s.components)||null==(r=r[h])?void 0:r.variants},(0,i.default)({},e,{theme:s}))})),E||c.push(u);const d=c.length-a.length;if(Array.isArray(r)&&d>0){const e=new Array(d).fill("");s=[...r,...e],s.raw=[...r.raw,...e]}const f=k(s,...c);return e.muiName&&(f.muiName=e.muiName),f};return k.withConfig&&(x.withConfig=k.withConfig),x}},t.MC=p;var i=r(n(4634)),s=r(n(4893)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(n(568)),a=n(4534),l=(r(n(578)),r(n(2046)),r(n(4989))),c=r(n(9265));const u=["ownerState"],h=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const m=(0,l.default)(),g=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function y(e){let{defaultTheme:t,theme:n,themeId:r}=e;return i=n,0===Object.keys(i).length?t:n[r]||n;var i}function v(e){return e?(t,n)=>n[e]:null}function _(e,t){let{ownerState:n}=t,r=(0,s.default)(t,u);const o="function"===typeof e?e((0,i.default)({ownerState:n},r)):e;if(Array.isArray(o))return o.flatMap((e=>_(e,(0,i.default)({ownerState:n},r))));if(o&&"object"===typeof o&&Array.isArray(o.variants)){const{variants:e=[]}=o;let t=(0,s.default)(o,h);return e.forEach((e=>{let s=!0;"function"===typeof e.props?s=e.props((0,i.default)({ownerState:n},r,n)):Object.keys(e.props).forEach((t=>{(null==n?void 0:n[t])!==e.props[t]&&r[t]!==e.props[t]&&(s=!1)})),s&&(Array.isArray(t)||(t=[t]),t.push("function"===typeof e.style?e.style((0,i.default)({ownerState:n},r,n)):e.style))})),t}return o}},9751:(e,t,n)=>{"use strict";n.d(t,{EU:()=>o,NI:()=>s,vf:()=>a,zu:()=>r});const r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(r[e],"px)")};function s(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const e=s.breakpoints||i;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=s.breakpoints||i;return Object.keys(t).reduce(((i,s)=>{if(-1!==Object.keys(e.values||r).indexOf(s)){i[e.up(s)]=n(t[s],s)}else{const e=s;i[e]=t[e]}return i}),{})}return n(t)}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}function a(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},9703:(e,t,n)=>{"use strict";function r(e,t){const n=this;if(n.vars&&"function"===typeof n.getColorSchemeSelector){return{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}}return n.palette.mode===e?t:{}}n.d(t,{A:()=>r})},4853:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(8587),i=n(8168);const s=["values","unit","step"],o=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>(0,i.A)({},e,{[t.key]:t.val})),{})};function a(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,l=(0,r.A)(e,s),c=o(t),u=Object.keys(c);function h(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function d(e){const r="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(r-a/100).concat(n,")")}function f(e,r){const i=u.indexOf(r);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==i&&"number"===typeof t[u[i]]?t[u[i]]:r)-a/100).concat(n,")")}return(0,i.A)({keys:u,values:c,up:h,down:d,between:f,only:function(e){return u.indexOf(e)+1<u.length?f(e,u[u.indexOf(e)+1]):h(e)},not:function(e){const t=u.indexOf(e);return 0===t?h(u[1]):t===u.length-1?d(u[t]):f(e,u[u.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},l)}},8280:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=n(8168),i=n(8587),s=n(3216),o=n(4853);const a={borderRadius:4};var l=n(8604);var c=n(8812),u=n(7758),h=n(9703);const d=["breakpoints","palette","spacing","shape"];const f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:f,shape:p={}}=e,m=(0,i.A)(e,d),g=(0,o.A)(t),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;const t=(0,l.LX)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}(f);let v=(0,s.A)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.A)({mode:"light"},n),spacing:y,shape:(0,r.A)({},a,p)},m);v.applyStyles=h.A;for(var _=arguments.length,w=new Array(_>1?_-1:0),b=1;b<_;b++)w[b-1]=arguments[b];return v=w.reduce(((e,t)=>(0,s.A)(e,t)),v),v.unstable_sxConfig=(0,r.A)({},u.A,null==m?void 0:m.unstable_sxConfig),v.unstable_sx=function(e){return(0,c.A)({sx:e,theme:this})},v}},4989:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,private_createBreakpoints:()=>i.A,unstable_applyStyles:()=>s.A});var r=n(8280),i=n(4853),s=n(9703)},3815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(3216);const i=function(e,t){return t?(0,r.A)(e,t,{clone:!1}):e}},8604:(e,t,n)=>{"use strict";n.d(t,{LX:()=>p,MA:()=>f,_W:()=>m,Lc:()=>v,Ms:()=>_});var r=n(9751),i=n(7162),s=n(3815);const o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!l[e])return[e];e=l[e]}const[t,n]=e.split(""),r=o[t],i=a[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),u=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],h=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[...u,...h];function f(e,t,n,r){var s;const o=null!=(s=(0,i.Yn)(e,t,!1))?s:n;return"number"===typeof o?e=>"string"===typeof e?e:o*e:Array.isArray(o)?e=>"string"===typeof e?e:o[e]:"function"===typeof o?o:()=>{}}function p(e){return f(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,i){if(-1===t.indexOf(n))return null;const s=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=m(t,n),e)),{})}(c(n),i),o=e[n];return(0,r.NI)(e,o,s)}function y(e,t){const n=p(e.theme);return Object.keys(e).map((r=>g(e,t,r,n))).reduce(s.A,{})}function v(e){return y(e,u)}function _(e){return y(e,h)}function w(e){return y(e,d)}v.propTypes={},v.filterProps=u,_.propTypes={},_.filterProps=h,w.propTypes={},w.filterProps=d},7162:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a,BO:()=>o,Yn:()=>s});var r=n(410),i=n(9751);function s(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function o(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:s(e,n)||i,t&&(r=t(r,i,e)),r}const a=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:l}=e,c=e=>{if(null==e[t])return null;const c=e[t],u=s(e.theme,a)||{};return(0,i.NI)(e,c,(e=>{let i=o(u,l,e);return e===i&&"string"===typeof e&&(i=o(u,l,"".concat(t).concat("default"===e?"":(0,r.A)(e)),e)),!1===n?i:{[n]:i}}))};return c.propTypes={},c.filterProps=[t],c}},7758:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var r=n(8604),i=n(7162),s=n(3815);const o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?(0,s.A)(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};var a=n(9751);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function c(e,t){return(0,i.Ay)({prop:e,themeKey:"borders",transform:t})}const u=c("border",l),h=c("borderTop",l),d=c("borderRight",l),f=c("borderBottom",l),p=c("borderLeft",l),m=c("borderColor"),g=c("borderTopColor"),y=c("borderRightColor"),v=c("borderBottomColor"),_=c("borderLeftColor"),w=c("outline",l),b=c("outlineColor"),S=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=(0,r.MA)(e.theme,"shape.borderRadius",4,"borderRadius"),n=e=>({borderRadius:(0,r._W)(t,e)});return(0,a.NI)(e,e.borderRadius,n)}return null};S.propTypes={},S.filterProps=["borderRadius"];o(u,h,d,f,p,m,g,y,v,_,S,w,b);const I=e=>{if(void 0!==e.gap&&null!==e.gap){const t=(0,r.MA)(e.theme,"spacing",8,"gap"),n=e=>({gap:(0,r._W)(t,e)});return(0,a.NI)(e,e.gap,n)}return null};I.propTypes={},I.filterProps=["gap"];const E=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=(0,r.MA)(e.theme,"spacing",8,"columnGap"),n=e=>({columnGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.columnGap,n)}return null};E.propTypes={},E.filterProps=["columnGap"];const T=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=(0,r.MA)(e.theme,"spacing",8,"rowGap"),n=e=>({rowGap:(0,r._W)(t,e)});return(0,a.NI)(e,e.rowGap,n)}return null};T.propTypes={},T.filterProps=["rowGap"];o(I,E,T,(0,i.Ay)({prop:"gridColumn"}),(0,i.Ay)({prop:"gridRow"}),(0,i.Ay)({prop:"gridAutoFlow"}),(0,i.Ay)({prop:"gridAutoColumns"}),(0,i.Ay)({prop:"gridAutoRows"}),(0,i.Ay)({prop:"gridTemplateColumns"}),(0,i.Ay)({prop:"gridTemplateRows"}),(0,i.Ay)({prop:"gridTemplateAreas"}),(0,i.Ay)({prop:"gridArea"}));function k(e,t){return"grey"===t?t:e}o((0,i.Ay)({prop:"color",themeKey:"palette",transform:k}),(0,i.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:k}),(0,i.Ay)({prop:"backgroundColor",themeKey:"palette",transform:k}));function C(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const x=(0,i.Ay)({prop:"width",transform:C}),A=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||a.zu[t];return i?"px"!==(null==(r=e.theme)||null==(r=r.breakpoints)?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:C(t)}};return(0,a.NI)(e,e.maxWidth,t)}return null};A.filterProps=["maxWidth"];const N=(0,i.Ay)({prop:"minWidth",transform:C}),P=(0,i.Ay)({prop:"height",transform:C}),R=(0,i.Ay)({prop:"maxHeight",transform:C}),O=(0,i.Ay)({prop:"minHeight",transform:C}),D=((0,i.Ay)({prop:"size",cssProperty:"width",transform:C}),(0,i.Ay)({prop:"size",cssProperty:"height",transform:C}),o(x,A,N,P,R,O,(0,i.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:l},borderTop:{themeKey:"borders",transform:l},borderRight:{themeKey:"borders",transform:l},borderBottom:{themeKey:"borders",transform:l},borderLeft:{themeKey:"borders",transform:l},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:l},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:S},color:{themeKey:"palette",transform:k},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:k},backgroundColor:{themeKey:"palette",transform:k},p:{style:r.Ms},pt:{style:r.Ms},pr:{style:r.Ms},pb:{style:r.Ms},pl:{style:r.Ms},px:{style:r.Ms},py:{style:r.Ms},padding:{style:r.Ms},paddingTop:{style:r.Ms},paddingRight:{style:r.Ms},paddingBottom:{style:r.Ms},paddingLeft:{style:r.Ms},paddingX:{style:r.Ms},paddingY:{style:r.Ms},paddingInline:{style:r.Ms},paddingInlineStart:{style:r.Ms},paddingInlineEnd:{style:r.Ms},paddingBlock:{style:r.Ms},paddingBlockStart:{style:r.Ms},paddingBlockEnd:{style:r.Ms},m:{style:r.Lc},mt:{style:r.Lc},mr:{style:r.Lc},mb:{style:r.Lc},ml:{style:r.Lc},mx:{style:r.Lc},my:{style:r.Lc},margin:{style:r.Lc},marginTop:{style:r.Lc},marginRight:{style:r.Lc},marginBottom:{style:r.Lc},marginLeft:{style:r.Lc},marginX:{style:r.Lc},marginY:{style:r.Lc},marginInline:{style:r.Lc},marginInlineStart:{style:r.Lc},marginInlineEnd:{style:r.Lc},marginBlock:{style:r.Lc},marginBlockStart:{style:r.Lc},marginBlockEnd:{style:r.Lc},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:I},rowGap:{style:T},columnGap:{style:E},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:C},maxWidth:{style:A},minWidth:{transform:C},height:{transform:C},maxHeight:{transform:C},minHeight:{transform:C},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},9265:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,extendSxProp:()=>u,unstable_createStyleFunctionSx:()=>r.k,unstable_defaultSxConfig:()=>a.A});var r=n(8812),i=n(8168),s=n(8587),o=n(3216),a=n(7758);const l=["sx"],c=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=null!=(t=null==e||null==(n=e.theme)?void 0:n.unstable_sxConfig)?t:a.A;return Object.keys(e).forEach((t=>{i[t]?r.systemProps[t]=e[t]:r.otherProps[t]=e[t]})),r};function u(e){const{sx:t}=e,n=(0,s.A)(e,l),{systemProps:r,otherProps:a}=c(n);let u;return u=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return(0,o.Q)(e)?(0,i.A)({},r,e):r}:(0,i.A)({},r,t),(0,i.A)({},a,{sx:u})}},8812:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,k:()=>l});var r=n(410),i=n(3815),s=n(7162),o=n(9751),a=n(7758);function l(){function e(e,t,n,i){const a={[e]:t,theme:n},l=i[e];if(!l)return{[e]:t};const{cssProperty:c=e,themeKey:u,transform:h,style:d}=l;if(null==t)return null;if("typography"===u&&"inherit"===t)return{[e]:t};const f=(0,s.Yn)(n,u)||{};if(d)return d(a);return(0,o.NI)(a,t,(t=>{let n=(0,s.BO)(f,h,t);return t===n&&"string"===typeof t&&(n=(0,s.BO)(f,h,"".concat(e).concat("default"===t?"":(0,r.A)(t)),t)),!1===c?n:{[c]:n}}))}return function t(n){var r;const{sx:s,theme:l={}}=n||{};if(!s)return null;const c=null!=(r=l.unstable_sxConfig)?r:a.A;function u(n){let r=n;if("function"===typeof n)r=n(l);else if("object"!==typeof n)return n;if(!r)return null;const s=(0,o.EU)(l.breakpoints),a=Object.keys(s);let u=s;return Object.keys(r).forEach((n=>{const s=(a=r[n],h=l,"function"===typeof a?a(h):a);var a,h;if(null!==s&&void 0!==s)if("object"===typeof s)if(c[n])u=(0,i.A)(u,e(n,s,l,c));else{const e=(0,o.NI)({theme:l},s,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,s)?u=(0,i.A)(u,e):u[n]=t({sx:s,theme:l})}else u=(0,i.A)(u,e(n,s,l,c))})),(0,o.vf)(a,u)}return Array.isArray(s)?s.map(u):u(s)}}const c=l();c.filterProps=["sx"];const u=c},410:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6632);function i(e){if("string"!==typeof e)throw new Error((0,r.A)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},578:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(410)},1098:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))}},3216:(e,t,n)=>{"use strict";n.d(t,{A:()=>o,Q:()=>i});var r=n(8168);function i(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function s(e){if(!i(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=s(e[n])})),t}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const a=n.clone?(0,r.A)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((r=>{"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?a[r]=o(e[r],t[r],n):n.clone?a[r]=i(t[r])?s(t[r]):t[r]:a[r]=t[r])})),a}},4534:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A,isPlainObject:()=>r.Q});var r=n(3216)},6632:(e,t,n)=>{"use strict";function r(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{A:()=>r})},7245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r.A});var r=n(6632)},2046:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,getFunctionName:()=>s});var r=n(9565);const i=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function s(e){const t="".concat(e).match(i);return t&&t[1]||""}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.displayName||e.name||s(e)||t}function a(e,t,n){const r=o(t);return e.displayName||(""!==r?"".concat(n,"(").concat(r,")"):n)}function l(e){if(null!=e){if("string"===typeof e)return e;if("function"===typeof e)return o(e,"Component");if("object"===typeof e)switch(e.$$typeof){case r.ForwardRef:return a(e,e.render,"ForwardRef");case r.Memo:return a(e,e.type,"memo");default:return}}}},8609:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case a:case o:case d:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.ForwardRef=h,t.Memo=p},9565:(e,t,n)=>{"use strict";e.exports=n(8609)},219:(e,t,n)=>{"use strict";var r=n(3763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{c(t,y,v)}catch(_){}}}}return t}},4983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return b(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||b(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===_||e.$$typeof===w||e.$$typeof===y)},t.typeOf=b},3763:(e,t,n)=>{"use strict";e.exports=n(4983)},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6990:(e,t,n)=>{"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=l(n(5173)),o=l(n(5043)),a=n(258);function l(e){return e&&e.__esModule?e:{default:e}}var c={thousandSeparator:s.default.oneOfType([s.default.string,s.default.oneOf([!0])]),thousandSpacing:s.default.oneOf(["2","2s","3","4"]),decimalSeparator:s.default.string,decimalScale:s.default.number,fixedDecimalScale:s.default.bool,displayType:s.default.oneOf(["input","text"]),prefix:s.default.string,suffix:s.default.string,format:s.default.oneOfType([s.default.string,s.default.func]),removeFormatting:s.default.func,mask:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)]),value:s.default.oneOfType([s.default.number,s.default.string]),isNumericString:s.default.bool,customInput:s.default.func,allowNegative:s.default.bool,onValueChange:s.default.func,onKeyDown:s.default.func,onMouseUp:s.default.func,onChange:s.default.func,onFocus:s.default.func,onBlur:s.default.func,type:s.default.oneOf(["text","tel"]),isAllowed:s.default.func,renderText:s.default.func},u={displayType:"input",decimalSeparator:".",thousandSpacing:"3",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,isNumericString:!1,type:"text",onValueChange:a.noop,onChange:a.noop,onKeyDown:a.noop,onMouseUp:a.noop,onFocus:a.noop,onBlur:a.noop,isAllowed:a.returnTrue},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.validateProps();var r=n.formatValueProp();return n.state={value:r,numAsString:n.removeFormatting(r)},n.onChange=n.onChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,n=this.state;if(e!==t){this.validateProps();var r=n.value,i=n.numAsString||"",s=void 0===t.value?this.formatNumString(i):this.formatValueProp();s!==r&&this.setState({value:s,numAsString:this.removeFormatting(s)})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getSeparators().decimalSeparator,n=this.getNumberRegex(!0),r="-"===e[0];r&&(e=e.replace("-",""));var i=(e=(e.match(n)||[]).join("").replace(t,".")).indexOf(".");return-1!==i&&(e=e.substring(0,i)+"."+e.substring(i+1,e.length).replace(new RegExp((0,a.escapeRegExp)(t),"g"),"")),r&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var n=this.props,r=n.format,i=n.decimalScale,s=this.getSeparators().decimalSeparator;return new RegExp("\\d"+(!s||0===i||t||r?"":"|"+(0,a.escapeRegExp)(s)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props,t=e.decimalSeparator,n=e.thousandSpacing,r=this.props.thousandSeparator;return!0===r&&(r=","),{decimalSeparator:t,thousandSeparator:r,thousandSpacing:n}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,n=void 0===t?" ":t;return"string"===typeof n?n:n[e]||" "}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),n=t.decimalSeparator,r=t.thousandSeparator;if(n===r)throw new Error("\n          Decimal separator can't be same as thousand separator.\n\n          thousandSeparator: "+r+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: '+n+" (default value for decimalSeparator is .)\n       ");if(e&&("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask "+e+" should not contain numeric character;\n        ")}},{key:"splitDecimal",value:function(e){var t=this.props.allowNegative,n="-"===e[0],r=n&&t,i=(e=e.replace("-","")).split(".");return{beforeDecimal:i[0],afterDecimal:i[1]||"",hasNagation:n,addNegation:r}}},{key:"setPatchedCaretPosition",value:function(e,t,n){(0,a.setCaretPosition)(e,t),setTimeout((function(){e.value===n&&(0,a.setCaretPosition)(e,t)}),0)}},{key:"correctCaretPosition",value:function(e,t,n){var r=this.props,i=r.prefix,s=r.suffix,o=r.format;if(!o){var l="-"===e[0];return Math.min(Math.max(t,i.length+(l?1:0)),e.length-s.length)}if("function"===typeof o)return t;if("#"===o[t]&&(0,a.charIsNumber)(e[t]))return t;if("#"===o[t-1]&&(0,a.charIsNumber)(e[t-1]))return t;var c=o.indexOf("#"),u=o.lastIndexOf("#");t=Math.min(Math.max(t,c),u+1);for(var h=o.substring(t,o.length).indexOf("#"),d=t,f=t+(-1===h?0:h);d>c&&("#"!==o[d]||!(0,a.charIsNumber)(e[d]));)d-=1;return!(0,a.charIsNumber)(e[f])||"left"===n&&t!==c||t-d<f-t?d+1:f}},{key:"getCaretPosition",value:function(e,t,n){var r=this.props.format,i=this.state.value,s=this.getNumberRegex(!0),o=(e.match(s)||[]).join(""),a=(t.match(s)||[]).join(""),l=void 0,c=void 0;for(l=0,c=0;c<n;c++){var u=e[c]||"",h=t[l]||"";if((u.match(s)||u===h)&&("0"!==u||!h.match(s)||"0"===h||o.length===a.length)){for(;u!==t[l]&&l<t.length;)l++;l++}}return"string"!==typeof r||i||(l=t.length),l=this.correctCaretPosition(t,l)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,n=t.format,r=t.prefix,i=t.suffix;if(!n&&e){var s="-"===e[0];s&&(e=e.substring(1,e.length));var o=(e=r&&0===e.indexOf(r)?e.substring(r.length,e.length):e).lastIndexOf(i);e=i&&-1!==o&&o===e.length-i.length?e.substring(0,o):e,s&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format.split("#").filter((function(e){return""!==e})),n=0,r="",i=0,s=t.length;i<=s;i++){var o=t[i]||"",a=i===s?e.length:e.indexOf(o,n);if(-1===a){r=e;break}r+=e.substring(n,a),n=a+o.length}return(r.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,n=t.format,r=t.removeFormatting;return e?(n?e="string"===typeof n?this.removePatternFormatting(e):"function"===typeof r?r(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,n=0,r=t.split(""),i=0,s=t.length;i<s;i++)"#"===t[i]&&(r[i]=e[n]||this.getMaskAtIndex(n),n+=1);return r.join("")}},{key:"formatThousand",value:function(e,t,n){var r=void 0;switch(n){case a.thousandGroupSpacing.two:r=/(\d)(?=(\d{2})+(?!\d))/g;break;case a.thousandGroupSpacing.twoScaled:r=/(\d)(?=(((\d{2})+)(\d{1})(?!\d)))/g;break;case a.thousandGroupSpacing.four:r=/(\d)(?=(\d{4})+(?!\d))/g;break;default:r=/(\d)(?=(\d{3})+(?!\d))/g}return e.replace(r,"$1"+t)}},{key:"formatAsNumber",value:function(e){var t=this.props,n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix,s=t.suffix,o=this.getSeparators(),l=o.thousandSeparator,c=o.decimalSeparator,u=o.thousandSpacing,h=-1!==e.indexOf(".")||n&&r,d=this.splitDecimal(e),f=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return void 0!==n&&(p=(0,a.limitToScale)(p,n,r)),l&&(f=this.formatThousand(f,l,u)),i&&(f=i+f),s&&(p+=s),m&&(f="-"+f),e=f+(h&&c||"")+p}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.format,n=e;return""===e?n="":"-"!==e||t?n="string"===typeof t?this.formatWithPattern(n):"function"===typeof t?t(n):this.formatAsNumber(n):(n="-",e=""),n}},{key:"formatValueProp",value:function(){var e=this.props,t=e.format,n=e.decimalScale,r=e.fixedDecimalScale,i=this.props,s=i.value,o=i.isNumericString;return void 0===s?"":("number"===typeof s&&(s=s.toString(),o=!0),o&&!t&&"number"===typeof n&&(s=(0,a.roundToPrecision)(s,n,r)),o?this.formatNumString(s):this.formatInput(s))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.props.format||(e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var n=this.props,r=n.format,i=n.prefix,s=n.suffix,o=n.decimalScale,a=n.fixedDecimalScale,l=this.getSeparators().decimalSeparator;return"string"===typeof r&&"#"!==r[e]||!(r||!(e<i.length||e>=t.length-s.length||o&&a&&t[e]===l))}},{key:"checkIfFormatGotDeleted",value:function(e,t,n){for(var r=e;r<t;r++)if(this.isCharacterAFormat(r,n))return!0;return!1}},{key:"correctInputValue",value:function(e,t,n){var r=this.props.format,i=this.state.numAsString||"";if(n.length>=t.length||!n.length)return n;var s=e,o=(0,a.splitString)(t,e),l=(0,a.splitString)(n,e),c=o[1].lastIndexOf(l[1]),u=s+(-1!==c?o[1].substring(0,c):"").length;if(this.checkIfFormatGotDeleted(s,u,t)&&(n=t),!r){var h=this.removeFormatting(n),d=this.splitDecimal(h),f=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;if(h.length<i.length&&""===f&&!parseFloat(p))return m?"-":""}return n}},{key:"onChange",value:function(e){e.persist();var t=e.target,n=t.value,r=this.state,i=this.props,s=i.isAllowed,o=r.value||"",a=Math.max(t.selectionStart,t.selectionEnd);n=this.correctInputValue(a,o,n);var l=this.formatInput(n)||"",c=this.removeFormatting(l),u={formattedValue:l,value:c,floatValue:parseFloat(c)};s(u)||(l=o),t.value=l;var h=this.getCaretPosition(n,l,a);this.setPatchedCaretPosition(t,h,l),l!==o?this.setState({value:l,numAsString:c},(function(){i.onValueChange(u),i.onChange(e)})):i.onChange(e)}},{key:"onBlur",value:function(e){var t=this.props,n=this.state,r=t.format,i=t.onBlur,s=n.numAsString,o=n.value;if(!r){s=(0,a.fixLeadingZero)(s);var l=this.formatNumString(s),c={formattedValue:l,value:s,floatValue:parseFloat(s)};if(l!==o)return e.persist(),void this.setState({value:l,numAsString:s},(function(){t.onValueChange(c),i(e)}))}i(e)}},{key:"onKeyDown",value:function(e){var t=e.target,n=e.key,r=t.selectionEnd,i=t.value,s=t.selectionStart,o=void 0,a=this.props,l=a.decimalScale,c=a.fixedDecimalScale,u=a.prefix,h=a.suffix,d=a.format,f=a.onKeyDown,p=void 0!==l&&c,m=this.getNumberRegex(!1,p),g=new RegExp("-"),y="string"===typeof d;if("ArrowLeft"===n||"Backspace"===n?o=s-1:"ArrowRight"===n?o=s+1:"Delete"===n&&(o=s),void 0!==o&&s===r){var v=o,_=y?d.indexOf("#"):u.length,w=y?d.lastIndexOf("#")+1:i.length-h.length;if("ArrowLeft"===n||"ArrowRight"===n){var b="ArrowLeft"===n?"left":"right";v=this.correctCaretPosition(i,o,b)}else if("Delete"!==n||m.test(i[o])||g.test(i[o])){if("Backspace"===n&&!m.test(i[o])&&!g.test(i[o])){for(;!m.test(i[v-1])&&v>_;)v--;v=this.correctCaretPosition(i,v,"left")}}else for(;!m.test(i[v])&&v<w;)v++;(v!==o||o<_||o>w)&&(e.preventDefault(),this.setPatchedCaretPosition(t,v,i)),e.isUnitTestRun&&this.setPatchedCaretPosition(t,v,i),this.props.onKeyDown(e)}else f(e)}},{key:"onMouseUp",value:function(e){var t=e.target,n=t.selectionStart,r=t.selectionEnd,i=t.value;if(n===r){var s=this.correctCaretPosition(i,n);s!==n&&this.setPatchedCaretPosition(t,s,i)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),setTimeout((function(){var n=e.target,r=n.selectionStart,i=n.value,s=t.correctCaretPosition(i,r);s!==r&&t.setPatchedCaretPosition(n,s,i),t.props.onFocus(e)}))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.displayType,i=e.customInput,s=e.renderText,l=this.state.value,u=(0,a.omit)(this.props,c),h=r({},u,{type:t,value:l,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===n)return s?s(l)||null:o.default.createElement("span",u,l);if(i){var d=i;return o.default.createElement(d,h)}return o.default.createElement("input",h)}}]),t}(o.default.Component);h.propTypes=c,h.defaultProps=u,e.exports=h},258:(e,t)=>{"use strict";function n(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){},t.returnTrue=function(){return!0},t.charIsNumber=function(e){return!!(e||"").match(/\d/)},t.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.fixLeadingZero=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")},t.splitString=function(e,t){return[e.substring(0,t),e.substring(t)]},t.limitToScale=n,t.roundToPrecision=function(e,t,r){var i=e.split("."),s=parseFloat("0."+(i[1]||"0")).toFixed(t).split("."),o=i[0].split("").reverse().reduce((function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e}),s[0]),a=n(s[1]||"",(i[1]||"").length,r);return o+(a?"."+a:"")},t.omit=function(e,t){var n={};return Object.keys(e).forEach((function(r){t[r]||(n[r]=e[r])})),n},t.setCaretPosition=function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}};t.thousandGroupSpacing={two:"2",twoScaled:"2s",three:"3",four:"4"}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),S=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ie=null,Ee=null;function Te(e){if(e=_i(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Se(e.stateNode,e.type,t))}}function ke(e){Ie?Ee?Ee.push(e):Ee=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Ee;if(Ee=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ie||null!==Ee)&&(Ae(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,St,It,Et,Tt,kt=!1,Ct=[],xt=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(jt),Rt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Ht(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return En}var kn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Ir={},Er={};function Tr(e){if(Ir[e])return Ir[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Ir[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Ar=Tr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=be(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Cr:case xr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Wn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Hr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=zn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Re(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Kr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Kr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Si=[],Ii=-1;function Ei(e){return{current:e}}function Ti(e){0>Ii||(e.current=Si[Ii],Si[Ii]=null,Ii--)}function ki(e,t){Ii++,Si[Ii]=e.current,e.current=t}var Ci={},xi=Ei(Ci),Ai=Ei(!1),Ni=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ti(Ai),Ti(xi)}function Di(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=xi.current,ki(xi,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(xi),ki(xi,e)):Ti(Ai),ki(Ai,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{_t=t,Vi=!1}}return null}var qi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Wi++]=Hi,qi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ei(null),vs=null,_s=null,ws=null;function bs(){ws=_s=vs=null}function Ss(e){var t=ys.current;Ti(ys),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){vs=e,ws=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===vs)throw Error(s(308));_s=e,vs.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Os(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Os(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Os(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Ri(t)?Ni:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Ri(t)?Ni:xi.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case S:return(t=jc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Hs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Hs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Ei(Xs),eo=Ei(Xs),to=Ei(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ei(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,_o=!1,wo=0,bo=0;function So(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_o){o=0;do{if(_o=!1,wo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(_o)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==wo;return wo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=As(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=xs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){_o=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Hl=r),da(0,t)},n}function ma(e,t,n){(n=Os(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=w.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=Eo(e,t,n,r,s,i),n=To(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Dl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Dl,Ol),Ol|=r;return ba(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Ri(n)?Ni:xi.current;return s=Pi(t,s),Es(t,i),n=Eo(e,t,n,r,s,i),r=To(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function xa(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(Es(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Ks(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Pi(t,c=Ri(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ns?("function"===typeof u&&(Vs(t,n,u,r),l=t.memoizedState),(a=Ns||Bs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Pi(t,l=Ri(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ns?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(c=Ns||Bs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Oa,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Ga(t),null;case 3:return r=t.stateNode,io(),Ti(Ai),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Oa(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Ss(t.type._context),Ga(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ai),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Tc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Tc(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tc(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tc(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tc(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Tc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Za=l):Il(i);for(;null!==s;)Za=s,wl(s,t,n),s=s.sibling;Za=i,$a=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var El,Tl=Math.ceil,kl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,xl=w.ReactCurrentBatchConfig,Al=0,Nl=null,Pl=null,Rl=0,Ol=0,Dl=Ei(0),Ll=0,Ml=null,Fl=0,Ul=0,jl=0,Vl=null,zl=null,Bl=0,ql=1/0,Wl=null,Kl=!1,Hl=null,Gl=null,Ql=!1,Yl=null,$l=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Ul|=n),4===Ll&&lc(e,Rl)),ic(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Je()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Al)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Al;Al|=2;var o=mc();for(Nl===e&&Rl===t||(Wl=null,ql=Je()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}bs(),kl.current=o,Al=i,null!==Pl?t=0:(Nl=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,zl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,zl,Wl),t);break}Sc(e,zl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,zl,Wl),r);break}Sc(e,zl,Wl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~jl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,zl,Wl),ic(e,Je()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Je()+500,ji&&Bi())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Ic();var t=Al;Al|=1;var n=xl.transition,r=_t;try{if(xl.transition=null,_t=1,e)return e()}finally{_t=r,xl.transition=n,0===(6&(Al=t))&&Bi()}}function dc(){Ol=Dl.current,Ti(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ti(Ai),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Pl=e=Dc(e.current,null),Rl=Ol=t,Ll=0,Ml=null,jl=Ul=Fl=0,zl=Vl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(bs(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,_o=!1,wo=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Pl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Nl,Rl)}function yc(e,t){var n=Al;Al|=2;var r=mc();for(Nl===e&&Rl===t||(Wl=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(bs(),Al=n,kl.current=r,null!==Pl)throw Error(s(261));return Nl=null,Rl=0,Ll}function vc(){for(;null!==Pl;)wc(Pl)}function _c(){for(;null!==Pl&&!Ye();)wc(Pl)}function wc(e){var t=El(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ll=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Sc(e,t,n){var r=_t,i=xl.transition;try{xl.transition=null,_t=1,function(e,t,n,r){do{Ic()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Pl=Nl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Nc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=_t;_t=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Tc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),$e(),Al=l,_t=a,xl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Hl,Hl=null,e;0!==(1&$l)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Bi()}(e,t,n,r)}finally{xl.transition=i,_t=r}return null}function Ic(){if(null!==Yl){var e=wt($l),t=xl.transition,n=_t;try{if(xl.transition=null,_t=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var _=e.current;for(Za=_;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=_;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Tc(l,l.return,S)}if(l===a){Za=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Za=b;break e}Za=l.return}}if(Al=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{_t=n,xl.transition=t}}return!1}function Ec(e,t,n){e=Ds(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Ds(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Je()-Bl?fc(e,0):jl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=As(e,t))&&(yt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Mc(n.children,i,o,t);case E:a=8,i|=8;break;case T:return(e=Rc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case A:return(e=Rc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Bc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Os(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Es(t,n),i=Eo(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Ks(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Os(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Ts(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Wa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Es(t,n),qs(t,r,i),Ks(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&Al)&&(ql=Je()+500,Bi()))}break;case 13:hc((function(){var t=As(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},St=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=As(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Et=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[_i,wi,bi,ke,Ce,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,m(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,I={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:I};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,O(S);else{var t=r(u);null!==t&&D(b,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,E=!1,T=null,k=-1,C=5,x=-1;function A(){return!(t.unstable_now()-x<C)}function N(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?I():(E=!1,T=null)}}else E=!1}if("function"===typeof _)I=function(){_(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,I=function(){R.postMessage(null)}}else I=function(){y(N,0)};function O(e){T=e,E||(E=!0,I())}function D(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,D(b,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},4634:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>dt,SDK_VERSION:()=>Tn,_DEFAULT_ENTRY_NAME:()=>fn,_addComponent:()=>yn,_addOrOverwriteComponent:()=>vn,_apps:()=>mn,_clearComponents:()=>Sn,_components:()=>gn,_getProvider:()=>wn,_registerComponent:()=>_n,_removeServiceInstance:()=>bn,deleteApp:()=>An,getApp:()=>Cn,getApps:()=>xn,initializeApp:()=>kn,onLog:()=>Pn,registerVersion:()=>Nn,setLogLevel:()=>Rn});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>Hl,hasStandardBrowserEnv:()=>Gl,hasStandardBrowserWebWorkerEnv:()=>Yl});var r,i=n(5043),s=n.t(i,2),o=n(7950),a=n.t(o,2),l=n(1334),c=n(971),u=n(6360);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const d="popstate";function f(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,r){return void 0===n&&(n=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function y(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function _(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l=r.Pop,c=null,u=p();function p(){return(a.state||{idx:null}).idx}function v(){l=r.Pop;let e=p(),t=null==e?null:e-u;u=e,c&&c({action:l,location:w.location,delta:t})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:y(e);return n=n.replace(/ $/,"%20"),f(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,a.replaceState(h({},a.state,{idx:u}),""));let w={get action(){return l},get location(){return e(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(d,v),c=e,()=>{s.removeEventListener(d,v),c=null}},createHref:e=>t(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=g(w.location,e,t);n&&n(i,e),u=p()+1;let h=m(i,u),d=w.createHref(i);try{a.pushState(h,"",d)}catch(pr){if(pr instanceof DOMException&&"DataCloneError"===pr.name)throw pr;s.location.assign(d)}o&&c&&c({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let i=g(w.location,e,t);n&&n(i,e),u=p();let s=m(i,u),h=w.createHref(i);a.replaceState(s,"",h),o&&c&&c({action:l,location:w.location,delta:0})},go:e=>a.go(e)};return w}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){void 0===n&&(n="/");let r=L(("string"===typeof t?v(t):t).pathname||"/",n);if(null==r)return null;let i=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=D(r);s=R(i[o],e)}return s}function S(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(f(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=V([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(f(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),S(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:P(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of I(e.path))i(e,t,r);else i(e,t)})),t}function I(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=I(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const E=/^:[\w-]+$/,T=3,k=2,C=1,x=10,A=-2,N=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(N)&&(r+=A),t&&(r+=k),n.filter((e=>!N(e))).reduce(((e,t)=>e+(E.test(t)?T:""===t?C:x)),r)}function R(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:V([i,c.pathname]),pathnameBase:z(V([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=V([i,c.pathnameBase]))}return s}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(pr){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+pr+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function M(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=F(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function j(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=v(e):(i=h({},e),f(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),f(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),f(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?v(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:q(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],H=(new Set(K),["get",...K]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const Q=i.createContext(null);const Y=i.createContext(null);const $=i.createContext(null);const J=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=i.createContext(null);function ee(){return null!=i.useContext(J)}function te(){return ee()||f(!1),i.useContext(J).location}function ne(e){i.useContext($).static||i.useLayoutEffect(e)}function re(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=ge(fe.UseNavigateStable),n=i.useRef(!1);ne((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},i)))}),[e,t]);return r}():function(){ee()||f(!1);let e=i.useContext(Q),{basename:t,future:n,navigator:r}=i.useContext($),{matches:s}=i.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return ne((()=>{l.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=j(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:V([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e])}()}function ie(){let{matches:e}=i.useContext(X),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext($),{matches:s}=i.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(s,r.v7_relativeSplatPath));return i.useMemo((()=>j(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function oe(e,t,n,s){ee()||f(!1);let{navigator:o}=i.useContext($),{matches:a}=i.useContext(X),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,d=te();if(t){var p;let e="string"===typeof t?v(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||f(!1),h=e}else h=d;let m=h.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:g});let _=he(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:V([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:V([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,s);return t&&_?i.createElement(J.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},_):_}function ae(){let e=function(){var e;let t=i.useContext(Z),n=me(fe.UseRouteError),r=ge(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const le=i.createElement(ae,null);class ce extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ue(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(Q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function he(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||f(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,s)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||le,c&&(u<0&&0===s?(p="route-fallback",!1||ye[p]||(ye[p]=!0),h=!0,f=null):u===s&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ue,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(ce,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function pe(e){let t=i.useContext(Q);return t||f(!1),t}function me(e){let t=i.useContext(Y);return t||f(!1),t}function ge(e){let t=function(e){let t=i.useContext(X);return t||f(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||f(!1),n.route.id}const ye={};s.startTransition;function ve(e){f(!1)}function _e(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:l=!1,future:c}=e;ee()&&f(!1);let u=t.replace(/^\/*/,"/"),h=i.useMemo((()=>({basename:u,navigator:a,static:l,future:G({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof s&&(s=v(s));let{pathname:d="/",search:p="",hash:m="",state:g=null,key:y="default"}=s,_=i.useMemo((()=>{let e=L(d,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:o}}),[u,d,p,m,g,y,o]);return null==_?null:i.createElement($.Provider,{value:h},i.createElement(J.Provider,{children:n,value:_}))}function we(e){let{children:t,location:n}=e;return oe(be(t),n)}new Promise((()=>{}));i.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,be(e.props.children,s));e.type!==ve&&f(!1),e.props.index&&e.props.children&&f(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,s)),n.push(o)})),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function Ie(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(AP){}new Map;const Te=s.startTransition;a.flushSync,s.useId;function ke(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),_((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return g("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:y(t)}),null,a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=i.useCallback((e=>{h&&Te?Te((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>l.listen(d)),[l,d]),i.createElement(_e,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,p=Ie(e,Ee),{basename:m}=i.useContext($),g=!1;if("string"===typeof u&&xe.test(u)&&(n=u,Ce))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=L(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(AP){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||f(!1);let{basename:r,navigator:s}=i.useContext($),{hash:o,pathname:a,search:l}=se(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:V([r,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),_=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),h=se(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:y(u)===y(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,r,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,unstable_viewTransition:d});return i.createElement("a",Se({},p,{href:n||v,onClick:g||o?r:function(e){r&&r(e),e.defaultPrevented||_(e)},ref:t,target:c}))}));var Ne,Pe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Pe||(Pe={}));function Re(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Oe=function e(t,n){function r(e,r,i){if("undefined"!==typeof document){"number"===typeof(i=Re({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var o in i)i[o]&&(s+="; "+o,!0!==i[o]&&(s+="="+i[o].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+s}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var s=n[i].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(r[a]=t.read(o,a),e===a)break}catch(AP){}}return e?r[e]:r}},remove:function(e,t){r(e,"",Re({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Re({},this.attributes,t))},withConverter:function(t){return e(Re({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const De=e=>null===e||void 0===e?void 0:e.reduce(((e,t)=>t.price+e),0),Le=(e,t)=>{const[n,r]=(0,i.useReducer)(e,t);return(0,i.useEffect)((()=>{try{const e=JSON.parse(Oe.get("userdata"));e&&r({type:"SET_DATA",payload:e})}catch(pr){console.log(pr)}}),[]),(0,i.useEffect)((()=>{Oe.set("userdata",JSON.stringify(n))}),[n]),[n,r]},Me=(e,t)=>{switch(t.type){case"addtobasket":return{...e,basket:[...e.basket,t.item]};case"removefrombasket":const n=e.basket.findIndex((e=>e.id===t.id));let r=[...e.basket];return n>=0?r.splice(n,1):console.warn("Can't remove product(id: ".concat(t.id,") as its not in the basket!")),{...e,basket:r};case"SET_DATA":return t.payload;default:return e}};var Fe=n(579);const Ue=(0,i.createContext)(),je=e=>{let{reducer:t,initialState:n,children:r}=e;return(0,Fe.jsx)(Ue.Provider,{value:Le(t,n),children:r})},Ve=()=>(0,i.useContext)(Ue),ze=!1,Be=!1,qe="${JSCORE_VERSION}",We=function(e,t){if(!e)throw Ke(t)},Ke=function(e){return new Error("Firebase Database ("+qe+") INTERNAL ASSERT FAILED: "+e)},He=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(He(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Qe;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Qe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ye=function(e){const t=He(e);return Ge.encodeByteArray(t,!0)},$e=function(e){return Ye(e).replace(/\./g,"")},Je=function(e){try{return Ge.decodeString(e,!0)}catch(AP){console.error("base64Decode failed: ",AP)}return null};function Xe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Xe(e[n],t[n]));return e}const Ze=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,et=()=>{try{return Ze()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/frontend-1",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDorP6sJFNNQrpIu_DLZjBj4PJJXNZ4ptk",REACT_APP_API_URL:"https://api.example.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(AP){return}const t=e&&Je(e[1]);return t&&JSON.parse(t)})()}catch(AP){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(AP))}},tt=()=>{var e;return null===(e=et())||void 0===e?void 0:e.config};class nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function rt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function it(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function st(){var e;const t=null===(e=et())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(AP){return!1}}function ot(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function at(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function lt(){const e=rt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ct(){return!0===ze||!0===Be}function ut(){return!st()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ht(){try{return"object"===typeof indexedDB}catch(AP){return!1}}class dt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}}class ft{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(pt,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new dt(n,s,t)}}const pt=/\{\$([^}]+)}/g;function mt(e){return JSON.parse(e)}function gt(e){return JSON.stringify(e)}const yt=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=mt(Je(s[0])||""),n=mt(Je(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(AP){}return{header:t,claims:n,data:r,signature:i}};function vt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _t(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function wt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function bt(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function St(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(It(n)&&It(s)){if(!St(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function It(e){return null!==e&&"object"===typeof e}function Et(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Tt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function kt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ct{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function xt(e,t){const n=new At(e,t);return n.subscribe.bind(n)}class At{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Nt),void 0===r.error&&(r.error=Nt),void 0===r.complete&&(r.complete=Nt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(AP){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(AP){"undefined"!==typeof console&&console.error&&console.error(AP)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Nt(){}function Pt(e,t){return"".concat(e," failed: ").concat(t," argument ")}const Rt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ot(e){return e&&e._delegate?e._delegate:e}class Dt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Lt="[DEFAULT]";class Mt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new nt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(AP){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(AP){if(r)return null;throw AP}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Lt})}catch(AP){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(AP){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Lt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;return this.component?this.component.multipleInstances?e:Lt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ft{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Mt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ut=[];var jt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jt||(jt={}));const Vt={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},zt=jt.INFO,Bt={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},qt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Bt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Wt{constructor(e){this.name=e,this._logLevel=zt,this._logHandler=qt,this._userLogHandler=null,Ut.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Vt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...t),this._logHandler(this,jt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...t),this._logHandler(this,jt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.INFO,...t),this._logHandler(this,jt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.WARN,...t),this._logHandler(this,jt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...t),this._logHandler(this,jt.ERROR,...t)}}const Kt=(e,t)=>t.some((t=>e instanceof t));let Ht,Gt;const Qt=new WeakMap,Yt=new WeakMap,$t=new WeakMap,Jt=new WeakMap,Xt=new WeakMap;let Zt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$t.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function en(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gt||(Gt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(rn(this),n),nn(Qt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nn(e.apply(rn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(rn(this),t,...r);return $t.set(s,t.sort?t.sort():[t]),nn(s)}}function tn(e){return"function"===typeof e?en(e):(e instanceof IDBTransaction&&function(e){if(Yt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Yt.set(e,t)}(e),Kt(e,Ht||(Ht=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Zt):e)}function nn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(nn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Qt.set(t,e)})).catch((()=>{})),Xt.set(t,e),t}(e);if(Jt.has(e))return Jt.get(e);const t=tn(e);return t!==e&&(Jt.set(e,t),Xt.set(t,e)),t}const rn=e=>Xt.get(e);const sn=["get","getKey","getAll","getAllKeys","count"],on=["put","add","delete","clear"],an=new Map;function ln(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(an.get(t))return an.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=on.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!sn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return an.set(t,s),s}Zt=(e=>({...e,get:(t,n,r)=>ln(t,n)||e.get(t,n,r),has:(t,n)=>!!ln(t,n)||e.has(t,n)}))(Zt);class cn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const un="@firebase/app",hn="0.9.29",dn=new Wt("@firebase/app"),fn="[DEFAULT]",pn={[un]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,gn=new Map;function yn(e,t){try{e.container.addComponent(t)}catch(AP){dn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),AP)}}function vn(e,t){e.container.addOrOverwriteComponent(t)}function _n(e){const t=e.name;if(gn.has(t))return dn.debug("There were multiple attempts to register component ".concat(t,".")),!1;gn.set(t,e);for(const n of mn.values())yn(n,e);return!0}function wn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function bn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fn;wn(e,t).clearInstance(n)}function Sn(){gn.clear()}const In=new ft("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class En{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Dt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}const Tn="10.9.0";function kn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:fn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw In.create("bad-app-name",{appName:String(i)});if(n||(n=tt()),!n)throw In.create("no-options");const s=mn.get(i);if(s){if(St(n,s.options)&&St(r,s.config))return s;throw In.create("duplicate-app",{appName:i})}const o=new Ft(i);for(const l of gn.values())o.addComponent(l);const a=new En(n,r,o);return mn.set(i,a),a}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn;const t=mn.get(e);if(!t&&e===fn&&tt())return kn();if(!t)throw In.create("no-app",{appName:e});return t}function xn(){return Array.from(mn.values())}async function An(e){const t=e.name;mn.has(t)&&(mn.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Nn(e,t,n){var r;let i=null!==(r=pn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void dn.warn(e.join(" "))}_n(new Dt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Pn(e,t){if(null!==e&&"function"!==typeof e)throw In.create("invalid-log-argument");!function(e,t){for(const n of Ut){let r=null;t&&t.level&&(r=Vt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:jt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Rn(e){var t;t=e,Ut.forEach((e=>{e.setLogLevel(t)}))}const On="firebase-heartbeat-database",Dn=1,Ln="firebase-heartbeat-store";let Mn=null;function Fn(){return Mn||(Mn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=nn(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(nn(o.result),e.oldVersion,e.newVersion,nn(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(On,Dn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ln)}catch(AP){console.warn(AP)}}}).catch((e=>{throw In.create("idb-open",{originalErrorMessage:e.message})}))),Mn}async function Un(e,t){try{const n=(await Fn()).transaction(Ln,"readwrite"),r=n.objectStore(Ln);await r.put(t,jn(e)),await n.done}catch(AP){if(AP instanceof dt)dn.warn(AP.message);else{const t=In.create("idb-set",{originalErrorMessage:null===AP||void 0===AP?void 0:AP.message});dn.warn(t.message)}}}function jn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Vn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=zn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),qn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=$e(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function zn(){return(new Date).toISOString().substring(0,10)}class Bn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ht()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(pr){t(pr)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Fn()).transaction(Ln),n=await t.objectStore(Ln).get(jn(e));return await t.done,n}catch(AP){if(AP instanceof dt)dn.warn(AP.message);else{const t=In.create("idb-get",{originalErrorMessage:null===AP||void 0===AP?void 0:AP.message});dn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qn(e){return $e(JSON.stringify({version:2,heartbeats:e})).length}var Wn;Wn="",_n(new Dt("platform-logger",(e=>new cn(e)),"PRIVATE")),_n(new Dt("heartbeat",(e=>new Vn(e)),"PRIVATE")),Nn(un,hn,Wn),Nn(un,hn,"esm2017"),Nn("fire-js","");class Kn{constructor(e,t){this._delegate=e,this.firebase=t,yn(e,new Dt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),An(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){yn(this._delegate,e)}_addOrOverwriteComponent(e){vn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Hn=new ft("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Gn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=kn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(vt(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Nn,setLogLevel:Rn,onLog:Pn,apps:null,SDK_VERSION:Tn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(_n(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Hn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Xe(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!vt(n,e=e||fn))throw Hn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Kn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Xe(n,e)},createSubscribe:xt,ErrorFactory:ft,deepExtend:Xe}),n}(),Qn=new Wt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Qn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Qn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Yn=Gn;!function(e){Nn("@firebase/app-compat","0.2.29",e)}();Yn.registerVersion("firebase","10.9.0","app-compat");const $n="@firebase/database",Jn="1.0.3";let Xn="";function Zn(e){Xn=e}class er{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),gt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:mt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class tr{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return vt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const nr=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new er(t)}}catch(AP){}return new tr},rr=nr("localStorage"),ir=nr("sessionStorage"),sr=new Wt("@firebase/database"),or=function(){let e=1;return function(){return e++}}(),ar=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,We(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ct;n.update(t);const r=n.digest();return Ge.encodeByteArray(r)},lr=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=lr.apply(null,n):e+="object"===typeof n?gt(n):n,e+=" "}return e};let cr=null,ur=!0;const hr=function(e,t){We(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(sr.logLevel=jt.VERBOSE,cr=sr.log.bind(sr),t&&ir.set("logging_enabled",!0)):"function"===typeof e?cr=e:(cr=null,ir.remove("logging_enabled"))},dr=function(){if(!0===ur&&(ur=!1,null===cr&&!0===ir.get("logging_enabled")&&hr(!0)),cr){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=lr.apply(null,t);cr(r)}},fr=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];dr(e,...n)}},pr=function(){const e="FIREBASE INTERNAL ERROR: "+lr(...arguments);sr.error(e)},mr=function(){const e="FIREBASE FATAL ERROR: ".concat(lr(...arguments));throw sr.error(e),new Error(e)},gr=function(){const e="FIREBASE WARNING: "+lr(...arguments);sr.warn(e)},yr=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},vr="[MIN_NAME]",_r="[MAX_NAME]",wr=function(e,t){if(e===t)return 0;if(e===vr||t===_r)return-1;if(t===vr||e===_r)return 1;{const n=xr(e),r=xr(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},br=function(e,t){return e===t?0:e<t?-1:1},Sr=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+gt(t))},Ir=function(e){if("object"!==typeof e||null===e)return gt(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=gt(t[r]),n+=":",n+=Ir(e[t[r]]);return n+="}",n},Er=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Tr(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const kr=function(e){We(!yr(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Cr=new RegExp("^-?(0*)\\d{1,10}$"),xr=function(e){if(Cr.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ar=function(e){try{e()}catch(AP){setTimeout((()=>{const t=AP.stack||"";throw gr("Exception was thrown by user callback.",t),AP}),Math.floor(0))}},Nr=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Pr{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){gr('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class Rr{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(dr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gr(e)}}class Or{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Or.OWNER="owner";const Dr="5",Lr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Mr="ac",Fr="websocket",Ur="long_polling";class jr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=rr.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&rr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function Vr(e,t,n){let r;if(We("string"===typeof t,"typeof type must == string"),We("object"===typeof n,"typeof params must == object"),t===Fr)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Ur)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Tr(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class zr{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;vt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Xe(void 0,this.counters_)}}const Br={},qr={};function Wr(e){const t=e.toString();return Br[t]||(Br[t]=new zr),Br[t]}class Kr{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Ar((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Hr="start";class Gr{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fr(e),this.stats_=Wr(t),this.urlFn=e=>(this.appCheckToken&&(e[Mr]=this.appCheckToken),Vr(t,Ur,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Kr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ct()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qr((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Hr)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Hr]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Dr,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Mr]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Lr.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gr.forceAllow_=!0}static forceDisallow(){Gr.forceDisallow_=!0}static isAvailable(){return!ct()&&(!!Gr.forceAllow_||!Gr.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=gt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ye(t),r=Er(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ct())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=gt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Qr{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ct())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=or(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Qr.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(AP){dr("frame writing exception"),AP.stack&&dr(AP.stack),dr(AP)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||dr("No IE domain setting required")}catch(AP){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){ct()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{dr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(AP){}}),Math.floor(1))}}let Yr=null;"undefined"!==typeof MozWebSocket?Yr=MozWebSocket:"undefined"!==typeof WebSocket&&(Yr=WebSocket);class $r{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fr(this.connId),this.stats_=Wr(t),this.connURL=$r.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Dr,!ct()&&"undefined"!==typeof location&&location.hostname&&Lr.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Mr]=r),i&&(s.p=i),Vr(e,Fr,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,rr.set("previous_websocket_failure",!0);try{let e;if(ct()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(Dr,"/").concat(Xn,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/frontend-1",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDorP6sJFNNQrpIu_DLZjBj4PJJXNZ4ptk",REACT_APP_API_URL:"https://api.example.com"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new Yr(this.connURL,[],e)}catch(AP){this.log_("Error instantiating WebSocket.");const t=AP.message||AP.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){$r.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Yr&&!$r.forceDisallow_}static previouslyFailed(){return rr.isInMemoryStorage||!0===rr.get("previous_websocket_failure")}markConnectionHealthy(){rr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=mt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(We(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=gt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Er(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(AP){this.log_("Exception thrown from WebSocket.send():",AP.message||AP.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}$r.responsesRequiredToBeHealthy=2,$r.healthyTimeout=3e4;class Jr{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Gr,$r]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=$r&&$r.isAvailable();let n=t&&!$r.previouslyFailed();if(e.webSocketOnly&&(t||gr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[$r];else{const e=this.transports_=[];for(const t of Jr.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Jr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Jr.globalTransportInitialized_=!1;class Xr{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fr("c:"+this.id+":"),this.transportManager_=new Jr(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Nr((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Sr("t",e),n=Sr("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Sr("t",e),n=Sr("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Sr("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?pr("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):pr("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Dr!==n&&gr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Nr((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nr((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(rr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Zr{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ei{constructor(e){this.allowedEvents_=e,this.listeners_={},We(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){We(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ti extends ei{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||it()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ti}getInitialEvent(e){return We("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const ni=32,ri=768;class ii{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function si(){return new ii("")}function oi(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ai(e){return e.pieces_.length-e.pieceNum_}function li(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ii(e.pieces_,t)}function ci(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ui(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function hi(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ii(t,0)}function di(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ii)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ii(n,0)}function fi(e){return e.pieceNum_>=e.pieces_.length}function pi(e,t){const n=oi(e),r=oi(t);if(null===n)return t;if(n===r)return pi(li(e),li(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function mi(e,t){if(ai(e)!==ai(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function gi(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ai(e)>ai(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class yi{constructor(e,t){this.errorPrefix_=t,this.parts_=ui(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Rt(this.parts_[n]);vi(this)}}function vi(e){if(e.byteLength_>ri)throw new Error(e.errorPrefix_+"has a key path longer than "+ri+" bytes ("+e.byteLength_+").");if(e.parts_.length>ni)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ni+") or object contains a cycle "+_i(e))}function _i(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class wi extends ei{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new wi}getInitialEvent(e){return We("visible"===e,"Unknown event type: "+e),[this.visible_]}}const bi=1e3;class Si extends Zr{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Si.nextPersistentConnectionId_++,this.log_=fr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ct())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wi.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ti.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(gt(i)),We(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new nt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),We(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),We(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Si.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&vt(e,"w")){const n=_t(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();gr("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=yt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=yt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),We(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+gt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):pr("Unrecognized action received from server: "+gt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){We(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bi,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=bi),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Si.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){We(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?dr("getToken() completed but was canceled"):(dr("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Xr(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{gr(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(pr){this.log_("Failed to get token: "+pr),s||(this.repoInfo_.nodeAdmin&&gr(pr),a())}}}interrupt(e){dr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],wt(this.interruptReasons_)&&(this.reconnectDelay_=bi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ir(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ii(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){dr("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){dr("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ct()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Xn.replace(/\./g,"-")]=1,it()?e["framework.cordova"]=1:at()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ti.getInstance().currentlyOnline();return wt(this.interruptReasons_)&&e}}Si.nextPersistentConnectionId_=0,Si.nextConnectionId_=0;class Ii{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ii(e,t)}}class Ei{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Ii(vr,e),r=new Ii(vr,t);return 0!==this.compare(n,r)}minPost(){return Ii.MIN}}let Ti;class ki extends Ei{static get __EMPTY_NODE(){return Ti}static set __EMPTY_NODE(e){Ti=e}compare(e,t){return wr(e.name,t.name)}isDefinedOn(e){throw Ke("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ii.MIN}maxPost(){return new Ii(_r,Ti)}makePost(e,t){return We("string"===typeof e,"KeyIndex indexValue must always be a string."),new Ii(e,Ti)}toString(){return".key"}}const Ci=new ki;class xi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ai{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ai.RED,this.left=null!=r?r:Ni.EMPTY_NODE,this.right=null!=i?i:Ni.EMPTY_NODE}copy(e,t,n,r,i){return new Ai(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ni.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ni.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ai.RED=!0,Ai.BLACK=!1;class Ni{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ni.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ni(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ai.BLACK,null,null))}remove(e){return new Ni(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ai.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xi(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xi(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xi(this.root_,null,this.comparator_,!0,e)}}function Pi(e,t){return wr(e.name,t.name)}function Ri(e,t){return wr(e,t)}let Oi;Ni.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ai(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Di=function(e){return"number"===typeof e?"number:"+kr(e):"string:"+e},Li=function(e){if(e.isLeafNode()){const t=e.val();We("string"===typeof t||"number"===typeof t||"object"===typeof t&&vt(t,".sv"),"Priority must be a string or number.")}else We(e===Oi||e.isEmpty(),"priority of unexpected type.");We(e===Oi||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Mi,Fi,Ui;class ji{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ji.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,We(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Li(this.priorityNode_)}static set __childrenNodeConstructor(e){Mi=e}static get __childrenNodeConstructor(){return Mi}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ji(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:ji.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return fi(e)?this:".priority"===oi(e)?this.priorityNode_:ji.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:ji.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=oi(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(We(".priority"!==n||1===ai(e),".priority must be the last token in a path"),this.updateImmediateChild(n,ji.__childrenNodeConstructor.EMPTY_NODE.updateChild(li(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Di(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?kr(this.value_):this.value_,this.lazyHash_=ar(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ji.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ji.__childrenNodeConstructor?-1:(We(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=ji.VALUE_TYPE_ORDER.indexOf(t),i=ji.VALUE_TYPE_ORDER.indexOf(n);return We(r>=0,"Unknown leaf type: "+t),We(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}ji.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Vi=new class extends Ei{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?wr(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ii.MIN}maxPost(){return new Ii(_r,new ji("[PRIORITY-POST]",Ui))}makePost(e,t){const n=Fi(e);return new Ii(t,new ji("[PRIORITY-POST]",n))}toString(){return".priority"}},zi=Math.log(2);class Bi{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/zi,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const qi=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Ai(a,o.node,Ai.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Ai(a,o.node,Ai.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Ai(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Ai.BLACK):(a(r,Ai.BLACK),a(r,Ai.RED))}return s}(new Bi(e.length));return new Ni(r||t,s)};let Wi;const Ki={};class Hi{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return We(Ki&&Vi,"ChildrenNode.ts has not been loaded"),Wi=Wi||new Hi({".priority":Ki},{".priority":Vi}),Wi}get(e){const t=_t(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ni?t:null}hasIndex(e){return vt(this.indexSet_,e.toString())}addIndex(e,t){We(e!==Ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Ii.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?qi(n,e.getCompare()):Ki;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new Hi(c,l)}addToIndexes(e,t){const n=bt(this.indexes_,((n,r)=>{const i=_t(this.indexSet_,r);if(We(i,"Missing index implementation for "+r),n===Ki){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Ii.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),qi(n,i.getCompare())}return Ki}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Ii(e.name,r))),i.insert(e,e.node)}}));return new Hi(n,this.indexSet_)}removeFromIndexes(e,t){const n=bt(this.indexes_,(n=>{if(n===Ki)return n;{const r=t.get(e.name);return r?n.remove(new Ii(e.name,r)):n}}));return new Hi(n,this.indexSet_)}}let Gi;class Qi{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Li(this.priorityNode_),this.children_.isEmpty()&&We(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gi||(Gi=new Qi(new Ni(Ri),null,Hi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gi}updatePriority(e){return this.children_.isEmpty()?this:new Qi(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Gi:t}}getChild(e){const t=oi(e);return null===t?this:this.getImmediateChild(t).getChild(li(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(We(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Ii(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Gi:this.priorityNode_;return new Qi(r,s,i)}}updateChild(e,t){const n=oi(e);if(null===n)return t;{We(".priority"!==oi(e)||1===ai(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(li(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Vi,((s,o)=>{t[s]=o.val(e),n++,i&&Qi.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Di(this.getPriority().val())+":"),this.forEachChild(Vi,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ar(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Ii(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ii(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ii(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Ii.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Ii.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yi?-1:0}withIndex(e){if(e===Ci||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Qi(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Ci||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Vi),n=t.getIterator(Vi);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Ci?null:this.indexMap_.get(e.toString())}}Qi.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Yi=new class extends Qi{constructor(){super(new Ni(Ri),Qi.EMPTY_NODE,Hi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qi.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Ii,{MIN:{value:new Ii(vr,Qi.EMPTY_NODE)},MAX:{value:new Ii(_r,Yi)}}),ki.__EMPTY_NODE=Qi.EMPTY_NODE,ji.__childrenNodeConstructor=Qi,Oi=Yi,function(e){Ui=e}(Yi);const $i=!0;function Ji(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Qi.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),We(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new ji(e,Ji(t))}if(e instanceof Array||!$i){let n=Qi.EMPTY_NODE;return Tr(e,((t,r)=>{if(vt(e,t)&&"."!==t.substring(0,1)){const e=Ji(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Ji(t))}{const n=[];let r=!1;if(Tr(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Ji(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Ii(e,i)))}})),0===n.length)return Qi.EMPTY_NODE;const i=qi(n,Pi,(e=>e.name),Ri);if(r){const e=qi(n,Vi.getCompare());return new Qi(i,Ji(t),new Hi({".priority":e},{".priority":Vi}))}return new Qi(i,Ji(t),Hi.Default)}}!function(e){Fi=e}(Ji);class Xi extends Ei{constructor(e){super(),this.indexPath_=e,We(!fi(e)&&".priority"!==oi(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?wr(e.name,t.name):i}makePost(e,t){const n=Ji(e),r=Qi.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ii(t,r)}maxPost(){const e=Qi.EMPTY_NODE.updateChild(this.indexPath_,Yi);return new Ii(_r,e)}toString(){return ui(this.indexPath_,0).join("/")}}const Zi=new class extends Ei{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?wr(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ii.MIN}maxPost(){return Ii.MAX}makePost(e,t){const n=Ji(e);return new Ii(t,n)}toString(){return".value"}};function es(e){return{type:"value",snapshotNode:e}}function ts(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ns(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function rs(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class is{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return We(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return We(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vr}hasEnd(){return this.endSet_}getIndexEndValue(){return We(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return We(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_r}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return We(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vi}copy(){const e=new is;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ss(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Vi?n="$priority":e.index_===Zi?n="$value":e.index_===Ci?n="$key":(We(e.index_ instanceof Xi,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=gt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=gt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+gt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=gt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+gt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function os(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Vi&&(t.i=e.index_.toString()),t}class as extends Zr{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=fr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(We(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=as.getListenId_(e,n),o={};this.listens_[s]=o;const a=ss(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),_t(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=as.getListenId_(e,t);delete this.listens_[n]}get(e){const t=ss(e._queryParams),n=e._path.toString(),r=new nt;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Et(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=mt(a.responseText)}catch(AP){gr("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&gr("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class ls{constructor(){this.rootNode_=Qi.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function cs(){return{value:null,children:new Map}}function us(e,t,n){if(fi(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=oi(t);e.children.has(r)||e.children.set(r,cs());us(e.children.get(r),t=li(t),n)}}function hs(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{hs(r,new ii(t.toString()+"/"+e),n)}))}class ds{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Tr(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class fs{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ds(e);const n=1e4+2e4*Math.random();Nr(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Tr(e,((e,r)=>{r>0&&vt(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Nr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ps;function ms(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ps||(ps={}));class gs{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ps.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(fi(this.path)){if(null!=this.affectedTree.value)return We(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ii(e));return new gs(si(),t,this.revert)}}return We(oi(this.path)===e,"operationForChild called for unrelated child."),new gs(li(this.path),this.affectedTree,this.revert)}}class ys{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ps.OVERWRITE}operationForChild(e){return fi(this.path)?new ys(this.source,si(),this.snap.getImmediateChild(e)):new ys(this.source,li(this.path),this.snap)}}class vs{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ps.MERGE}operationForChild(e){if(fi(this.path)){const t=this.children.subtree(new ii(e));return t.isEmpty()?null:t.value?new ys(this.source,si(),t.value):new vs(this.source,si(),t)}return We(oi(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vs(this.source,li(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _s{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(fi(e))return this.isFullyInitialized()&&!this.filtered_;const t=oi(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function ws(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Ke("Should only compare child_ events.");const r=new Ii(t.childName,t.snapshotNode),i=new Ii(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function bs(e,t){return{eventCache:e,serverCache:t}}function Ss(e,t,n,r){return bs(new _s(t,n,r),e.serverCache)}function Is(e,t,n,r){return bs(e.eventCache,new _s(t,n,r))}function Es(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ts(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let ks;class Cs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(ks||(ks=new Ni(br)),ks);this.value=e,this.children=t}static fromObject(e){let t=new Cs(null);return Tr(e,((e,n)=>{t=t.set(new ii(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:si(),value:this.value};if(fi(e))return null;{const n=oi(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(li(e),t);if(null!=i){return{path:di(new ii(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(fi(e))return this;{const t=oi(e),n=this.children.get(t);return null!==n?n.subtree(li(e)):new Cs(null)}}set(e,t){if(fi(e))return new Cs(t,this.children);{const n=oi(e),r=(this.children.get(n)||new Cs(null)).set(li(e),t),i=this.children.insert(n,r);return new Cs(this.value,i)}}remove(e){if(fi(e))return this.children.isEmpty()?new Cs(null):new Cs(null,this.children);{const t=oi(e),n=this.children.get(t);if(n){const r=n.remove(li(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Cs(null):new Cs(this.value,i)}return this}}get(e){if(fi(e))return this.value;{const t=oi(e),n=this.children.get(t);return n?n.get(li(e)):null}}setTree(e,t){if(fi(e))return t;{const n=oi(e),r=(this.children.get(n)||new Cs(null)).setTree(li(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Cs(this.value,i)}}fold(e){return this.fold_(si(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(di(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,si(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(fi(e))return null;{const r=oi(e),i=this.children.get(r);return i?i.findOnPath_(li(e),di(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,si(),t)}foreachOnPath_(e,t,n){if(fi(e))return this;{this.value&&n(t,this.value);const r=oi(e),i=this.children.get(r);return i?i.foreachOnPath_(li(e),di(t,r),n):new Cs(null)}}foreach(e){this.foreach_(si(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(di(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class xs{constructor(e){this.writeTree_=e}static empty(){return new xs(new Cs(null))}}function As(e,t,n){if(fi(t))return new xs(new Cs(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=pi(i,t);return s=s.updateChild(o,n),new xs(e.writeTree_.set(i,s))}{const r=new Cs(n),i=e.writeTree_.setTree(t,r);return new xs(i)}}}function Ns(e,t,n){let r=e;return Tr(n,((e,n)=>{r=As(r,di(t,e),n)})),r}function Ps(e,t){if(fi(t))return xs.empty();{const n=e.writeTree_.setTree(t,new Cs(null));return new xs(n)}}function Rs(e,t){return null!=Os(e,t)}function Os(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(pi(n.path,t)):null}function Ds(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Vi,((e,n)=>{t.push(new Ii(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Ii(e,n.value))})),t}function Ls(e,t){if(fi(t))return e;{const n=Os(e,t);return new xs(null!=n?new Cs(n):e.writeTree_.subtree(t))}}function Ms(e){return e.writeTree_.isEmpty()}function Fs(e,t){return Us(si(),e.writeTree_,t)}function Us(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(We(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Us(di(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(di(e,".priority"),r)),n}}function js(e,t){return Xs(t,e)}function Vs(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));We(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&zs(t,r.path)?i=!1:gi(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=qs(e.allWrites,Bs,si()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Ps(e.visibleWrites,r.path);else{Tr(r.children,(t=>{e.visibleWrites=Ps(e.visibleWrites,di(r.path,t))}))}return!0}return!1}function zs(e,t){if(e.snap)return gi(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&gi(di(e.path,n),t))return!0;return!1}function Bs(e){return e.visible}function qs(e,t,n){let r=xs.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)gi(n,e)?(t=pi(n,e),r=As(r,t,s.snap)):gi(e,n)&&(t=pi(e,n),r=As(r,si(),s.snap.getChild(t)));else{if(!s.children)throw Ke("WriteRecord should have .snap or .children");if(gi(n,e))t=pi(n,e),r=Ns(r,t,s.children);else if(gi(e,n))if(t=pi(e,n),fi(t))r=Ns(r,si(),s.children);else{const e=_t(s.children,oi(t));if(e){const n=e.getChild(li(t));r=As(r,si(),n)}}}}}return r}function Ws(e,t,n,r,i){if(r||i){const s=Ls(e.visibleWrites,t);if(!i&&Ms(s))return n;if(i||null!=n||Rs(s,si())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(gi(e.path,t)||gi(t,e.path))};return Fs(qs(e.allWrites,s,t),n||Qi.EMPTY_NODE)}return null}{const r=Os(e.visibleWrites,t);if(null!=r)return r;{const r=Ls(e.visibleWrites,t);if(Ms(r))return n;if(null!=n||Rs(r,si())){return Fs(r,n||Qi.EMPTY_NODE)}return null}}}function Ks(e,t,n,r){return Ws(e.writeTree,e.treePath,t,n,r)}function Hs(e,t){return function(e,t,n){let r=Qi.EMPTY_NODE;const i=Os(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Vi,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Ls(e.visibleWrites,t);return n.forEachChild(Vi,((e,t)=>{const n=Fs(Ls(i,new ii(e)),t);r=r.updateImmediateChild(e,n)})),Ds(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Ds(Ls(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Gs(e,t,n,r){return function(e,t,n,r,i){We(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=di(t,n);if(Rs(e.visibleWrites,s))return null;{const t=Ls(e.visibleWrites,s);return Ms(t)?i.getChild(n):Fs(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Qs(e,t){return function(e,t){return Os(e.visibleWrites,t)}(e.writeTree,di(e.treePath,t))}function Ys(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Ls(e.visibleWrites,t),c=Os(l,si());if(null!=c)a=c;else{if(null==n)return[];a=Fs(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function $s(e,t,n){return function(e,t,n,r){const i=di(t,n),s=Os(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Fs(Ls(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Js(e,t){return Xs(di(e.treePath,t),e.writeTree)}function Xs(e,t){return{treePath:e,writeTree:t}}class Zs{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;We("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),We(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,rs(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ns(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ts(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ke("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,rs(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const eo=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class to{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new _s(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $s(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ts(this.viewCache_),i=Ys(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function no(e,t,n,r,i){const s=new Zs;let o,a;if(n.type===ps.OVERWRITE){const l=n;l.source.fromUser?o=so(e,t,l.path,l.snap,r,i,s):(We(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!fi(l.path),o=io(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===ps.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=di(n,r);oo(t,oi(c))&&(a=so(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=di(n,r);oo(t,oi(c))||(a=so(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(We(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=lo(e,t,l.path,l.children,r,i,a,s))}else if(n.type===ps.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=Qs(r,n))return t;{const a=new to(r,t,i),l=t.eventCache.getNode();let c;if(fi(n)||".priority"===oi(n)){let n;if(t.serverCache.isFullyInitialized())n=Ks(r,Ts(t));else{const e=t.serverCache.getNode();We(e instanceof Qi,"serverChildren would be complete if leaf node"),n=Hs(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=oi(n);let u=$s(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,li(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Qi.EMPTY_NODE,li(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Ks(r,Ts(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Qs(r,si()),Ss(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Qs(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(fi(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return io(e,t,n,l.getNode().getChild(n),i,s,a,o);if(fi(n)){let r=new Cs(null);return l.getNode().forEachChild(Ci,((e,t)=>{r=r.set(new ii(e),t)})),lo(e,t,n,r,i,s,a,o)}return t}{let c=new Cs(null);return r.foreach(((e,t)=>{const r=di(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),lo(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==ps.LISTEN_COMPLETE)throw Ke("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Is(t,s.getNode(),s.isFullyInitialized()||fi(n),s.isFiltered());return ro(e,o,n,r,eo,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Es(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(es(Es(t)))}}(t,o,l),{viewCache:o,changes:l}}function ro(e,t,n,r,i,s){const o=t.eventCache;if(null!=Qs(r,n))return t;{let a,l;if(fi(n))if(We(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ts(t),i=Hs(r,n instanceof Qi?n:Qi.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Ks(r,Ts(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=oi(n);if(".priority"===c){We(1===ai(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=Gs(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=li(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Gs(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=$s(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return Ss(t,a,o.isFullyInitialized()||fi(n),e.filter.filtersNodes())}}function io(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(fi(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=oi(n);if(!l.isCompleteForPath(n)&&ai(n)>1)return t;const i=li(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,eo,null)}const h=Is(t,c,l.isFullyInitialized()||fi(n),u.filtersNodes());return ro(e,h,n,i,new to(i,h,s),a)}function so(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new to(i,t,s);if(fi(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Ss(t,c,!0,e.filter.filtersNodes());else{const i=oi(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Ss(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=li(n),c=a.getNode().getImmediateChild(i);let h;if(fi(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===ci(s)&&e.getChild(hi(s)).isEmpty()?e:e.updateChild(s,r):Qi.EMPTY_NODE}if(c.equals(h))l=t;else{l=Ss(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function oo(e,t){return e.eventCache.isCompleteForChild(t)}function ao(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function lo(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=fi(n)?r:new Cs(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=ao(0,t.serverCache.getNode().getImmediateChild(n),r);c=io(e,c,new ii(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=ao(0,t.serverCache.getNode().getImmediateChild(n),r);c=io(e,c,new ii(n),l,i,s,o,a)}})),c}function co(e,t){const n=Ts(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!fi(t)&&!n.getImmediateChild(oi(t)).isEmpty())?n.getChild(t):null}function uo(e,t,n,r){t.type===ps.MERGE&&null!==t.source.queryId&&(We(Ts(e.viewCache_),"We should always have a full cache before handling merges"),We(Es(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=no(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,We(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),We(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),We(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,ho(e,s.changes,s.viewCache.eventCache.getNode(),null)}function ho(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),ws(e,i,"child_removed",t,r,n),ws(e,i,"child_added",t,r,n),ws(e,i,"child_moved",s,r,n),ws(e,i,"child_changed",t,r,n),ws(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let fo,po;function mo(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return We(null!=s,"SyncTree gave us an op for an invalid query."),uo(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(uo(s,t,n,r));return i}}function go(e,t){let n=null;for(const r of e.views.values())n=n||co(r,t);return n}class yo{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Cs(null),this.pendingWriteTree_={visibleWrites:xs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vo(e,t,n,r,i){return function(e,t,n,r,i){We(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=As(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Io(e,new ys({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function _o(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Vs(e.pendingWriteTree_,t)){let t=new Cs(null);return null!=r.snap?t=t.set(si(),!0):Tr(r.children,(e=>{t=t.set(new ii(e),!0)})),Io(e,new gs(r.path,t,n))}return[]}function wo(e,t,n){return Io(e,new ys({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function bo(e,t,n,r){const i=ko(e,r);if(null!=i){const r=Co(i),s=r.path,o=r.queryId,a=pi(s,t);return xo(e,s,new ys(ms(o),a,n))}return[]}function So(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=go(n,pi(e,t));if(r)return r}));return Ws(r,t,i,n,!0)}function Io(e,t){return Eo(t,e.syncPointTree_,null,js(e.pendingWriteTree_,si()))}function Eo(e,t,n,r){if(fi(e.path))return To(e,t,n,r);{const i=t.get(si());null==n&&null!=i&&(n=go(i,si()));let s=[];const o=oi(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Js(r,o);s=s.concat(Eo(a,l,e,t))}return i&&(s=s.concat(mo(i,e,r,n))),s}}function To(e,t,n,r){const i=t.get(si());null==n&&null!=i&&(n=go(i,si()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Js(r,t),l=e.operationForChild(t);l&&(s=s.concat(To(l,i,o,a)))})),i&&(s=s.concat(mo(i,e,r,n))),s}function ko(e,t){return e.tagToQueryMap.get(t)}function Co(e){const t=e.indexOf("$");return We(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ii(e.substr(0,t))}}function xo(e,t,n){const r=e.syncPointTree_.get(t);We(r,"Missing sync point for query tag that we're tracking");return mo(r,n,js(e.pendingWriteTree_,t),null)}class Ao{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ao(t)}node(){return this.node_}}class No{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=di(this.path_,e);return new No(this.syncTree_,t)}node(){return So(this.syncTree_,this.path_)}}const Po=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Ro=function(e,t,n){return e&&"object"===typeof e?(We(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Oo(e[".sv"],t,n):"object"===typeof e[".sv"]?Do(e[".sv"],t):void We(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Oo=function(e,t,n){if("timestamp"===e)return n.timestamp;We(!1,"Unexpected server value: "+e)},Do=function(e,t,n){e.hasOwnProperty("increment")||We(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&We(!1,"Unexpected increment value: "+r);const i=t.node();if(We(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},Lo=function(e,t,n,r){return Fo(t,new No(n,e),r)},Mo=function(e,t,n){return Fo(e,new Ao(t),n)};function Fo(e,t,n){const r=e.getPriority().val(),i=Ro(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=Ro(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new ji(s,Ji(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new ji(i))),r.forEachChild(Vi,((e,r)=>{const i=Fo(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class Uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function jo(e,t){let n=t instanceof ii?t:new ii(t),r=e,i=oi(n);for(;null!==i;){const e=_t(r.node.children,i)||{children:{},childCount:0};r=new Uo(i,r,e),n=li(n),i=oi(n)}return r}function Vo(e){return e.node.value}function zo(e,t){e.node.value=t,Ho(e)}function Bo(e){return e.node.childCount>0}function qo(e,t){Tr(e.node.children,((n,r)=>{t(new Uo(n,e,r))}))}function Wo(e,t,n,r){n&&!r&&t(e),qo(e,(e=>{Wo(e,t,!0,r)})),n&&r&&t(e)}function Ko(e){return new ii(null===e.parent?e.name:Ko(e.parent)+"/"+e.name)}function Ho(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Vo(e)&&!Bo(e)}(n),i=vt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Ho(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Ho(e))}(e.parent,e.name,e)}const Go=/[\[\].#$\/\u0000-\u001F\u007F]/,Qo=/[\[\].#$\u0000-\u001F\u007F]/,Yo=10485760,$o=function(e){return"string"===typeof e&&0!==e.length&&!Go.test(e)},Jo=function(e){return"string"===typeof e&&0!==e.length&&!Qo.test(e)},Xo=function(e,t,n){const r=n instanceof ii?new yi(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+_i(r));if("function"===typeof t)throw new Error(e+"contains a function "+_i(r)+" with contents = "+t.toString());if(yr(t))throw new Error(e+"contains "+t.toString()+" "+_i(r));if("string"===typeof t&&t.length>Yo/3&&Rt(t)>Yo)throw new Error(e+"contains a string greater than "+Yo+" utf8 bytes "+_i(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Tr(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!$o(t)))throw new Error(e+" contains an invalid key ("+t+") "+_i(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Rt(t),vi(e)}(r,t),Xo(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Rt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+_i(r)+" in addition to actual children.")}},Zo=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!$o(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Jo(e)}(n))throw new Error(Pt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ea{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ta(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||mi(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function na(e,t,n){ta(e,n),ra(e,(e=>gi(e,t)||gi(t,e)))}function ra(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(ia(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ia(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();cr&&dr("event: "+n.toString()),Ar(r)}}}const sa="repo_interrupt",oa=25;class aa{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ea,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cs(),this.transactionQueueTree_=new Uo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function la(e,t,n){if(e.stats_=Wr(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new as(e.repoInfo_,((t,n,r,i)=>{ha(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>da(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gt(n)}catch(AP){throw new Error("Invalid authOverride provided: "+AP)}}e.persistentConnection_=new Si(e.repoInfo_,t,((t,n,r,i)=>{ha(e,t,n,r,i)}),(t=>{da(e,t)}),(t=>{!function(e,t){Tr(t,((t,n)=>{fa(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return qr[n]||(qr[n]=t()),qr[n]}(e.repoInfo_,(()=>new fs(e.stats_,e.server_))),e.infoData_=new ls,e.infoSyncTree_=new yo({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=wo(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),fa(e,"connected",!1),e.serverSyncTree_=new yo({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);na(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function ca(e){const t=e.infoData_.getNode(new ii(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ua(e){return Po({timestamp:ca(e)})}function ha(e,t,n,r,i){e.dataUpdateCount++;const s=new ii(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=bt(n,(e=>Ji(e)));o=function(e,t,n,r){const i=ko(e,r);if(i){const r=Co(i),s=r.path,o=r.queryId,a=pi(s,t),l=Cs.fromObject(n);return xo(e,s,new vs(ms(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Ji(n);o=bo(e.serverSyncTree_,s,t,i)}else if(r){const t=bt(n,(e=>Ji(e)));o=function(e,t,n){const r=Cs.fromObject(n);return Io(e,new vs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Ji(n);o=wo(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=_a(e,s)),na(e.eventQueue_,a,o)}function da(e,t){fa(e,"connected",t),!1===t&&function(e){ga(e,"onDisconnectEvents");const t=ua(e),n=cs();hs(e.onDisconnect_,si(),((r,i)=>{const s=Lo(r,i,e.serverSyncTree_,t);us(n,r,s)}));let r=[];hs(n,si(),((t,n)=>{r=r.concat(wo(e.serverSyncTree_,t,n));const i=Ea(e,t);_a(e,i)})),e.onDisconnect_=cs(),na(e.eventQueue_,si(),r)}(e)}function fa(e,t,n){const r=new ii("/.info/"+t),i=Ji(n);e.infoData_.updateSnapshot(r,i);const s=wo(e.infoSyncTree_,r,i);na(e.eventQueue_,r,s)}function pa(e){return e.nextWriteId_++}function ma(e){e.persistentConnection_&&e.persistentConnection_.interrupt(sa)}function ga(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];dr(t,...r)}function ya(e,t,n){return So(e.serverSyncTree_,t,n)||Qi.EMPTY_NODE}function va(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Ia(e,t),Vo(t)){const n=ba(e,t);We(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=ya(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];We(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=pi(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{ga(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(_o(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();Ia(e,jo(e.transactionQueueTree_,t)),va(e,e.transactionQueueTree_),na(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Ar(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{gr("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}_a(e,t)}}),o)}(e,Ko(t),n)}else Bo(t)&&qo(t,(t=>{va(e,t)}))}function _a(e,t){const n=wa(e,t),r=Ko(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=pi(n,s.path);let u,h=!1;if(We(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(_o(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=oa)h=!0,u="maxretry",i=i.concat(_o(e.serverSyncTree_,s.currentWriteId,!0));else{const n=ya(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){Xo("transaction failed: Data returned ",r,s.path);let t=Ji(r);"object"===typeof r&&null!=r&&vt(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=ua(e),c=Mo(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=pa(e),o.splice(o.indexOf(a),1),i=i.concat(vo(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(_o(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(_o(e.serverSyncTree_,s.currentWriteId,!0))}na(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;Ia(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Ar(r[l]);va(e,e.transactionQueueTree_)}(e,ba(e,n),r),r}function wa(e,t){let n,r=e.transactionQueueTree_;for(n=oi(t);null!==n&&void 0===Vo(r);)r=jo(r,n),n=oi(t=li(t));return r}function ba(e,t){const n=[];return Sa(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function Sa(e,t,n){const r=Vo(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);qo(t,(t=>{Sa(e,t,n)}))}function Ia(e,t){const n=Vo(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,zo(t,n.length>0?n:void 0)}qo(t,(t=>{Ia(e,t)}))}function Ea(e,t){const n=Ko(wa(e,t)),r=jo(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Ta(e,t)})),Ta(e,r),Wo(r,(t=>{Ta(e,t)})),n}function Ta(e,t){const n=Vo(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(We(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(We(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(_o(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?zo(t,void 0):n.length=s+1,na(e.eventQueue_,Ko(t),i);for(let e=0;e<r.length;e++)Ar(r[e])}}const ka=function(e,t){const n=Ca(e),r=n.namespace;"firebase.com"===n.domain&&mr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||mr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new jr(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ii(n.pathString)}},Ca=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(AP){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gr("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},xa="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class Aa{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return fi(this._path)?null:ci(this._path)}get ref(){return new Na(this._repo,this._path)}get _queryIdentifier(){const e=os(this._queryParams),t=Ir(e);return"{}"===t?"default":t}get _queryObject(){return os(this._queryParams)}isEqual(e){if(!((e=Ot(e))instanceof Aa))return!1;const t=this._repo===e._repo,n=mi(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Na extends Aa{constructor(e,t){super(e,t,new is,!1)}get parent(){const e=hi(this._path);return null===e?null:new Na(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){We(!fo,"__referenceConstructor has already been defined"),fo=e}(Na),function(e){We(!po,"__referenceConstructor has already been defined"),po=e}(Na);const Pa="FIREBASE_DATABASE_EMULATOR_HOST",Ra={};let Oa=!1;function Da(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||mr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dr("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=ka(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/frontend-1",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyDorP6sJFNNQrpIu_DLZjBj4PJJXNZ4ptk",REACT_APP_API_URL:"https://api.example.com"}[Pa]),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=ka(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new Or(Or.OWNER):new Rr(e.name,e.options,t);Zo("Invalid Firebase Database URL",l),fi(l.path)||mr("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=Ra[t.name];i||(i={},Ra[t.name]=i);let s=i[e.toURLString()];s&&mr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new aa(e,Oa,n,r),i[e.toURLString()]=s,s}(c,e,u,new Pr(e.name,n));return new La(h,e)}class La{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(la(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Na(this._repo,si())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Ra[t];n&&n[e.key]===e||mr("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),ma(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&mr("Cannot call "+e+" on a deleted database.")}}Si.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Si.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Zn(Tn),_n(new Dt("database",((e,t)=>{let{instanceIdentifier:n}=t;return Da(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Nn($n,Jn,e),Nn($n,Jn,"esm2017")}();const Ma=function(){const[{basket:e},t]=Ve(),[n,r]=(0,i.useState)(!1),[s,o]=(0,i.useState)("Guest");return(0,i.useEffect)((()=>{Yn.auth().onAuthStateChanged((async function(e){e?(console.log("User object:",e),r(!0)):(r(!1),o("Guest"))}))}),[]),(0,Fe.jsxs)("div",{className:"header",children:[(0,Fe.jsx)(Ae,{to:"/frontend-1",style:{textDecoration:"none"},children:(0,Fe.jsxs)("div",{className:"header_logo",children:[(0,Fe.jsx)(c.A,{className:"header_logoImage",fontSize:"large"}),(0,Fe.jsx)("h2",{className:"header_logoTitle",children:"ZAAK"})]})}),(0,Fe.jsxs)("div",{className:"header_search",children:[(0,Fe.jsx)("input",{type:"text",className:"header_searchInput"}),(0,Fe.jsx)(u.A,{className:"header_searchIcon"})]}),(0,Fe.jsxs)("div",{className:"header_nav",children:[(0,Fe.jsxs)("div",{className:"nav_item",children:[(0,Fe.jsxs)("span",{className:"nav_itemLineone",children:["Hello ",s]}),(0,Fe.jsx)(Ae,{to:"/login",style:{textDecoration:"none"},children:!n&&(0,Fe.jsx)("span",{className:"nav_itemLinetwo",children:"Sign In"})}),n&&(0,Fe.jsx)("span",{className:"nav_itemLinetwo",onClick:async()=>{try{await Yn.auth().signOut(),r(!1),window.location.reload()}catch(pr){console.log("error in signing out",pr)}},children:"Sign Out"})]}),(0,Fe.jsx)(Ae,{to:"/frontend-1/checkout",style:{textDecoration:"none"},children:(0,Fe.jsxs)("div",{className:"nav_itemBasket",children:[(0,Fe.jsx)(l.A,{}),(0,Fe.jsx)("span",{className:"nav_itemLinetwo nav_basketCount",children:e.length})]})})]})]})};const Fa=function(e){let{nameOf:t,image:n}=e;return(0,Fe.jsxs)("div",{className:"typeOf",children:[(0,Fe.jsx)("img",{src:n,alt:""}),(0,Fe.jsx)("strong",{children:t})]})};const Ua=function(){return(0,Fe.jsx)("div",{children:(0,Fe.jsx)("div",{className:"home",children:(0,Fe.jsxs)("div",{className:"home_container",children:[(0,Fe.jsx)("img",{src:"https://png.pngtree.com/thumb_back/fh260/background/20230617/pngtree-visualizing-e-commerce-in-sierra-leone-a-3d-rendering-for-online-image_3637566.jpg",alt:"",className:"home_Image"}),(0,Fe.jsxs)("div",{className:"home_row",children:[(0,Fe.jsx)(Ae,{to:"/frontend-1/watches",className:"link-tag",style:{textDecoration:"none",flex:1},children:(0,Fe.jsx)(Fa,{nameOf:"WATCHES",image:"https://img.tatacliq.com/images/i12/658Wx734H/MP000000018772101_658Wx734H_202308161557593.jpeg"})}),(0,Fe.jsx)(Ae,{to:"/frontend-1/footwear",className:"link-tag",style:{textDecoration:"none",flex:1},children:(0,Fe.jsx)(Fa,{nameOf:"FOOTWEAR",image:"https://img.tatacliq.com/images/i6/658Wx734H/MP000000006404559_658Wx734H_20200129073605.jpeg"})})]}),(0,Fe.jsxs)("div",{className:"home_row",children:[(0,Fe.jsx)(Ae,{to:"/frontend-1/jwells",className:"link-tag",style:{textDecoration:"none",flex:1},children:(0,Fe.jsx)(Fa,{nameOf:"JWELLS",image:"https://img.tatacliq.com/images/i9/658Wx734H/MP000000016431668_658Wx734H_202302080130041.jpeg"})}),(0,Fe.jsx)(Ae,{to:"/frontend-1/eyewear",className:"link-tag",style:{textDecoration:"none",flex:1},children:(0,Fe.jsx)(Fa,{nameOf:"EYEWEAR",image:"https://img.tatacliq.com/images/i10/658Wx734H/MP000000014109370_658Wx734H_202302231203092.jpeg"})}),(0,Fe.jsx)(Ae,{to:"/frontend-1/perfumes",className:"link-tag",style:{textDecoration:"none",flex:1},children:(0,Fe.jsx)(Fa,{nameOf:"PERFUMES",image:"https://img.tatacliq.com/images/i16//658Wx734H/MP000000020936300_658Wx734H_202401262013143.jpeg"})})]}),(0,Fe.jsx)("div",{className:"home_row",children:(0,Fe.jsx)(Ae,{to:"/frontend-1/clothing",className:"link-tag",style:{textDecoration:"none",flex:1},children:(0,Fe.jsx)(Fa,{nameOf:"CLOTHING",image:"https://m.media-amazon.com/images/I/813Jh2ElZhL._AC_UY1100_.jpg"})})})]})})})};var ja=n(3282);const Va=function(e){let{id:t,image:n,title:r,price:i,rating:s}=e;const[{basket:o},a]=Ve();return(0,Fe.jsxs)("div",{className:"checkoutProduct",children:[(0,Fe.jsx)("img",{src:n,alt:"",className:"checkoutProduct__image"}),(0,Fe.jsxs)("div",{className:"checkoutProduct__info",children:[(0,Fe.jsx)("p",{className:"checkoutProduct__title",children:r}),(0,Fe.jsxs)("p",{className:"checkoutProduct__price",children:[(0,Fe.jsx)("small",{children:"$"}),(0,Fe.jsx)("strong",{children:i})]}),(0,Fe.jsx)("div",{className:"checkoutProduct__rating",children:Array(s).fill().map(((e,t)=>(0,Fe.jsx)("p",{children:"\u2b50"})))}),(0,Fe.jsxs)("button",{onClick:()=>{a({type:"removefrombasket",id:t})},children:["Remove from Basket",(0,Fe.jsx)(ja.A,{})]})]})]})};var za=n(6990),Ba=n.n(za);const qa=function(){const[{basket:e},t]=Ve();return(0,Fe.jsxs)("div",{className:"subtotal",children:[(0,Fe.jsx)(Ba(),{renderText:t=>(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsxs)("p",{children:["Subtotal (",e.length," items): ",(0,Fe.jsxs)("strong",{children:["$",t]})]}),(0,Fe.jsxs)("small",{className:"subtotal__gift",children:[(0,Fe.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]}),decimalScale:2,value:De(e),displayType:"text",thousandSeparator:!0}),(0,Fe.jsx)("button",{children:"Proceed to Checkout"})]})};const Wa=function(){const[{basket:e},t]=Ve();return(0,Fe.jsx)("div",{className:"checkout",children:(0,Fe.jsxs)("div",{className:"checkout",children:[(0,Fe.jsxs)("div",{className:"checkout__left",children:[(0,Fe.jsx)("img",{src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:"",className:"checkout__ad"}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("h2",{className:"checkout__title",children:"Your Shopping Basket"}),e.map(((e,t)=>(0,Fe.jsx)(Va,{id:e.id,image:e.image,title:e.title,price:e.price,rating:e.rating},t)))]})]}),(0,Fe.jsx)("div",{className:"checkout__right",children:(0,Fe.jsx)(qa,{})})]})})};var Ka=n(9007);const Ha=function(e){let{id:t,title:n,image:r,price:i,rating:s}=e;const[o,a]=Ve(),l=re(),{products:c}=ie();return(0,Fe.jsx)("div",{className:"prod_container",children:(0,Fe.jsxs)("div",{className:"product",children:[(0,Fe.jsxs)("div",{className:"product_info",children:[(0,Fe.jsx)("p",{children:n}),(0,Fe.jsxs)("p",{className:"product_price",children:[(0,Fe.jsx)("small",{children:"$"}),(0,Fe.jsx)("strong",{children:i})]}),(0,Fe.jsx)("div",{className:"product_rating",children:(0,Fe.jsx)("p",{children:"\u2b50".repeat(s)})})]}),(0,Fe.jsx)("img",{src:r,alt:""}),(0,Fe.jsxs)("div",{className:"buttons",children:[(0,Fe.jsx)("button",{onClick:()=>{a({type:"addtobasket",item:{id:t,title:n,image:r,price:i,rating:s}})},children:(0,Fe.jsx)(Ka.A,{})}),(0,Fe.jsx)("button",{onClick:()=>{const e=JSON.stringify({id:t,title:n,image:r,price:i,rating:s});l("/".concat(c,"/").concat(encodeURIComponent(e)))},children:"VIEW"})]})]})})};function Ga(e,t){return function(){return e.apply(t,arguments)}}const{toString:Qa}=Object.prototype,{getPrototypeOf:Ya}=Object,$a=(Ja=Object.create(null),e=>{const t=Qa.call(e);return Ja[t]||(Ja[t]=t.slice(8,-1).toLowerCase())});var Ja;const Xa=e=>(e=e.toLowerCase(),t=>$a(t)===e),Za=e=>t=>typeof t===e,{isArray:el}=Array,tl=Za("undefined");const nl=Xa("ArrayBuffer");const rl=Za("string"),il=Za("function"),sl=Za("number"),ol=e=>null!==e&&"object"===typeof e,al=e=>{if("object"!==$a(e))return!1;const t=Ya(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ll=Xa("Date"),cl=Xa("File"),ul=Xa("Blob"),hl=Xa("FileList"),dl=Xa("URLSearchParams");function fl(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),el(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function pl(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const ml="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,gl=e=>!tl(e)&&e!==ml;const yl=(vl="undefined"!==typeof Uint8Array&&Ya(Uint8Array),e=>vl&&e instanceof vl);var vl;const _l=Xa("HTMLFormElement"),wl=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),bl=Xa("RegExp"),Sl=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};fl(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},Il="abcdefghijklmnopqrstuvwxyz",El="0123456789",Tl={DIGIT:El,ALPHA:Il,ALPHA_DIGIT:Il+Il.toUpperCase()+El};const kl=Xa("AsyncFunction"),Cl={isArray:el,isArrayBuffer:nl,isBuffer:function(e){return null!==e&&!tl(e)&&null!==e.constructor&&!tl(e.constructor)&&il(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||il(e.append)&&("formdata"===(t=$a(e))||"object"===t&&il(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&nl(e.buffer),t},isString:rl,isNumber:sl,isBoolean:e=>!0===e||!1===e,isObject:ol,isPlainObject:al,isUndefined:tl,isDate:ll,isFile:cl,isBlob:ul,isRegExp:bl,isFunction:il,isStream:e=>ol(e)&&il(e.pipe),isURLSearchParams:dl,isTypedArray:yl,isFileList:hl,forEach:fl,merge:function e(){const{caseless:t}=gl(this)&&this||{},n={},r=(r,i)=>{const s=t&&pl(n,i)||i;al(n[s])&&al(r)?n[s]=e(n[s],r):al(r)?n[s]=e({},r):el(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&fl(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return fl(t,((t,r)=>{n&&il(t)?e[r]=Ga(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Ya(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:$a,kindOfTest:Xa,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(el(e))return e;let t=e.length;if(!sl(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:_l,hasOwnProperty:wl,hasOwnProp:wl,reduceDescriptors:Sl,freezeMethods:e=>{Sl(e,((t,n)=>{if(il(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];il(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return el(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:pl,global:ml,isContextDefined:gl,ALPHABET:Tl,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tl.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&il(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ol(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=el(e)?[]:{};return fl(e,((e,t)=>{const s=n(e,r+1);!tl(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:kl,isThenable:e=>e&&(ol(e)||il(e))&&il(e.then)&&il(e.catch)};function xl(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Cl.inherits(xl,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Cl.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Al=xl.prototype,Nl={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Nl[e]={value:e}})),Object.defineProperties(xl,Nl),Object.defineProperty(Al,"isAxiosError",{value:!0}),xl.from=(e,t,n,r,i,s)=>{const o=Object.create(Al);return Cl.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),xl.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Pl=xl;function Rl(e){return Cl.isPlainObject(e)||Cl.isArray(e)}function Ol(e){return Cl.endsWith(e,"[]")?e.slice(0,-2):e}function Dl(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ol(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Ll=Cl.toFlatObject(Cl,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Ml=function(e,t,n){if(!Cl.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Cl.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Cl.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Cl.isSpecCompliantForm(t);if(!Cl.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Cl.isDate(e))return e.toISOString();if(!a&&Cl.isBlob(e))throw new Pl("Blob is not supported. Use a Buffer instead.");return Cl.isArrayBuffer(e)||Cl.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(Cl.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Cl.isArray(e)&&function(e){return Cl.isArray(e)&&!e.some(Rl)}(e)||(Cl.isFileList(e)||Cl.endsWith(n,"[]"))&&(a=Cl.toArray(e)))return n=Ol(n),a.forEach((function(e,r){!Cl.isUndefined(e)&&null!==e&&t.append(!0===o?Dl([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!Rl(e)||(t.append(Dl(i,n,s),l(e)),!1)}const u=[],h=Object.assign(Ll,{defaultVisitor:c,convertValue:l,isVisitable:Rl});if(!Cl.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Cl.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Cl.forEach(n,(function(n,s){!0===(!(Cl.isUndefined(n)||null===n)&&i.call(t,n,Cl.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function Fl(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ul(e,t){this._pairs=[],e&&Ml(e,this,t)}const jl=Ul.prototype;jl.append=function(e,t){this._pairs.push([e,t])},jl.toString=function(e){const t=e?function(t){return e.call(this,t,Fl)}:Fl;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Vl=Ul;function zl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Bl(e,t,n){if(!t)return e;const r=n&&n.encode||zl,i=n&&n.serialize;let s;if(s=i?i(t,n):Cl.isURLSearchParams(t)?t.toString():new Vl(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ql=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Cl.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Wl={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kl={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Vl,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Hl="undefined"!==typeof window&&"undefined"!==typeof document,Gl=(Ql="undefined"!==typeof navigator&&navigator.product,Hl&&["ReactNative","NativeScript","NS"].indexOf(Ql)<0);var Ql;const Yl="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,$l={...t,...Kl};const Jl=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&Cl.isArray(r)?r.length:s,a)return Cl.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&Cl.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&Cl.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(Cl.isFormData(e)&&Cl.isFunction(e.entries)){const n={};return Cl.forEachEntry(e,((e,r)=>{t(function(e){return Cl.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Xl={transitional:Wl,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Cl.isObject(e);i&&Cl.isHTMLForm(e)&&(e=new FormData(e));if(Cl.isFormData(e))return r?JSON.stringify(Jl(e)):e;if(Cl.isArrayBuffer(e)||Cl.isBuffer(e)||Cl.isStream(e)||Cl.isFile(e)||Cl.isBlob(e))return e;if(Cl.isArrayBufferView(e))return e.buffer;if(Cl.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ml(e,new $l.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return $l.isNode&&Cl.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Cl.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ml(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Cl.isString(e))try{return(t||JSON.parse)(e),Cl.trim(e)}catch(AP){if("SyntaxError"!==AP.name)throw AP}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Xl.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Cl.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(AP){if(n){if("SyntaxError"===AP.name)throw Pl.from(AP,Pl.ERR_BAD_RESPONSE,this,null,this.response);throw AP}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$l.classes.FormData,Blob:$l.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Cl.forEach(["delete","get","head","post","put","patch"],(e=>{Xl.headers[e]={}}));const Zl=Xl,ec=Cl.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tc=Symbol("internals");function nc(e){return e&&String(e).trim().toLowerCase()}function rc(e){return!1===e||null==e?e:Cl.isArray(e)?e.map(rc):String(e)}function ic(e,t,n,r,i){return Cl.isFunction(r)?r.call(this,t,n):(i&&(t=n),Cl.isString(t)?Cl.isString(r)?-1!==t.indexOf(r):Cl.isRegExp(r)?r.test(t):void 0:void 0)}class sc{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=nc(t);if(!i)throw new Error("header name must be a non-empty string");const s=Cl.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=rc(e))}const s=(e,t)=>Cl.forEach(e,((e,n)=>i(e,n,t)));return Cl.isPlainObject(e)||e instanceof this.constructor?s(e,t):Cl.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&ec[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=nc(e)){const n=Cl.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Cl.isFunction(t))return t.call(this,e,n);if(Cl.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=nc(e)){const n=Cl.findKey(this,e);return!(!n||void 0===this[n]||t&&!ic(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=nc(e)){const i=Cl.findKey(n,e);!i||t&&!ic(0,n[i],i,t)||(delete n[i],r=!0)}}return Cl.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!ic(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Cl.forEach(this,((r,i)=>{const s=Cl.findKey(n,i);if(s)return t[s]=rc(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=rc(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Cl.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Cl.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[tc]=this[tc]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=nc(e);t[r]||(!function(e,t){const n=Cl.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Cl.isArray(e)?e.forEach(r):r(e),this}}sc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Cl.reduceDescriptors(sc.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Cl.freezeMethods(sc);const oc=sc;function ac(e,t){const n=this||Zl,r=t||n,i=oc.from(r.headers);let s=r.data;return Cl.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function lc(e){return!(!e||!e.__CANCEL__)}function cc(e,t,n){Pl.call(this,null==e?"canceled":e,Pl.ERR_CANCELED,t,n),this.name="CanceledError"}Cl.inherits(cc,Pl,{__CANCEL__:!0});const uc=cc;const hc=$l.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];Cl.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Cl.isString(r)&&o.push("path="+r),Cl.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function dc(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fc=$l.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=Cl.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const pc=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};function mc(e,t){let n=0;const r=pc(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a);n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}const gc="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=oc.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(Cl.isFormData(r))if($l.hasStandardBrowserEnv||$l.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=dc(e.baseURL,e.url);function d(){if(!u)return;const r=oc.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Pl("Request failed with status code "+n.status,[Pl.ERR_BAD_REQUEST,Pl.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),Bl(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new Pl("Request aborted",Pl.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new Pl("Network Error",Pl.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Wl;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Pl(t,r.clarifyTimeoutError?Pl.ETIMEDOUT:Pl.ECONNABORTED,e,u)),u=null},$l.hasStandardBrowserEnv&&(l&&Cl.isFunction(l)&&(l=l(e)),l||!1!==l&&fc(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&hc.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&Cl.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),Cl.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",mc(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",mc(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{u&&(n(!t||t.type?new uc(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===$l.protocols.indexOf(f)?n(new Pl("Unsupported protocol "+f+":",Pl.ERR_BAD_REQUEST,e)):u.send(r||null)}))},yc={http:null,xhr:gc};Cl.forEach(yc,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(AP){}Object.defineProperty(e,"adapterName",{value:t})}}));const vc=e=>"- ".concat(e),_c=e=>Cl.isFunction(e)||null===e||!1===e,wc=e=>{e=Cl.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!_c(n)&&(r=yc[(t=String(n)).toLowerCase()],void 0===r))throw new Pl("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(vc).join("\n"):" "+vc(e[0]):"as no adapter specified";throw new Pl("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function bc(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new uc(null,e)}function Sc(e){bc(e),e.headers=oc.from(e.headers),e.data=ac.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return wc(e.adapter||Zl.adapter)(e).then((function(t){return bc(e),t.data=ac.call(e,e.transformResponse,t),t.headers=oc.from(t.headers),t}),(function(t){return lc(t)||(bc(e),t&&t.response&&(t.response.data=ac.call(e,e.transformResponse,t.response),t.response.headers=oc.from(t.response.headers))),Promise.reject(t)}))}const Ic=e=>e instanceof oc?{...e}:e;function Ec(e,t){t=t||{};const n={};function r(e,t,n){return Cl.isPlainObject(e)&&Cl.isPlainObject(t)?Cl.merge.call({caseless:n},e,t):Cl.isPlainObject(t)?Cl.merge({},t):Cl.isArray(t)?t.slice():t}function i(e,t,n){return Cl.isUndefined(t)?Cl.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!Cl.isUndefined(t))return r(void 0,t)}function o(e,t){return Cl.isUndefined(t)?Cl.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(Ic(e),Ic(t),!0)};return Cl.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);Cl.isUndefined(o)&&s!==a||(n[r]=o)})),n}const Tc="1.6.8",kc={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{kc[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Cc={};kc.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new Pl(r(i," has been removed"+(t?" in "+t:"")),Pl.ERR_DEPRECATED);return t&&!Cc[i]&&(Cc[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const xc={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Pl("options must be an object",Pl.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new Pl("option "+s+" must be "+n,Pl.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Pl("Unknown option "+s,Pl.ERR_BAD_OPTION)}},validators:kc},Ac=xc.validators;class Nc{constructor(e){this.defaults=e,this.interceptors={request:new ql,response:new ql}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ec(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&xc.assertOptions(n,{silentJSONParsing:Ac.transitional(Ac.boolean),forcedJSONParsing:Ac.transitional(Ac.boolean),clarifyTimeoutError:Ac.transitional(Ac.boolean)},!1),null!=r&&(Cl.isFunction(r)?t.paramsSerializer={serialize:r}:xc.assertOptions(r,{encode:Ac.function,serialize:Ac.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&Cl.merge(i.common,i[t.method]);i&&Cl.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=oc.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[Sc.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(pr){t.call(this,pr);break}}try{c=Sc.call(this,d)}catch(pr){return Promise.reject(pr)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Bl(dc((e=Ec(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Cl.forEach(["delete","get","head","options"],(function(e){Nc.prototype[e]=function(t,n){return this.request(Ec(n||{},{method:e,url:t,data:(n||{}).data}))}})),Cl.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ec(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Nc.prototype[e]=t(),Nc.prototype[e+"Form"]=t(!0)}));const Pc=Nc;class Rc{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new uc(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Rc((function(t){e=t})),cancel:e}}}const Oc=Rc;const Dc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dc).forEach((e=>{let[t,n]=e;Dc[n]=t}));const Lc=Dc;const Mc=function e(t){const n=new Pc(t),r=Ga(Pc.prototype.request,n);return Cl.extend(r,Pc.prototype,n,{allOwnKeys:!0}),Cl.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ec(t,n))},r}(Zl);Mc.Axios=Pc,Mc.CanceledError=uc,Mc.CancelToken=Oc,Mc.isCancel=lc,Mc.VERSION=Tc,Mc.toFormData=Ml,Mc.AxiosError=Pl,Mc.Cancel=Mc.CanceledError,Mc.all=function(e){return Promise.all(e)},Mc.spread=function(e){return function(t){return e.apply(null,t)}},Mc.isAxiosError=function(e){return Cl.isObject(e)&&!0===e.isAxiosError},Mc.mergeConfig=Ec,Mc.AxiosHeaders=oc,Mc.formToJSON=e=>Jl(Cl.isHTMLForm(e)?new FormData(e):e),Mc.getAdapter=wc,Mc.HttpStatusCode=Lc,Mc.default=Mc;const Fc=Mc;const Uc=function(){const[e,t]=(0,i.useState)([]),{products:n}=ie();return(0,i.useEffect)((()=>{(async()=>{try{const e=await Fc.get("https://backend-1-fcyo.onrender.com/".concat(n));t(e.data)}catch(pr){console.log("error in fetching data")}})()}),[]),(0,Fe.jsx)("div",{children:(0,Fe.jsx)("div",{className:"prod_list",children:(0,Fe.jsx)("div",{className:"List_container",children:e.map(((e,t)=>(0,Fe.jsx)(Ha,{id:e.id,title:e.title,price:e.price,rating:e.rating,image:e.image},t)))})})})},jc=()=>{const{productIds:e}=ie(),t=decodeURIComponent(e),n=JSON.parse(t);return console.log(n),(0,Fe.jsx)("div",{className:"container",children:(0,Fe.jsxs)("div",{className:"product",children:[(0,Fe.jsxs)("div",{className:"product_info",children:[(0,Fe.jsx)("p",{children:n.title}),(0,Fe.jsxs)("p",{className:"product_price",children:[(0,Fe.jsx)("small",{children:"$"}),(0,Fe.jsx)("strong",{children:n.price})]}),(0,Fe.jsx)("div",{className:"product_rating",children:(0,Fe.jsx)("p",{children:"\u2b50".repeat(n.rating)})})]}),(0,Fe.jsx)("img",{src:n.image,alt:""})]})})};function Vc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const zc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Bc="EMAIL_SIGNIN",qc="PASSWORD_RESET",Wc="RECOVER_EMAIL",Kc="REVERT_SECOND_FACTOR_ADDITION",Hc="VERIFY_AND_CHANGE_EMAIL",Gc="VERIFY_EMAIL";function Qc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yc=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},$c=Qc,Jc=new ft("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xc=new Wt("@firebase/auth");function Zc(e){if(Xc.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xc.error("Auth (".concat(Tn,"): ").concat(e),...n)}}function eu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw iu(e,...n)}function tu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return iu(e,...n)}function nu(e,t,n){const r=Object.assign(Object.assign({},$c()),{[t]:n});return new ft("auth","Firebase",r).create(t,{appName:e.name})}function ru(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&eu(e,"argument-error"),nu(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function iu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Jc.create(e,...n)}function su(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw iu(t,...r)}}function ou(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Zc(t),new Error(t)}function au(e,t){e||ou(t)}function lu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function cu(){return"http:"===uu()||"https:"===uu()}function uu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class hu{constructor(e,t){this.shortDelay=e,this.longDelay=t,au(t>e,"Short delay should be less than long delay!"),this.isMobile=it()||at()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(cu()||ot()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function du(e,t){au(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class fu{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ou("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ou("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ou("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pu={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},mu=new hu(3e4,6e4);function gu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function yu(e,t,n,r){return vu(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Et(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),fu.fetch()(wu(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function vu(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},pu),t);try{const t=new Su(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Iu(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Iu(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Iu(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Iu(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw nu(e,a,o);eu(e,a)}}catch(AP){if(AP instanceof dt)throw AP;eu(e,"network-request-failed",{message:String(AP)})}}async function _u(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await yu(e,t,n,r,i);return"mfaPendingCredential"in s&&eu(e,"multi-factor-auth-required",{_serverResponse:s}),s}function wu(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?du(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function bu(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Su{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(tu(this.auth,"network-request-failed"))),mu.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Iu(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tu(e,t,r);return i.customData._tokenResponse=n,i}function Eu(e){return void 0!==e&&void 0!==e.getResponse}function Tu(e){return void 0!==e&&void 0!==e.enterprise}class ku{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bu(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Cu(e,t){return yu(e,"GET","/v2/recaptchaConfig",gu(e,t))}function xu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(AP){}}function Au(e){return 1e3*Number(e)}function Nu(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Zc("JWT malformed, contained fewer than 3 sections"),null;try{const e=Je(n);return e?JSON.parse(e):(Zc("Failed to decode base64 JWT payload"),null)}catch(AP){return Zc("Caught error parsing JWT payload as JSON",null===AP||void 0===AP?void 0:AP.toString()),null}}async function Pu(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(AP){throw AP instanceof dt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(AP)&&e.auth.currentUser===e&&await e.auth.signOut(),AP}}class Ru{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(AP){return void((null===AP||void 0===AP?void 0:AP.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ou{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Du(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Pu(e,async function(e,t){return yu(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));su(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Vc(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ou(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Lu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){su(e.idToken,"internal-error"),su("undefined"!==typeof e.idToken,"internal-error"),su("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Nu(e);return su(t,"internal-error"),su("undefined"!==typeof t.exp,"internal-error"),su("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return su(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await vu(e,{},(async()=>{const n=Et({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=wu(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",fu.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Lu;return n&&(su("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(su("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(su("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lu,this.toJSON())}_performRefresh(){return ou("not implemented")}}function Mu(e,t){su("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Fu{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Vc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ru(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ou(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Pu(this,this.stsTokenManager.getToken(this.auth,e));return su(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ot(e),r=await n.getIdToken(t),i=Nu(r);su(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xu(Au(i.auth_time)),issuedAtTime:xu(Au(i.iat)),expirationTime:xu(Au(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ot(e);await Du(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(su(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){su(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Du(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Pu(this,async function(e,t){return yu(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:S}=t;su(v&&S,e,"internal-error");const I=Lu.fromJSON(this.name,S);su("string"===typeof v,e,"internal-error"),Mu(u,e.name),Mu(h,e.name),su("boolean"===typeof _,e,"internal-error"),su("boolean"===typeof w,e,"internal-error"),Mu(d,e.name),Mu(f,e.name),Mu(p,e.name),Mu(m,e.name),Mu(g,e.name),Mu(y,e.name);const E=new Fu({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(E.providerData=b.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Lu;r.updateFromServerResponse(t);const i=new Fu({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Du(i),i}}const Uu=new Map;function ju(e){au(e instanceof Function,"Expected a class definition");let t=Uu.get(e);return t?(au(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Uu.set(e,t),t)}class Vu{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Vu.type="NONE";const zu=Vu;function Bu(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class qu{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Bu(this.userKey,r.apiKey,i),this.fullPersistenceKey=Bu("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fu._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new qu(ju(zu),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ju(zu);const s=Bu(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Fu._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new qu(i,e,n)):new qu(i,e,n)}}function Wu(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qu(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ku(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($u(t))return"Blackberry";if(Ju(t))return"Webos";if(Hu(t))return"Safari";if((t.includes("chrome/")||Gu(t))&&!t.includes("edge/"))return"Chrome";if(Yu(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ku(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/firefox\//i.test(e)}function Hu(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/crios\//i.test(e)}function Qu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/iemobile/i.test(e)}function Yu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/android/i.test(e)}function $u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/blackberry/i.test(e)}function Ju(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/webos/i.test(e)}function Xu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Zu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return Xu(e)||Yu(e)||Ju(e)||$u(e)||/windows phone/i.test(e)||Qu(e)}function eh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Wu(rt());break;case"Worker":t="".concat(Wu(rt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Tn,"/").concat(r)}class th{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(AP){r(AP)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(AP){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===AP||void 0===AP?void 0:AP.message})}}}class nh{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class rh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sh(this),this.idTokenSubscription=new sh(this),this.beforeStateQueue=new th(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ju(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await qu.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(AP){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(AP){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(AP)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return su(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(AP){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Du(e)}catch(AP){if((null===AP||void 0===AP?void 0:AP.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Ot(e):null;return t&&su(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&su(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ju(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return yu(e,"GET","/v2/passwordPolicy",gu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new nh(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ft("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return yu(e,"POST","/v2/accounts:revokeToken",gu(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ju(e)||this._popupRedirectResolver;su(t,this,"argument-error"),this.redirectPersistenceManager=await qu.create(this,[ju(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(su(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return su(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xc.logLevel<=jt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xc.warn("Auth (".concat(Tn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ih(e){return Ot(e)}class sh{constructor(e){this.auth=e,this.observer=null,this.addObserver=xt((e=>this.observer=e))}get next(){return su(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ah(e){return oh.loadJS(e)}function lh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ch{constructor(e){this.type="recaptcha-enterprise",this.auth=ih(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Tu(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Cu(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new ku(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Tu(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=oh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ah(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function uh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new ch(e);let s;try{s=await i.verify(n)}catch(pr){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function hh(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await uh(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await uh(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function dh(e,t,n){const r=ih(e);su(r._canInitEmulator,r,"emulator-config-failed"),su(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=fh(t),{host:o,port:a}=function(e){const t=fh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ph(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ph(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ph(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ou("not implemented")}_getIdTokenResponse(e){return ou("not implemented")}_linkToIdToken(e,t){return ou("not implemented")}_getReauthenticationResolver(e){return ou("not implemented")}}async function gh(e,t){return yu(e,"POST","/v1/accounts:resetPassword",gu(e,t))}async function yh(e,t){return yu(e,"POST","/v1/accounts:signUp",t)}async function vh(e,t){return _u(e,"POST","/v1/accounts:signInWithPassword",gu(e,t))}async function _h(e,t){return yu(e,"POST","/v1/accounts:sendOobCode",gu(e,t))}async function wh(e,t){return _h(e,t)}async function bh(e,t){return _h(e,t)}class Sh extends mh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Sh(e,t,"password")}static _fromEmailAndCode(e,t){return new Sh(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return hh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vh);case"emailLink":return async function(e,t){return _u(e,"POST","/v1/accounts:signInWithEmailLink",gu(e,t))}(e,{email:this._email,oobCode:this._password});default:eu(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return hh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yh);case"emailLink":return async function(e,t){return _u(e,"POST","/v1/accounts:signInWithEmailLink",gu(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:eu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ih(e,t){return _u(e,"POST","/v1/accounts:signInWithIdp",gu(e,t))}class Eh extends mh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):eu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Vc(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Eh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ih(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ih(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ih(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Et(t)}return e}}const Th={USER_NOT_FOUND:"user-not-found"};class kh extends mh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new kh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new kh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return _u(e,"POST","/v1/accounts:signInWithPhoneNumber",gu(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await _u(e,"POST","/v1/accounts:signInWithPhoneNumber",gu(e,t));if(n.temporaryProof)throw Iu(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return _u(e,"POST","/v1/accounts:signInWithPhoneNumber",gu(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Th)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new kh({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ch{constructor(e){var t,n,r,i,s,o;const a=Tt(kt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);su(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Tt(kt(e)).link,n=t?Tt(kt(t)).deep_link_id:null,r=Tt(kt(e)).deep_link_id;return(r?Tt(kt(r)).link:null)||r||n||t||e}(e);try{return new Ch(t)}catch(n){return null}}}class xh{constructor(){this.providerId=xh.PROVIDER_ID}static credential(e,t){return Sh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ch.parseLink(t);return su(n,"argument-error"),Sh._fromEmailAndCode(e,n.code,n.tenantId)}}xh.PROVIDER_ID="password",xh.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ah{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nh extends Ah{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ph extends Nh{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return su("providerId"in t&&"signInMethod"in t,"argument-error"),Eh._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return su(e.idToken||e.accessToken,"argument-error"),Eh._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ph.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ph.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Ph(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(AP){return null}}}class Rh extends Nh{constructor(){super("facebook.com")}static credential(e){return Eh._fromParams({providerId:Rh.PROVIDER_ID,signInMethod:Rh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rh.credentialFromTaggedObject(e)}static credentialFromError(e){return Rh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Rh.credential(t.oauthAccessToken)}catch(n){return null}}}Rh.FACEBOOK_SIGN_IN_METHOD="facebook.com",Rh.PROVIDER_ID="facebook.com";class Oh extends Nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eh._fromParams({providerId:Oh.PROVIDER_ID,signInMethod:Oh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Oh.credentialFromTaggedObject(e)}static credentialFromError(e){return Oh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Oh.credential(n,r)}catch(i){return null}}}Oh.GOOGLE_SIGN_IN_METHOD="google.com",Oh.PROVIDER_ID="google.com";class Dh extends Nh{constructor(){super("github.com")}static credential(e){return Eh._fromParams({providerId:Dh.PROVIDER_ID,signInMethod:Dh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dh.credentialFromTaggedObject(e)}static credentialFromError(e){return Dh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Dh.credential(t.oauthAccessToken)}catch(n){return null}}}Dh.GITHUB_SIGN_IN_METHOD="github.com",Dh.PROVIDER_ID="github.com";class Lh extends mh{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ih(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ih(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ih(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Lh(n,i):null}static _create(e,t){return new Lh(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mh extends Ah{constructor(e){su(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Mh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Mh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Lh.fromJSON(e);return su(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Lh._create(r,n)}catch(AP){return null}}}class Fh extends Nh{constructor(){super("twitter.com")}static credential(e,t){return Eh._fromParams({providerId:Fh.PROVIDER_ID,signInMethod:Fh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fh.credentialFromTaggedObject(e)}static credentialFromError(e){return Fh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Fh.credential(n,r)}catch(i){return null}}}async function Uh(e,t){return _u(e,"POST","/v1/accounts:signUp",gu(e,t))}Fh.TWITTER_SIGN_IN_METHOD="twitter.com",Fh.PROVIDER_ID="twitter.com";class jh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Fu._fromIdTokenResponse(e,n,r),s=Vh(n);return new jh({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Vh(n);return new jh({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Vh(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class zh extends dt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zh.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new zh(e,t,n,r)}}function Bh(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw zh._fromErrorAndOperation(e,n,t,r);throw n}))}function qh(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Wh(e,t){const n=Ot(e);await Hh(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return yu(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=qh(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Kh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Pu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return jh._forOperation(e,"link",r)}async function Hh(e,t,n){await Du(t);const r=!1===e?"provider-already-linked":"no-such-provider";su(qh(t.providerData).has(n)===e,t.auth,r)}async function Gh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Pu(e,Bh(r,i,t,e),n);su(s.idToken,r,"internal-error");const o=Nu(s.idToken);su(o,r,"internal-error");const{sub:a}=o;return su(e.uid===a,r,"user-mismatch"),jh._forOperation(e,i,s)}catch(AP){throw(null===AP||void 0===AP?void 0:AP.code)==="auth/".concat("user-not-found")&&eu(r,"user-mismatch"),AP}}async function Qh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Bh(e,r,t),s=await jh._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Yh(e,t){return Qh(ih(e),t)}async function $h(e,t){const n=Ot(e);return await Hh(!1,n,t.providerId),Kh(n,t)}async function Jh(e,t){return Gh(Ot(e),t)}async function Xh(e,t){const n=ih(e),r=await async function(e,t){return _u(e,"POST","/v1/accounts:signInWithCustomToken",gu(e,t))}(n,{token:t,returnSecureToken:!0}),i=await jh._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Zh{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ed._fromServerResponse(e,t):"totpInfo"in t?td._fromServerResponse(e,t):eu(e,"internal-error")}}class ed extends Zh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ed(t)}}class td extends Zh{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new td(t)}}function nd(e,t,n){var r;su((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),su("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(su(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(su(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function rd(e){const t=ih(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function id(e,t){await async function(e,t){return yu(e,"POST","/v1/accounts:update",gu(e,t))}(Ot(e),{oobCode:t})}async function sd(e,t){const n=Ot(e),r=await gh(n,{oobCode:t}),i=r.requestType;switch(su(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":su(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":su(r.mfaInfo,n,"internal-error");default:su(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Zh._fromServerResponse(ih(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function od(e,t){const n={identifier:t,continueUri:cu()?lu():"http://localhost"},{signinMethods:r}=await async function(e,t){return yu(e,"POST","/v1/accounts:createAuthUri",gu(e,t))}(Ot(e),n);return r||[]}async function ad(e,t){const n=Ot(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&nd(n.auth,r,t);const{email:i}=await async function(e,t){return _h(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ld(e,t,n){const r=Ot(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&nd(r.auth,i,n);const{email:s}=await async function(e,t){return _h(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function cd(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Ot(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Pu(i,async function(e,t){return yu(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function ud(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Pu(e,async function(e,t){return yu(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class hd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class dd extends hd{constructor(e,t,n,r){super(e,t,n),this.username=r}}class fd extends hd{constructor(e,t){super(e,"facebook.com",t)}}class pd extends dd{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class md extends hd{constructor(e,t){super(e,"google.com",t)}}class gd extends dd{constructor(e,t,n){super(e,"twitter.com",t,n)}}function yd(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Nu(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new hd(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new fd(s,i);case"github.com":return new pd(s,i);case"google.com":return new md(s,i);case"twitter.com":return new gd(s,i,e.screenName||null);case"custom":case"anonymous":return new hd(s,null);default:return new hd(s,r,i)}}(n)}class vd{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new vd("enroll",e,t)}static _fromMfaPendingCredential(e){return new vd("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return vd._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return vd._fromIdtoken(e.multiFactorSession.idToken)}return null}}class _d{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=ih(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Zh._fromServerResponse(n,e)));su(r.mfaPendingCredential,n,"internal-error");const s=vd._fromMfaPendingCredential(r.mfaPendingCredential);return new _d(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await jh._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return su(t.user,n,"internal-error"),jh._forOperation(t.user,t.operationType,o);default:eu(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class wd{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Zh._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new wd(e)}async getSession(){return vd._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Pu(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Pu(this.user,function(e,t){return yu(e,"POST","/v2/accounts/mfaEnrollment:withdraw",gu(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(AP){throw AP}}}const bd=new WeakMap;const Sd="__sak";class Id{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ed extends Id{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=rt();return Hu(e)||Xu(e)}()&&function(){try{return!(!window||window===window.top)}catch(AP){return!1}}(),this.fallbackToPolling=Zu(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);lt()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ed.type="LOCAL";const Td=Ed;class kd extends Id{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kd.type="SESSION";const Cd=kd;class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new xd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}xd.receivers=[];class Nd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Ad("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Pd(){return window}function Rd(){return"undefined"!==typeof Pd().WorkerGlobalScope&&"function"===typeof Pd().importScripts}const Od="firebaseLocalStorageDb",Dd="firebaseLocalStorage",Ld="fbase_key";class Md{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Fd(e,t){return e.transaction([Dd],t?"readwrite":"readonly").objectStore(Dd)}function Ud(){const e=indexedDB.open(Od,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Dd,{keyPath:Ld})}catch(AP){n(AP)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Dd)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Od);return new Md(e).toPromise()}(),t(await Ud()))}))}))}async function jd(e,t,n){const r=Fd(e,!0).put({[Ld]:t,value:n});return new Md(r).toPromise()}function Vd(e,t){const n=Fd(e,!0).delete(t);return new Md(n).toPromise()}class zd{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ud()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(AP){if(t++>3)throw AP;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(Rd()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Nd(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ud();return await jd(e,Sd,"1"),await Vd(e,Sd),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>jd(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Fd(e,!1).get(t),r=await new Md(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Vd(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Fd(e,!1).getAll();return new Md(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zd.type="LOCAL";const Bd=zd;const qd=1e12;class Wd{constructor(e){this.auth=e,this.counter=qd,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Kd(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||qd;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||qd;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||qd;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Kd{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;su(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(AP){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(AP){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Hd=lh("rcb"),Gd=new hu(3e4,6e4);class Qd{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Pd().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return su(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Eu(Pd().grecaptcha)?Promise.resolve(Pd().grecaptcha):new Promise(((n,r)=>{const i=Pd().setTimeout((()=>{r(tu(e,"network-request-failed"))}),Gd.get());Pd()[Hd]=()=>{Pd().clearTimeout(i),delete Pd()[Hd];const s=Pd().grecaptcha;if(!s||!Eu(s))return void r(tu(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};ah("".concat(oh.recaptchaV2Script,"?").concat(Et({onload:Hd,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(tu(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Pd().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Yd{async load(e){return new Wd(e)}clearedOneInstance(){}}const $d="recaptcha",Jd={theme:"light",type:"image"};class Xd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Jd);this.parameters=n,this.type=$d,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ih(e),this.isInvisible="invisible"===this.parameters.size,su("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;su(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Yd:new Qd,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(AP){return Promise.reject(AP)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){su(!this.parameters.sitekey,this.auth,"argument-error"),su(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),su("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Pd()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){su(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){su(cu()&&!Rd(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await yu(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);su(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return su(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zd{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=kh._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ef(e,t,n){var r;const i=await n.verify();try{let s;if(su("string"===typeof i,e,"argument-error"),su(n.type===$d,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){su("enroll"===t.type,e,"internal-error");const n=await function(e,t){return yu(e,"POST","/v2/accounts/mfaEnrollment:start",gu(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{su("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;su(n,e,"missing-multi-factor-info");const o=await function(e,t){return yu(e,"POST","/v2/accounts/mfaSignIn:start",gu(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return yu(e,"POST","/v1/accounts:sendVerificationCode",gu(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class tf{constructor(e){this.providerId=tf.PROVIDER_ID,this.auth=ih(e)}verifyPhoneNumber(e,t){return ef(this.auth,e,Ot(t))}static credential(e,t){return kh._fromVerification(e,t)}static credentialFromResult(e){const t=e;return tf.credentialFromTaggedObject(t)}static credentialFromError(e){return tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?kh._fromTokenResponse(n,r):null}}function nf(e,t){return t?ju(t):(su(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}tf.PROVIDER_ID="phone",tf.PHONE_SIGN_IN_METHOD="phone";class rf extends mh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ih(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ih(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ih(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sf(e){return Qh(e.auth,new rf(e),e.bypassAuthState)}function of(e){const{auth:t,user:n}=e;return su(n,t,"internal-error"),Gh(n,new rf(e),e.bypassAuthState)}async function af(e){const{auth:t,user:n}=e;return su(n,t,"internal-error"),Kh(n,new rf(e),e.bypassAuthState)}class lf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(AP){this.reject(AP)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(AP){this.reject(AP)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sf;case"linkViaPopup":case"linkViaRedirect":return af;case"reauthViaPopup":case"reauthViaRedirect":return of;default:eu(this.auth,"internal-error")}}resolve(e){au(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){au(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cf=new hu(2e3,1e4);class uf extends lf{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,uf.currentPopupAction&&uf.currentPopupAction.cancel(),uf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return su(e,this.auth,"internal-error"),e}async onExecution(){au(1===this.filter.length,"Popup operations only handle one event");const e=Ad();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(tu(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(tu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,uf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(tu(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,cf.get())};e()}}uf.currentPopupAction=null;const hf="pendingRedirect",df=new Map;class ff extends lf{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=yf(t),r=gf(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(AP){e=()=>Promise.reject(AP)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function pf(e,t){return gf(e)._set(yf(t),"true")}function mf(e,t){df.set(e._key(),t)}function gf(e){return ju(e._redirectPersistence)}function yf(e){return Bu(hf,e.config.apiKey,e.name)}function vf(e,t,n){return async function(e,t,n){const r=ih(e);ru(e,t,Ah),await r._initializationPromise;const i=nf(r,n);return await pf(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function _f(e,t,n){return async function(e,t,n){const r=Ot(e);ru(r.auth,t,Ah),await r.auth._initializationPromise;const i=nf(r.auth,n);await pf(i,r.auth);const s=await Sf(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function wf(e,t,n){return async function(e,t,n){const r=Ot(e);ru(r.auth,t,Ah),await r.auth._initializationPromise;const i=nf(r.auth,n);await Hh(!1,r,t.providerId),await pf(i,r.auth);const s=await Sf(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function bf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=ih(e),i=nf(r,t),s=new ff(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Sf(e){const t=Ad("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class If{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Tf(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tu(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ef(e))}saveEventToCache(e){this.cachedEventUids.add(Ef(e)),this.lastProcessedEventTime=Date.now()}}function Ef(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Tf(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function kf(e){return yu(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Cf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xf=/^https?/;function Af(e){const t=lu(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!xf.test(n))return!1;if(Cf.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Nf=new hu(3e4,6e4);function Pf(){const e=Pd().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Rf(e){return new Promise(((t,n)=>{var r,i,s;function o(){Pf(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Pf(),n(tu(e,"network-request-failed"))},timeout:Nf.get()})}if(null===(i=null===(r=Pd().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Pd().gapi)||void 0===s?void 0:s.load)){const t=lh("iframefcb");return Pd()[t]=()=>{gapi.load?o():n(tu(e,"network-request-failed"))},ah("".concat(oh.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Of=null,e}))}let Of=null;const Df=new hu(5e3,15e3),Lf="__/auth/iframe",Mf="emulator/auth/iframe",Ff={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jf(e){const t=e.config;su(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?du(t,Mf):"https://".concat(e.config.authDomain,"/").concat(Lf),r={apiKey:t.apiKey,appName:e.name,v:Tn},i=Uf.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Et(r).slice(1))}async function Vf(e){const t=await function(e){return Of=Of||Rf(e),Of}(e),n=Pd().gapi;return su(n,e,"internal-error"),t.open({where:document.body,url:jf(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ff,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=tu(e,"network-request-failed"),s=Pd().setTimeout((()=>{r(i)}),Df.get());function o(){Pd().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const zf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(AP){}}}function qf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},zf),{width:r.toString(),height:i.toString(),top:s,left:o}),c=rt().toLowerCase();n&&(a=Gu(c)?"_blank":n),Ku(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Xu(arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Bf(null);const h=window.open(t||"",a,u);su(h,e,"popup-blocked");try{h.focus()}catch(AP){}return new Bf(h)}const Wf="__/auth/handler",Kf="emulator/auth/handler",Hf=encodeURIComponent("fac");async function Gf(e,t,n,r,i,s){su(e.config.authDomain,e,"auth-domain-config-required"),su(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tn,eventId:i};if(t instanceof Ah){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",wt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Nh){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Hf,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Wf);return du(t,Kf)}(e),"?").concat(Et(a).slice(1)).concat(c)}const Qf="webStorageSupport";const Yf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cd,this._completeRedirectFn=bf,this._overrideRedirectResult=mf}async _openPopup(e,t,n,r){var i;au(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return qf(e,await Gf(e,t,n,lu(),r),Ad())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Pd().location.href=e}(await Gf(e,t,n,lu(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(au(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Vf(e),n=new If(e);return t.register("authEvent",(t=>{su(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qf,{type:Qf},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Qf];void 0!==i&&t(!!i),eu(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await kf(e);for(const r of t)try{if(Af(r))return}catch(n){}eu(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zu()||Hu()||Xu()}};class $f{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ou("unexpected MultiFactorSessionType")}}}class Jf extends $f{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Jf(e)}_finalizeEnroll(e,t,n){return function(e,t){return yu(e,"POST","/v2/accounts/mfaEnrollment:finalize",gu(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return yu(e,"POST","/v2/accounts/mfaSignIn:finalize",gu(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Xf{constructor(){}static assertion(e){return Jf._fromCredential(e)}}Xf.FACTOR_ID="phone";var Zf="@firebase/auth",ep="1.6.2";class tp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){su(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=et())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var np;function rp(){return window}!function(e){oh=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=tu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),np="Browser",_n(new Dt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;su(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:np,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eh(np)},c=new rh(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ju);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),_n(new Dt("auth-internal",(e=>(e=>new tp(e))(ih(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(Zf,ep,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(np)),Nn(Zf,ep,"esm2017");async function ip(e,t,n){var r;const{BuildInfo:i}=rp();au(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(au(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Xu()?o.ibi=i.packageName:Yu()?o.apn=i.packageName:eu(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Gf(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function sp(e){const{cordova:t}=rp();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const op=20;class ap extends If{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function lp(e){const t=await hp()._get(dp(e));return t&&await hp()._remove(dp(e)),t}function cp(e,t){var n,r;const i=function(e){const t=fp(e),n=t.link?decodeURIComponent(t.link):void 0,r=fp(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return fp(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=fp(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(AP){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?tu(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function up(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<op;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function hp(){return ju(Td)}function dp(e){return Bu("authEvent",e.config.apiKey,e.name)}function fp(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Tt(n.join("?"))}const pp=class{constructor(){this._redirectPersistence=Cd,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bf,this._overrideRedirectResult=mf}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new ap(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){eu(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=rp();su("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),su("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),su("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),su("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),su("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),df.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:up(),postBody:null,tenantId:e.tenantId,error:tu(e,"no-auth-event")}}(e,n,r);await function(e,t){return hp()._set(dp(e),t)}(e,s);const o=await ip(e,s,t);return async function(e,t,n){const{cordova:r}=rp();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(tu(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Yu()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await sp(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=rp(),n={};Xu()?n.iosBundleId=t.packageName:Yu()?n.androidPackageName=t.packageName:eu(e,"operation-not-supported-in-this-environment"),await kf(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=rp(),s=setTimeout((async()=>{await lp(e),t.onEvent(mp())}),500),o=async n=>{clearTimeout(s);const r=await lp(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=cp(r,n.url)),t.onEvent(i||mp())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");rp().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(AP){console.error(AP)}}}};function mp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tu("no-auth-event")}}function gp(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function yp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return!("file:"!==gp()&&"ionic:"!==gp()&&"capacitor:"!==gp()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function vp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return lt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt();return/Edge\/\d+/.test(e)}(e)}function _p(){try{const e=self.localStorage,t=Ad();if(e)return e.setItem(t,"1"),e.removeItem(t),!vp()||ht()}catch(AP){return wp()&&ht()}return!1}function wp(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function bp(){return("http:"===gp()||"https:"===gp()||ot()||yp())&&!(at()||st())&&_p()&&!wp()}function Sp(){return yp()&&"undefined"!==typeof document}const Ip={LOCAL:"local",NONE:"none",SESSION:"session"},Ep=su,Tp="persistence";async function kp(e){await e._initializationPromise;const t=Cp(),n=Bu(Tp,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Cp(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(AP){return null}}const xp=su;class Ap{constructor(){this.browserResolver=ju(Yf),this.cordovaResolver=ju(pp),this.underlyingResolver=null,this._redirectPersistence=Cd,this._completeRedirectFn=bf,this._overrideRedirectResult=mf}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Sp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xp(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Sp()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Np(e){return e.unwrap()}function Pp(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Lp(e,function(e,t){var n;const r=Ot(e),i=t;return su(t.customData.operationType,r,"argument-error"),su(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_d._fromError(r,i)}(e,t))}else if(r){const e=Rp(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Rp(e){const{_tokenResponse:t}=e instanceof dt?e.customData:e;if(!t)return null;if(!(e instanceof dt)&&"temporaryProof"in t&&"phoneNumber"in t)return tf.credentialFromResult(e);const n=t.providerId;if(!n||n===zc.PASSWORD)return null;let r;switch(n){case zc.GOOGLE:r=Oh;break;case zc.FACEBOOK:r=Rh;break;case zc.GITHUB:r=Dh;break;case zc.TWITTER:r=Fh;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Lh._create(n,o):Eh._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Ph(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof dt?r.credentialFromError(e):r.credentialFromResult(e)}function Op(e,t){return t.catch((t=>{throw t instanceof dt&&Pp(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Rp(r)),additionalUserInfo:yd(e),user:Mp.getOrCreate(n)};var r}))}async function Dp(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Op(e,n.confirm(t))}}class Lp{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Op(Np(this.auth),this.resolver.resolveSignIn(e))}}class Mp{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Ot(e);return bd.has(t)||bd.set(t,wd._fromUser(t)),bd.get(t)}(e)}static getOrCreate(e){return Mp.USER_MAP.has(e)||Mp.USER_MAP.set(e,new Mp(e)),Mp.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Op(this.auth,$h(this._delegate,e))}async linkWithPhoneNumber(e,t){return Dp(this.auth,async function(e,t,n){const r=Ot(e);await Hh(!1,r,"phone");const i=await ef(r.auth,t,Ot(n));return new Zd(i,(e=>$h(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Op(this.auth,async function(e,t,n){const r=Ot(e);ru(r.auth,t,Ah);const i=nf(r.auth,n);return new uf(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Ap))}async linkWithRedirect(e){return await kp(ih(this.auth)),wf(this._delegate,e,Ap)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Op(this.auth,Jh(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Dp(this.auth,async function(e,t,n){const r=Ot(e),i=await ef(r.auth,t,Ot(n));return new Zd(i,(e=>Jh(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Op(this.auth,async function(e,t,n){const r=Ot(e);ru(r.auth,t,Ah);const i=nf(r.auth,n);return new uf(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Ap))}async reauthenticateWithRedirect(e){return await kp(ih(this.auth)),_f(this._delegate,e,Ap)}sendEmailVerification(e){return ad(this._delegate,e)}async unlink(e){return await Wh(this._delegate,e),this}updateEmail(e){return function(e,t){return ud(Ot(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return ud(Ot(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Kh(Ot(e),t)}(this._delegate,e)}updateProfile(e){return cd(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ld(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mp.USER_MAP=new WeakMap;const Fp=su;class Up{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Fp(n,"invalid-api-key",{appName:e.name}),Fp(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Ap:void 0;this._delegate=t.initialize({options:{persistence:Vp(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Yc),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){dh(this._delegate,e,t)}applyActionCode(e){return id(this._delegate,e)}checkActionCode(e){return sd(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await gh(Ot(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rd(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Op(this._delegate,async function(e,t,n){const r=ih(e),i=hh(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uh),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rd(e),t})),o=await jh._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return od(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ch.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Fp(bp(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await ih(e)._initializationPromise,bf(e,t,!1)}(this._delegate,Ap);return e?Op(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){ih(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=jp(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=jp(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=ih(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){su(t.handleCodeInApp,r,"argument-error"),t&&nd(r,e,t)}(i,n),await hh(r,i,"getOobCode",bh)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=ih(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&nd(r,i,n),await hh(r,i,"getOobCode",wh)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Ep(Object.values(Ip).includes(t),e,"invalid-persistence-type"),at()?Ep(t!==Ip.SESSION,e,"unsupported-persistence-type"):st()?Ep(t===Ip.NONE,e,"unsupported-persistence-type"):wp()?Ep(t===Ip.NONE||t===Ip.LOCAL&&ht(),e,"unsupported-persistence-type"):Ep(t===Ip.NONE||_p(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Ip.SESSION:t=Cd;break;case Ip.LOCAL:t=await ju(Bd)._isAvailable()?Bd:Td;break;case Ip.NONE:t=zu;break;default:return eu("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Op(this._delegate,async function(e){var t;const n=ih(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new jh({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Uh(n,{returnSecureToken:!0}),i=await jh._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Op(this._delegate,Yh(this._delegate,e))}signInWithCustomToken(e){return Op(this._delegate,Xh(this._delegate,e))}signInWithEmailAndPassword(e,t){return Op(this._delegate,function(e,t,n){return Yh(Ot(e),xh.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rd(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Op(this._delegate,async function(e,t,n){const r=Ot(e),i=xh.credentialWithLink(t,n||lu());return su(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yh(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Dp(this._delegate,async function(e,t,n){const r=ih(e),i=await ef(r,t,Ot(n));return new Zd(i,(e=>Yh(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Fp(bp(),this._delegate,"operation-not-supported-in-this-environment"),Op(this._delegate,async function(e,t,n){const r=ih(e);ru(e,t,Ah);const i=nf(r,n);return new uf(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Ap))}async signInWithRedirect(e){return Fp(bp(),this._delegate,"operation-not-supported-in-this-environment"),await kp(this._delegate),vf(this._delegate,e,Ap)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await sd(Ot(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function jp(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Mp.getOrCreate(e)),error:t,complete:n}}function Vp(e,t){const n=function(e,t){const n=Cp();if(!n)return[];const r=Bu(Tp,e,t);switch(n.getItem(r)){case Ip.NONE:return[zu];case Ip.LOCAL:return[Bd,Cd];case Ip.SESSION:return[Cd];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Bd)||n.push(Bd),"undefined"!==typeof window)for(const r of[Td,Cd])n.includes(r)||n.push(r);return n.includes(zu)||n.push(zu),n}Up.Persistence=Ip;class zp{constructor(){this.providerId="phone",this._delegate=new tf(Np(Yn.auth()))}static credential(e,t){return tf.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}zp.PHONE_SIGN_IN_METHOD=tf.PHONE_SIGN_IN_METHOD,zp.PROVIDER_ID=tf.PROVIDER_ID;const Bp=su;class qp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yn.app();var r;Bp(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Xd(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Wp;(Wp=Yn).INTERNAL.registerComponent(new Dt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Up(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bc,PASSWORD_RESET:qc,RECOVER_EMAIL:Wc,REVERT_SECOND_FACTOR_ADDITION:Kc,VERIFY_AND_CHANGE_EMAIL:Hc,VERIFY_EMAIL:Gc}},EmailAuthProvider:xh,FacebookAuthProvider:Rh,GithubAuthProvider:Dh,GoogleAuthProvider:Oh,OAuthProvider:Ph,SAMLAuthProvider:Mh,PhoneAuthProvider:zp,PhoneMultiFactorGenerator:Xf,RecaptchaVerifier:qp,TwitterAuthProvider:Fh,Auth:Up,AuthCredential:mh,Error:dt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Wp.registerVersion("@firebase/auth-compat","0.5.4");var Kp,Hp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Gp={},Qp=Qp||{},Yp=Hp||self;function $p(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Jp(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Xp="closure_uid_"+(1e9*Math.random()>>>0),Zp=0;function em(e,t,n){return e.call.apply(e.bind,arguments)}function tm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function nm(e,t,n){return(nm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?em:tm).apply(null,arguments)}function rm(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function im(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function sm(){this.s=this.s,this.o=this.o}sm.prototype.s=!1,sm.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Xp)&&e[Xp]||(e[Xp]=++Zp))},sm.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const om=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function am(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function lm(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if($p(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function cm(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}cm.prototype.h=function(){this.defaultPrevented=!0};var um=function(){if(!Yp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Yp.addEventListener("test",e,t),Yp.removeEventListener("test",e,t)}catch(n){}return e}();function hm(e){return/^[\s\xa0]*$/.test(e)}function dm(){var e=Yp.navigator;return e&&(e=e.userAgent)?e:""}function fm(e){return-1!=dm().indexOf(e)}function pm(e){return pm[" "](e),e}pm[" "]=function(){};var mm,gm,ym=fm("Opera"),vm=fm("Trident")||fm("MSIE"),_m=fm("Edge"),wm=_m||vm,bm=fm("Gecko")&&!(-1!=dm().toLowerCase().indexOf("webkit")&&!fm("Edge"))&&!(fm("Trident")||fm("MSIE"))&&!fm("Edge"),Sm=-1!=dm().toLowerCase().indexOf("webkit")&&!fm("Edge");function Im(){var e=Yp.document;return e?e.documentMode:void 0}e:{var Em="",Tm=function(){var e=dm();return bm?/rv:([^\);]+)(\)|;)/.exec(e):_m?/Edge\/([\d\.]+)/.exec(e):vm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Sm?/WebKit\/(\S+)/.exec(e):ym?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Tm&&(Em=Tm?Tm[1]:""),vm){var km=Im();if(null!=km&&km>parseFloat(Em)){mm=String(km);break e}}mm=Em}if(Yp.document&&vm){var Cm=Im();gm=Cm||(parseInt(mm,10)||void 0)}else gm=void 0;var xm=gm;function Am(e,t){if(cm.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(bm){e:{try{pm(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Nm[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Am.$.h.call(this)}}im(Am,cm);var Nm={2:"touch",3:"pen",4:"mouse"};Am.prototype.h=function(){Am.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Pm="closure_listenable_"+(1e6*Math.random()|0),Rm=0;function Om(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Rm,this.fa=this.ia=!1}function Dm(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Lm(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Mm(e){const t={};for(const n in e)t[n]=e[n];return t}const Fm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Um(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Fm.length;t++)n=Fm[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function jm(e){this.src=e,this.g={},this.h=0}function Vm(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=om(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Dm(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function zm(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}jm.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=zm(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Om(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Bm="closure_lm_"+(1e6*Math.random()|0),qm={};function Wm(e,t,n,r,i){if(r&&r.once)return Hm(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Wm(e,t[s],n,r,i);return null}return n=Zm(n),e&&e[Pm]?e.O(t,n,Jp(r)?!!r.capture:!!r,i):Km(e,t,n,!1,r,i)}function Km(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Jp(i)?!!i.capture:!!i,a=Jm(e);if(a||(e[Bm]=a=new jm(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$m;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)um||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ym(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Hm(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Hm(e,t[s],n,r,i);return null}return n=Zm(n),e&&e[Pm]?e.P(t,n,Jp(r)?!!r.capture:!!r,i):Km(e,t,n,!0,r,i)}function Gm(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Gm(e,t[s],n,r,i);else r=Jp(r)?!!r.capture:!!r,n=Zm(n),e&&e[Pm]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=zm(s=e.g[t],n,r,i))&&(Dm(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Jm(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zm(t,n,r,i)),(n=-1<e?t[e]:null)&&Qm(n))}function Qm(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Pm])Vm(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ym(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Jm(t))?(Vm(n,e),0==n.h&&(n.src=null,t[Bm]=null)):Dm(e)}}}function Ym(e){return e in qm?qm[e]:qm[e]="on"+e}function $m(e,t){if(e.fa)e=!0;else{t=new Am(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Qm(e),e=n.call(r,t)}return e}function Jm(e){return(e=e[Bm])instanceof jm?e:null}var Xm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zm(e){return"function"===typeof e?e:(e[Xm]||(e[Xm]=function(t){return e.handleEvent(t)}),e[Xm])}function eg(){sm.call(this),this.i=new jm(this),this.S=this,this.J=null}function tg(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new cm(t,e);else if(t instanceof cm)t.target=t.target||e;else{var i=t;Um(t=new cm(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ng(o,r,!0,t)&&i}if(i=ng(o=t.g=e,r,!0,t)&&i,i=ng(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ng(o=t.g=n[s],r,!1,t)&&i}function ng(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Vm(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}im(eg,sm),eg.prototype[Pm]=!0,eg.prototype.removeEventListener=function(e,t,n,r){Gm(this,e,t,n,r)},eg.prototype.N=function(){if(eg.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dm(n[r]);delete t.g[e],t.h--}}this.J=null},eg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},eg.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var rg=Yp.JSON.stringify;function ig(){var e=hg;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var sg=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new og),(e=>e.reset()));class og{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ag(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function lg(e){Yp.setTimeout((()=>{throw e}),0)}let cg,ug=!1,hg=new class{constructor(){this.h=this.g=null}add(e,t){const n=sg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},dg=()=>{const e=Yp.Promise.resolve(void 0);cg=()=>{e.then(fg)}};var fg=()=>{for(var e;e=ig();){try{e.h.call(e.g)}catch(n){lg(n)}var t=sg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ug=!1};function pg(e,t){eg.call(this),this.h=e||1,this.g=t||Yp,this.j=nm(this.qb,this),this.l=Date.now()}function mg(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function gg(e,t,n){if("function"===typeof e)n&&(e=nm(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=nm(e.handleEvent,e)}return 2147483647<Number(t)?-1:Yp.setTimeout(e,t||0)}function yg(e){e.g=gg((()=>{e.g=null,e.i&&(e.i=!1,yg(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}im(pg,eg),(Kp=pg.prototype).ga=!1,Kp.T=null,Kp.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),tg(this,"tick"),this.ga&&(mg(this),this.start()))}},Kp.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kp.N=function(){pg.$.N.call(this),mg(this),delete this.g};class vg extends sm{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yg(this)}N(){super.N(),this.g&&(Yp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _g(e){sm.call(this),this.h=e,this.g={}}im(_g,sm);var wg=[];function bg(e,t,n,r){Array.isArray(n)||(n&&(wg[0]=n.toString()),n=wg);for(var i=0;i<n.length;i++){var s=Wm(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Sg(e){Lm(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Qm(e)}),e),e.g={}}function Ig(){this.g=!0}function Eg(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return rg(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}_g.prototype.N=function(){_g.$.N.call(this),Sg(this)},_g.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ig.prototype.Ea=function(){this.g=!1},Ig.prototype.info=function(){};var Tg={},kg=null;function Cg(){return kg=kg||new eg}function xg(e){cm.call(this,Tg.Ta,e)}function Ag(e){const t=Cg();tg(t,new xg(t))}function Ng(e,t){cm.call(this,Tg.STAT_EVENT,e),this.stat=t}function Pg(e){const t=Cg();tg(t,new Ng(t,e))}function Rg(e,t){cm.call(this,Tg.Ua,e),this.size=t}function Og(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Yp.setTimeout((function(){e()}),t)}Tg.Ta="serverreachability",im(xg,cm),Tg.STAT_EVENT="statevent",im(Ng,cm),Tg.Ua="timingevent",im(Rg,cm);var Dg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Lg={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mg(){}function Fg(e){return e.h||(e.h=e.i())}function Ug(){}Mg.prototype.h=null;var jg,Vg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function zg(){cm.call(this,"d")}function Bg(){cm.call(this,"c")}function qg(){}function Wg(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new _g(this),this.P=Hg,e=wm?125:void 0,this.V=new pg(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Kg}function Kg(){this.i=null,this.g="",this.h=!1}im(zg,cm),im(Bg,cm),im(qg,Mg),qg.prototype.g=function(){return new XMLHttpRequest},qg.prototype.i=function(){return{}},jg=new qg;var Hg=45e3,Gg={},Qg={};function Yg(e,t,n){e.L=1,e.A=py(cy(t)),e.u=n,e.S=!0,$g(e,null)}function $g(e,t){e.G=Date.now(),ey(e),e.B=cy(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Cy(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Kg,e.g=xv(e.l,n?t:null,!e.u),0<e.O&&(e.M=new vg(nm(e.Pa,e,e.g),e.O)),bg(e.U,e.g,"readystatechange",e.nb),t=e.I?Mm(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ag(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Jg(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Xg(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Zg(e,n),r==Qg){4==t&&(e.s=4,Pg(14),i=!1),Eg(e.j,e.m,null,"[Incomplete Response]");break}if(r==Gg){e.s=4,Pg(15),Eg(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Eg(e.j,e.m,r,null),sy(e,r)}Jg(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Pg(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wv(t),t.M=!0,Pg(11))):(Eg(e.j,e.m,n,"[Invalid Chunked Response]"),iy(e),ry(e))}function Zg(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Qg:(n=Number(t.substring(n,r)),isNaN(n)?Gg:(r+=1)+n>t.length?Qg:(t=t.slice(r,r+n),e.o=r+n,t))}function ey(e){e.Y=Date.now()+e.P,ty(e,e.P)}function ty(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Og(nm(e.lb,e),t)}function ny(e){e.C&&(Yp.clearTimeout(e.C),e.C=null)}function ry(e){0==e.l.H||e.J||Iv(e.l,e)}function iy(e){ny(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,mg(e.V),Sg(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function sy(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Dy(n.i,e)))if(!e.K&&Dy(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Sv(n),dv(n)}_v(n),Pg(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Og(nm(n.ib,n),6e3));if(1>=Oy(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Tv(n,11)}else if((e.K||n.g==e)&&Sv(n),!hm(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ly(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,fy(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Cv(r,r.J?r.pa:null,r.Y),o.K){My(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ny(a),ey(a)),r.g=o}else vv(r);0<n.j.length&&pv(n)}else"stop"!=c[0]&&"close"!=c[0]||Tv(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Tv(n,7):hv(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Ag()}catch(c){}}function oy(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($p(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if($p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if($p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Kp=Wg.prototype).setTimeout=function(e){this.P=e},Kp.nb=function(e){e=e.target;const t=this.M;t&&3==sv(e)?t.l():this.Pa(e)},Kp.Pa=function(e){try{if(e==this.g)e:{const u=sv(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||wm||this.g&&(this.h.h||this.g.ja()||ov(this.g)))){this.J||4!=u||7==t||Ag(),ny(this);var n=this.g.da();this.ca=n;t:if(Jg(this)){var r=ov(this.g);e="";var i=r.length,s=4==sv(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){iy(this),ry(this);var o="";break t}this.h.i=new Yp.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hm(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Pg(12),iy(this),ry(this);break e}Eg(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sy(this,n)}this.S?(Xg(this,u,o),wm&&this.i&&3==u&&(bg(this.U,this.V,"tick",this.mb),this.V.start())):(Eg(this.j,this.m,o,null),sy(this,o)),4==u&&iy(this),this.i&&!this.J&&(4==u?Iv(this.l,this):(this.i=!1,ey(this)))}else(function(e){const t={};e=(e.g&&2<=sv(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(hm(e[r]))continue;var n=ag(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Pg(12)):(this.s=0,Pg(13)),iy(this),ry(this)}}}catch(u){}},Kp.mb=function(){if(this.g){var e=sv(this.g),t=this.g.ja();this.o<t.length&&(ny(this),Xg(this,e,t),this.i&&4!=e&&ey(this))}},Kp.cancel=function(){this.J=!0,iy(this)},Kp.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ag(),Pg(17)),iy(this),this.s=2,ry(this)):ty(this,this.Y-e)};var ay=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ly(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ly){this.h=e.h,uy(this,e.j),this.s=e.s,this.g=e.g,hy(this,e.m),this.l=e.l;var t=e.i,n=new Iy;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),dy(this,n),this.o=e.o}else e&&(t=String(e).match(ay))?(this.h=!1,uy(this,t[1]||"",!0),this.s=my(t[2]||""),this.g=my(t[3]||"",!0),hy(this,t[4]),this.l=my(t[5]||"",!0),dy(this,t[6]||"",!0),this.o=my(t[7]||"")):(this.h=!1,this.i=new Iy(null,this.h))}function cy(e){return new ly(e)}function uy(e,t,n){e.j=n?my(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function hy(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function dy(e,t,n){t instanceof Iy?(e.i=t,function(e,t){t&&!e.j&&(Ey(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ty(this,t),Cy(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=gy(t,by)),e.i=new Iy(t,e.h))}function fy(e,t,n){e.i.set(t,n)}function py(e){return fy(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function my(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function gy(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,yy),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yy(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ly.prototype.toString=function(){var e=[],t=this.j;t&&e.push(gy(t,vy,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(gy(t,vy,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(gy(n,"/"==n.charAt(0)?wy:_y,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",gy(n,Sy)),e.join("")};var vy=/[#\/\?@]/g,_y=/[#\?:]/g,wy=/[#\?]/g,by=/[#\?@]/g,Sy=/#/g;function Iy(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ey(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ty(e,t){Ey(e),t=xy(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ky(e,t){return Ey(e),t=xy(e,t),e.g.has(t)}function Cy(e,t,n){Ty(e,t),0<n.length&&(e.i=null,e.g.set(xy(e,t),am(n)),e.h+=n.length)}function xy(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Kp=Iy.prototype).add=function(e,t){Ey(this),this.i=null,e=xy(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Kp.forEach=function(e,t){Ey(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Kp.ta=function(){Ey(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Kp.Z=function(e){Ey(this);let t=[];if("string"===typeof e)ky(this,e)&&(t=t.concat(this.g.get(xy(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Kp.set=function(e,t){return Ey(this),this.i=null,ky(this,e=xy(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Kp.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Kp.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ay=class{constructor(e,t){this.g=e,this.map=t}};function Ny(e){this.l=e||Py,Yp.PerformanceNavigationTiming?e=0<(e=Yp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Yp.g&&Yp.g.Ka&&Yp.g.Ka()&&Yp.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Py=10;function Ry(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Oy(e){return e.h?1:e.g?e.g.size:0}function Dy(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ly(e,t){e.g?e.g.add(t):e.h=t}function My(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Fy(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return am(e.i)}Ny.prototype.cancel=function(){if(this.i=Fy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Uy,jy=class{stringify(e){return Yp.JSON.stringify(e,void 0)}parse(e){return Yp.JSON.parse(e,void 0)}};function Vy(){this.g=new jy}function zy(e,t,n){const r=n||"";try{oy(e,(function(e,n){let i=e;Jp(e)&&(i=rg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(AP){throw t.push(r+"type="+encodeURIComponent("_badmap")),AP}}function By(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function qy(e){this.l=e.ec||null,this.j=e.ob||!1}function Wy(e,t){eg.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ky,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}im(qy,Mg),qy.prototype.g=function(){return new Wy(this.l,this.j)},qy.prototype.i=(Uy={},function(){return Uy}),im(Wy,eg);var Ky=0;function Hy(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Gy(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Qy(e)}function Qy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Kp=Wy.prototype).open=function(e,t){if(this.readyState!=Ky)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Qy(this)},Kp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Yp).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Kp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gy(this)),this.readyState=Ky},Kp.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Qy(this)),this.g&&(this.readyState=3,Qy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Yp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hy(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Kp.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Gy(this):Qy(this),3==this.readyState&&Hy(this)}},Kp.Za=function(e){this.g&&(this.response=this.responseText=e,Gy(this))},Kp.Ya=function(e){this.g&&(this.response=e,Gy(this))},Kp.ka=function(){this.g&&Gy(this)},Kp.setRequestHeader=function(e,t){this.v.append(e,t)},Kp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Kp.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Wy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Yy=Yp.JSON.parse;function $y(e){eg.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Jy,this.L=this.M=!1}im($y,eg);var Jy="",Xy=/^https?$/i,Zy=["POST","PUT"];function ev(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,tv(e),rv(e)}function tv(e){e.F||(e.F=!0,tg(e,"complete"),tg(e,"error"))}function nv(e){if(e.h&&"undefined"!=typeof Qp&&(!e.C[1]||4!=sv(e)||2!=e.da()))if(e.v&&4==sv(e))gg(e.La,0,e);else if(tg(e,"readystatechange"),4==sv(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(ay)[1]||null;!i&&Yp.self&&Yp.self.location&&(i=Yp.self.location.protocol.slice(0,-1)),r=!Xy.test(i?i.toLowerCase():"")}n=r}if(n)tg(e,"complete"),tg(e,"success");else{e.m=6;try{var s=2<sv(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",tv(e)}}finally{rv(e)}}}function rv(e,t){if(e.g){iv(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||tg(e,"ready");try{n.onreadystatechange=r}catch(AP){}}}function iv(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Yp.clearTimeout(e.A),e.A=null)}function sv(e){return e.g?e.g.readyState:0}function ov(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Jy:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(f_){return null}}function av(e){let t="";return Lm(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function lv(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=av(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):fy(e,t,n))}function cv(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function uv(e){this.Ga=0,this.j=[],this.l=new Ig,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cv("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cv("baseRetryDelayMs",5e3,e),this.hb=cv("retryDelaySeedMs",1e4,e),this.eb=cv("forwardChannelMaxRetries",2,e),this.xa=cv("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ny(e&&e.concurrentRequestLimit),this.Ja=new Vy,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function hv(e){if(fv(e),3==e.H){var t=e.W++,n=cy(e.I);if(fy(n,"SID",e.K),fy(n,"RID",t),fy(n,"TYPE","terminate"),gv(e,n),(t=new Wg(e,e.l,t)).L=2,t.A=py(cy(n)),n=!1,Yp.navigator&&Yp.navigator.sendBeacon)try{n=Yp.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Yp.Image&&((new Image).src=t.A,n=!0),n||(t.g=xv(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ey(t)}kv(e)}function dv(e){e.g&&(wv(e),e.g.cancel(),e.g=null)}function fv(e){dv(e),e.u&&(Yp.clearTimeout(e.u),e.u=null),Sv(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Yp.clearTimeout(e.m),e.m=null)}function pv(e){if(!Ry(e.i)&&!e.m){e.m=!0;var t=e.Na;cg||dg(),ug||(cg(),ug=!0),hg.add(t,e),e.C=0}}function mv(e,t){var n;n=t?t.m:e.W++;const r=cy(e.I);fy(r,"SID",e.K),fy(r,"RID",n),fy(r,"AID",e.V),gv(e,r),e.o&&e.s&&lv(r,e.o,e.s),n=new Wg(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=yv(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ly(e.i,n),Yg(n,r,t)}function gv(e,t){e.na&&Lm(e.na,(function(e,n){fy(t,n,e)})),e.h&&oy({},(function(e,n){fy(t,n,e)}))}function yv(e,t,n){n=Math.min(e.j.length,n);var r=e.h?nm(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{zy(a,e,"req"+n+"_")}catch(Aw){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function vv(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;cg||dg(),ug||(cg(),ug=!0),hg.add(t,e),e.A=0}}function _v(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Og(nm(e.Ma,e),Ev(e,e.A)),e.A++,!0)}function wv(e){null!=e.B&&(Yp.clearTimeout(e.B),e.B=null)}function bv(e){e.g=new Wg(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=cy(e.wa);fy(t,"RID","rpc"),fy(t,"SID",e.K),fy(t,"AID",e.V),fy(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&fy(t,"TO",e.qa),fy(t,"TYPE","xmlhttp"),gv(e,t),e.o&&e.s&&lv(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=py(cy(t)),n.u=null,n.S=!0,$g(n,e)}function Sv(e){null!=e.v&&(Yp.clearTimeout(e.v),e.v=null)}function Iv(e,t){var n=null;if(e.g==t){Sv(e),wv(e),e.g=null;var r=2}else{if(!Dy(e.i,t))return;n=t.F,My(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;tg(r=Cg(),new Rg(r,n)),pv(e)}else vv(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Oy(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Og(nm(e.Na,e,t),Ev(e,e.C)),e.C++,!0))}(e,t)||2==r&&_v(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Tv(e,5);break;case 4:Tv(e,10);break;case 3:Tv(e,6);break;default:Tv(e,2)}}function Ev(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Tv(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=nm(e.pb,e);n||(n=new ly("//www.google.com/images/cleardot.gif"),Yp.location&&"http"==Yp.location.protocol||uy(n,"https"),py(n)),function(e,t){const n=new Ig;if(Yp.Image){const r=new Image;r.onload=rm(By,n,r,"TestLoadImage: loaded",!0,t),r.onerror=rm(By,n,r,"TestLoadImage: error",!1,t),r.onabort=rm(By,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=rm(By,n,r,"TestLoadImage: timeout",!1,t),Yp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Pg(2);e.H=0,e.h&&e.h.za(t),kv(e),fv(e)}function kv(e){if(e.H=0,e.ma=[],e.h){const t=Fy(e.i);0==t.length&&0==e.j.length||(lm(e.ma,t),lm(e.ma,e.j),e.i.i.length=0,am(e.j),e.j.length=0),e.h.ya()}}function Cv(e,t,n){var r=n instanceof ly?cy(n):new ly(n);if(""!=r.g)t&&(r.g=t+"."+r.g),hy(r,r.m);else{var i=Yp.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ly(null);r&&uy(s,r),t&&(s.g=t),i&&hy(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&fy(r,n,t),fy(r,"VER",e.ra),gv(e,r),r}function xv(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new $y(new qy({ob:n})):new $y(e.va)).Oa(e.J),t}function Av(){}function Nv(){if(vm&&!(10<=Number(xm)))throw Error("Environmental error: no available transport.")}function Pv(e,t){eg.call(this),this.g=new uv(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!hm(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hm(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Dv(this)}function Rv(e){zg.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ov(){Bg.call(this),this.status=1}function Dv(e){this.g=e}function Lv(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Mv(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Fv(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Kp=$y.prototype).Oa=function(e){this.M=e},Kp.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jg.g(),this.C=this.u?Fg(this.u):Fg(jg),this.g.onreadystatechange=nm(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void ev(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Yp.FormData&&e instanceof Yp.FormData,!(0<=om(Zy,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{iv(this),0<this.B&&((this.L=function(e){return vm&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nm(this.ua,this)):this.A=gg(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ev(this,s)}},Kp.ua=function(){"undefined"!=typeof Qp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tg(this,"timeout"),this.abort(8))},Kp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,tg(this,"complete"),tg(this,"abort"),rv(this))},Kp.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rv(this,!0)),$y.$.N.call(this)},Kp.La=function(){this.s||(this.G||this.v||this.l?nv(this):this.kb())},Kp.kb=function(){nv(this)},Kp.isActive=function(){return!!this.g},Kp.da=function(){try{return 2<sv(this)?this.g.status:-1}catch(Uy){return-1}},Kp.ja=function(){try{return this.g?this.g.responseText:""}catch(Uy){return""}},Kp.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Yy(t)}},Kp.Ia=function(){return this.m},Kp.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Kp=uv.prototype).ra=8,Kp.H=1,Kp.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Wg(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Mm(s),Um(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=yv(this,i,t),fy(n=cy(this.I),"RID",e),fy(n,"CVER",22),this.F&&fy(n,"X-HTTP-Session-Id",this.F),gv(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(av(s)))+"&"+t:this.o&&lv(n,this.o,s)),Ly(this.i,i),this.bb&&fy(n,"TYPE","init"),this.P?(fy(n,"$req",t),fy(n,"SID","null"),i.aa=!0,Yg(i,n,null)):Yg(i,n,t),this.H=2}}else 3==this.H&&(e?mv(this,e):0==this.j.length||Ry(this.i)||mv(this))},Kp.Ma=function(){if(this.u=null,bv(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Og(nm(this.jb,this),e)}},Kp.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Pg(10),dv(this),bv(this))},Kp.ib=function(){null!=this.v&&(this.v=null,dv(this),_v(this),Pg(19))},Kp.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Pg(2)):(this.l.info("Failed to ping google.com"),Pg(1))},Kp.isActive=function(){return!!this.h&&this.h.isActive(this)},(Kp=Av.prototype).Ba=function(){},Kp.Aa=function(){},Kp.za=function(){},Kp.ya=function(){},Kp.isActive=function(){return!0},Kp.Va=function(){},Nv.prototype.g=function(e,t){return new Pv(e,t)},im(Pv,eg),Pv.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Pg(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Cv(e,null,e.Y),pv(e)},Pv.prototype.close=function(){hv(this.g)},Pv.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=rg(e),e=n);t.j.push(new Ay(t.fb++,e)),3==t.H&&pv(t)},Pv.prototype.N=function(){this.g.h=null,delete this.j,hv(this.g),delete this.g,Pv.$.N.call(this)},im(Rv,zg),im(Ov,Bg),im(Dv,Av),Dv.prototype.Ba=function(){tg(this.g,"a")},Dv.prototype.Aa=function(e){tg(this.g,new Rv(e))},Dv.prototype.za=function(e){tg(this.g,new Ov)},Dv.prototype.ya=function(){tg(this.g,"b")},im(Lv,(function(){this.blockSize=-1})),Lv.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Lv.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Mv(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Mv(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Mv(this,r),i=0;break}}this.h=i,this.i+=t},Lv.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Uv={};function jv(e){return-128<=e&&128>e?function(e,t){var n=Uv;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Fv([0|e],0>e?-1:0)})):new Fv([0|e],0>e?-1:0)}function Vv(e){if(isNaN(e)||!isFinite(e))return Bv;if(0>e)return Gv(Vv(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=zv;return new Fv(t,0)}var zv=4294967296,Bv=jv(0),qv=jv(1),Wv=jv(16777216);function Kv(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Hv(e){return-1==e.h}function Gv(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Fv(n,~e.h).add(qv)}function Qv(e,t){return e.add(Gv(t))}function Yv(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function $v(e,t){this.g=e,this.h=t}function Jv(e,t){if(Kv(t))throw Error("division by zero");if(Kv(e))return new $v(Bv,Bv);if(Hv(e))return t=Jv(Gv(e),t),new $v(Gv(t.g),Gv(t.h));if(Hv(t))return t=Jv(e,Gv(t)),new $v(Gv(t.g),t.h);if(30<e.g.length){if(Hv(e)||Hv(t))throw Error("slowDivide_ only works with positive integers.");for(var n=qv,r=t;0>=r.X(e);)n=Xv(n),r=Xv(r);var i=Zv(n,1),s=Zv(r,1);for(r=Zv(r,2),n=Zv(n,2);!Kv(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Zv(r,1),n=Zv(n,1)}return t=Qv(e,i.R(t)),new $v(i,t)}for(i=Bv;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Vv(n)).R(t);Hv(o)||0<o.X(e);)o=(s=Vv(n-=r)).R(t);Kv(s)&&(s=qv),i=i.add(s),e=Qv(e,o)}return new $v(i,e)}function Xv(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Fv(n,e.h)}function Zv(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Fv(i,e.h)}(Kp=Fv.prototype).ea=function(){if(Hv(this))return-Gv(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:zv+r)*t,t*=zv}return e},Kp.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Kv(this))return"0";if(Hv(this))return"-"+Gv(this).toString(e);for(var t=Vv(Math.pow(e,6)),n=this,r="";;){var i=Jv(n,t).g,s=((0<(n=Qv(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Kv(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Kp.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Kp.X=function(e){return Hv(e=Qv(this,e))?-1:Kv(e)?0:1},Kp.abs=function(){return Hv(this)?Gv(this):this},Kp.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Fv(n,-2147483648&n[n.length-1]?-1:0)},Kp.R=function(e){if(Kv(this)||Kv(e))return Bv;if(Hv(this))return Hv(e)?Gv(this).R(Gv(e)):Gv(Gv(this).R(e));if(Hv(e))return Gv(this.R(Gv(e)));if(0>this.X(Wv)&&0>e.X(Wv))return Vv(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Yv(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Yv(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Yv(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Yv(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Fv(n,0)},Kp.gb=function(e){return Jv(this,e).h},Kp.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Fv(n,this.h&e.h)},Kp.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Fv(n,this.h|e.h)},Kp.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Fv(n,this.h^e.h)},Nv.prototype.createWebChannel=Nv.prototype.g,Pv.prototype.send=Pv.prototype.u,Pv.prototype.open=Pv.prototype.m,Pv.prototype.close=Pv.prototype.close,Dg.NO_ERROR=0,Dg.TIMEOUT=8,Dg.HTTP_ERROR=6,Lg.COMPLETE="complete",Ug.EventType=Vg,Vg.OPEN="a",Vg.CLOSE="b",Vg.ERROR="c",Vg.MESSAGE="d",eg.prototype.listen=eg.prototype.O,$y.prototype.listenOnce=$y.prototype.P,$y.prototype.getLastError=$y.prototype.Sa,$y.prototype.getLastErrorCode=$y.prototype.Ia,$y.prototype.getStatus=$y.prototype.da,$y.prototype.getResponseJson=$y.prototype.Wa,$y.prototype.getResponseText=$y.prototype.ja,$y.prototype.send=$y.prototype.ha,$y.prototype.setWithCredentials=$y.prototype.Oa,Lv.prototype.digest=Lv.prototype.l,Lv.prototype.reset=Lv.prototype.reset,Lv.prototype.update=Lv.prototype.j,Fv.prototype.add=Fv.prototype.add,Fv.prototype.multiply=Fv.prototype.R,Fv.prototype.modulo=Fv.prototype.gb,Fv.prototype.compare=Fv.prototype.X,Fv.prototype.toNumber=Fv.prototype.ea,Fv.prototype.toString=Fv.prototype.toString,Fv.prototype.getBits=Fv.prototype.D,Fv.fromNumber=Vv,Fv.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Gv(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Vv(Math.pow(n,8)),i=Bv,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Vv(Math.pow(n,o)),i=i.R(o).add(Vv(a))):i=(i=i.R(r)).add(Vv(a))}return i};var e_=Gp.createWebChannelTransport=function(){return new Nv},t_=Gp.getStatEventTarget=function(){return Cg()},n_=Gp.ErrorCode=Dg,r_=Gp.EventType=Lg,i_=Gp.Event=Tg,s_=Gp.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},o_=(Gp.FetchXmlHttpFactory=qy,Gp.WebChannel=Ug),a_=Gp.XhrIo=$y,l_=Gp.Md5=Lv,c_=Gp.Integer=Fv;const u_="@firebase/firestore";class h_{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}h_.UNAUTHENTICATED=new h_(null),h_.GOOGLE_CREDENTIALS=new h_("google-credentials-uid"),h_.FIRST_PARTY=new h_("first-party-uid"),h_.MOCK_USER=new h_("mock-user");let d_="10.9.0";const f_=new Wt("@firebase/firestore");function p_(){return f_.logLevel}function m_(e){if(f_.logLevel<=jt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(v_);f_.debug("Firestore (".concat(d_,"): ").concat(e),...i)}}function g_(e){if(f_.logLevel<=jt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(v_);f_.error("Firestore (".concat(d_,"): ").concat(e),...i)}}function y_(e){if(f_.logLevel<=jt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(v_);f_.warn("Firestore (".concat(d_,"): ").concat(e),...i)}}function v_(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function __(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(d_,") INTERNAL ASSERTION FAILED: ")+e;throw g_(t),new Error(t)}function w_(e,t){e||__()}function b_(e,t){return e}const S_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class I_ extends dt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class E_{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class T_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class k_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(h_.UNAUTHENTICATED)))}shutdown(){}}class C_{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class x_{constructor(e){this.t=e,this.currentUser=h_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new E_;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new E_,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{m_("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(m_("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new E_)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(m_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(w_("string"==typeof t.accessToken),new T_(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return w_(null===e||"string"==typeof e),new h_(e)}}class A_{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=h_.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class N_{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new A_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(h_.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class P_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R_{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&m_("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,m_("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{m_("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):m_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(w_("string"==typeof e.token),this.R=e.token,new P_(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function O_(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class D_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=O_(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function L_(e,t){return e<t?-1:e>t?1:0}function M_(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function F_(e){return e+"\0"}class U_{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new I_(S_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new I_(S_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new I_(S_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I_(S_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return U_.fromMillis(Date.now())}static fromDate(e){return U_.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new U_(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?L_(this.nanoseconds,e.nanoseconds):L_(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class j_{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j_(e)}static min(){return new j_(new U_(0,0))}static max(){return new j_(new U_(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class V_{constructor(e,t,n){void 0===t?t=0:t>e.length&&__(),void 0===n?n=e.length-t:n>e.length-t&&__(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===V_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof V_?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class z_ extends V_{construct(e,t,n){return new z_(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new I_(S_.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new z_(e)}static emptyPath(){return new z_([])}}const B_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class q_ extends V_{construct(e,t,n){return new q_(e,t,n)}static isValidIdentifier(e){return B_.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),q_.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new q_(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new I_(S_.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new I_(S_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new I_(S_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new I_(S_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new q_(t)}static emptyPath(){return new q_([])}}class W_{constructor(e){this.path=e}static fromPath(e){return new W_(z_.fromString(e))}static fromName(e){return new W_(z_.fromString(e).popFirst(5))}static empty(){return new W_(z_.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===z_.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return z_.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W_(new z_(e.slice()))}}class K_{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function H_(e){return e.fields.find((e=>2===e.kind))}function G_(e){return e.fields.filter((e=>2!==e.kind))}K_.UNKNOWN_ID=-1;class Q_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Y_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Y_(0,X_.min())}}function $_(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=j_.fromTimestamp(1e9===r?new U_(n+1,0):new U_(n,r));return new X_(i,W_.empty(),t)}function J_(e){return new X_(e.readTime,e.key,-1)}class X_{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new X_(j_.min(),W_.empty(),-1)}static max(){return new X_(j_.max(),W_.empty(),-1)}}function Z_(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=W_.comparator(e.documentKey,t.documentKey),0!==n?n:L_(e.largestBatchId,t.largestBatchId))}const ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nw(e){if(e.code!==S_.FAILED_PRECONDITION||e.message!==ew)throw e;m_("LocalStore","Unexpectedly lost primary lease")}class rw{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&__(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rw(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof rw?t:rw.resolve(t)}catch(e){return rw.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):rw.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):rw.reject(t)}static resolve(e){return new rw(((t,n)=>{t(e)}))}static reject(e){return new rw(((t,n)=>{n(e)}))}static waitFor(e){return new rw(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=rw.resolve(!1);for(const n of e)t=t.next((e=>e?rw.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new rw(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new rw(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class iw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new E_,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new aw(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=dw(t.target.error);this.V.reject(new aw(e,n))}}static open(e,t,n,r){try{return new iw(t,e.transaction(r,n))}catch(e){throw new aw(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(m_("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cw(t)}}class sw{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===sw.S(rt())&&g_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return m_("SimpleDb","Removing database:",e),uw(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ht())return!1;if(sw.C())return!0;const e=rt(),t=sw.S(e),n=0<t&&t<10,r=sw.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(m_("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new aw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new I_(S_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new I_(S_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new aw(e,r))},r.onupgradeneeded=e=>{m_("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{m_("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=iw.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),rw.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(m_("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ow{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return uw(this.k.delete())}}class aw extends I_{constructor(e,t){super(S_.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function lw(e){return"IndexedDbTransactionError"===e.name}class cw{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(m_("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(m_("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),uw(n)}add(e){return m_("SimpleDb","ADD",this.store.name,e,e),uw(this.store.add(e))}get(e){return uw(this.store.get(e)).next((t=>(void 0===t&&(t=null),m_("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return m_("SimpleDb","DELETE",this.store.name,e),uw(this.store.delete(e))}count(){return m_("SimpleDb","COUNT",this.store.name),uw(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new rw(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new rw(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){m_("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new rw(((n,r)=>{t.onerror=e=>{const t=dw(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new rw(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ow(i),o=t(i.primaryKey,i.value,s);if(o instanceof rw){const e=o.catch((e=>(s.done(),rw.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>rw.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uw(e){return new rw(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=dw(e.target.error);n(t)}}))}let hw=!1;function dw(e){const t=sw.S(rt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new I_("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return hw||(hw=!0,setTimeout((()=>{throw e}),0)),e}}return e}class fw{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){m_("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{m_("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){lw(e)?m_("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await nw(e)}await this.ee(6e4)}))}}class pw{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return rw.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return m_("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(m_("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=J_(t);Z_(r,n)>0&&(n=r)})),new X_(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class mw{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function gw(e){return null==e}function yw(e){return 0===e&&1/e==-1/0}function vw(e){return"number"==typeof e&&Number.isInteger(e)&&!yw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function _w(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=bw(t)),t=ww(e.get(n),t);return bw(t)}function ww(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function bw(e){return e+"\x01\x01"}function Sw(e){const t=e.length;if(w_(t>=2),2===t)return w_("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),z_.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&__(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:__()}s=t+2}return new z_(r)}mw._e=-1;const Iw=["userId","batchId"];function Ew(e,t){return[e,_w(t)]}function Tw(e,t,n){return[e,_w(t),n]}const kw={},Cw=["prefixPath","collectionGroup","readTime","documentId"],xw=["prefixPath","collectionGroup","documentId"],Aw=["collectionGroup","readTime","prefixPath","documentId"],Nw=["canonicalId","targetId"],Pw=["targetId","path"],Rw=["path","targetId"],Ow=["collectionId","parent"],Dw=["indexId","uid"],Lw=["uid","sequenceNumber"],Mw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fw=["indexId","uid","orderedDocumentKey"],Uw=["userId","collectionPath","documentId"],jw=["userId","collectionPath","largestBatchId"],Vw=["userId","collectionGroup","largestBatchId"],zw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bw=[...zw,"documentOverlays"],qw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ww=qw,Kw=[...Ww,"indexConfiguration","indexState","indexEntries"];class Hw extends tw{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Gw(e,t){const n=b_(e);return sw.M(n.ae,t)}function Qw(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yw(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $w(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Jw{constructor(e,t){this.comparator=e,this.root=t||Zw.EMPTY}insert(e,t){return new Jw(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zw.BLACK,null,null))}remove(e){return new Jw(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zw.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xw(this.root,e,this.comparator,!0)}}class Xw{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zw{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Zw.RED,this.left=null!=r?r:Zw.EMPTY,this.right=null!=i?i:Zw.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Zw(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Zw.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Zw.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zw.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw __();if(this.right.isRed())throw __();const e=this.left.check();if(e!==this.right.check())throw __();return e+(this.isRed()?0:1)}}Zw.EMPTY=null,Zw.RED=!0,Zw.BLACK=!1,Zw.EMPTY=new class{constructor(){this.size=0}get key(){throw __()}get value(){throw __()}get color(){throw __()}get left(){throw __()}get right(){throw __()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Zw(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class eb{constructor(e){this.comparator=e,this.data=new Jw(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tb(this.data.getIterator())}getIteratorFrom(e){return new tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof eb))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new eb(this.comparator);return t.data=e,t}}class tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nb(e){return e.hasNext()?e.getNext():void 0}class rb{constructor(e){this.fields=e,e.sort(q_.comparator)}static empty(){return new rb([])}unionWith(e){let t=new eb(q_.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new rb(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return M_(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ib extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class sb{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ib("Invalid base64 string: "+e):e}}(e);return new sb(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new sb(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return L_(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sb.EMPTY_BYTE_STRING=new sb("");const ob=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ab(e){if(w_(!!e),"string"==typeof e){let t=0;const n=ob.exec(e);if(w_(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:lb(e.seconds),nanos:lb(e.nanos)}}function lb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function cb(e){return"string"==typeof e?sb.fromBase64String(e):sb.fromUint8Array(e)}function ub(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hb(e){const t=e.mapValue.fields.__previous_value__;return ub(t)?hb(t):t}function db(e){const t=ab(e.mapValue.fields.__local_write_time__.timestampValue);return new U_(t.seconds,t.nanos)}class fb{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class pb{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pb("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pb&&e.projectId===this.projectId&&e.database===this.database}}const mb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gb={nullValue:"NULL_VALUE"};function yb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ub(e)?4:Pb(e)?9007199254740991:10:__()}function vb(e,t){if(e===t)return!0;const n=yb(e);if(n!==yb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return db(e).isEqual(db(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ab(e.timestampValue),r=ab(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return cb(e.bytesValue).isEqual(cb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return lb(e.geoPointValue.latitude)===lb(t.geoPointValue.latitude)&&lb(e.geoPointValue.longitude)===lb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return lb(e.integerValue)===lb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=lb(e.doubleValue),r=lb(t.doubleValue);return n===r?yw(n)===yw(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return M_(e.arrayValue.values||[],t.arrayValue.values||[],vb);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qw(n)!==Qw(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vb(n[i],r[i])))return!1;return!0}(e,t);default:return __()}}function _b(e,t){return void 0!==(e.values||[]).find((e=>vb(e,t)))}function wb(e,t){if(e===t)return 0;const n=yb(e),r=yb(t);if(n!==r)return L_(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return L_(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=lb(e.integerValue||e.doubleValue),r=lb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return bb(e.timestampValue,t.timestampValue);case 4:return bb(db(e),db(t));case 5:return L_(e.stringValue,t.stringValue);case 6:return function(e,t){const n=cb(e),r=cb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=L_(n[i],r[i]);if(0!==e)return e}return L_(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=L_(lb(e.latitude),lb(t.latitude));return 0!==n?n:L_(lb(e.longitude),lb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=wb(n[i],r[i]);if(e)return e}return L_(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===mb.mapValue&&t===mb.mapValue)return 0;if(e===mb.mapValue)return 1;if(t===mb.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=L_(r[o],s[o]);if(0!==e)return e;const t=wb(n[r[o]],i[s[o]]);if(0!==t)return t}return L_(r.length,s.length)}(e.mapValue,t.mapValue);default:throw __()}}function bb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return L_(e,t);const n=ab(e),r=ab(t),i=L_(n.seconds,r.seconds);return 0!==i?i:L_(n.nanos,r.nanos)}function Sb(e){return Ib(e)}function Ib(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ab(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return cb(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return W_.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ib(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ib(e.fields[i]));return n+"}"}(e.mapValue):__()}function Eb(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Tb(e){return!!e&&"integerValue"in e}function kb(e){return!!e&&"arrayValue"in e}function Cb(e){return!!e&&"nullValue"in e}function xb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ab(e){return!!e&&"mapValue"in e}function Nb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yw(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Nb(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Nb(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Pb(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Rb(e){return"nullValue"in e?gb:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Eb(pb.empty(),W_.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:__()}function Ob(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Eb(pb.empty(),W_.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?mb:__()}function Db(e,t){const n=wb(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Lb(e,t){const n=wb(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Mb{constructor(e){this.value=e}static empty(){return new Mb({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ab(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nb(t)}setAll(e){let t=q_.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Nb(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ab(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vb(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ab(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Yw(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Mb(Nb(this.value))}}function Fb(e){const t=[];return Yw(e.fields,((e,n)=>{const r=new q_([e]);if(Ab(n)){const e=Fb(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new rb(t)}class Ub{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ub(e,0,j_.min(),j_.min(),j_.min(),Mb.empty(),0)}static newFoundDocument(e,t,n,r){return new Ub(e,1,t,j_.min(),n,r,0)}static newNoDocument(e,t){return new Ub(e,2,t,j_.min(),j_.min(),Mb.empty(),0)}static newUnknownDocument(e,t){return new Ub(e,3,t,j_.min(),j_.min(),Mb.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(j_.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mb.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mb.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j_.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ub&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ub(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class jb{constructor(e,t){this.position=e,this.inclusive=t}}function Vb(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?W_.comparator(W_.fromName(o.referenceValue),n.key):wb(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function zb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vb(e.position[n],t.position[n]))return!1;return!0}class Bb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function qb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Wb{}class Kb extends Wb{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new tS(e,t,n):"array-contains"===t?new sS(e,n):"in"===t?new oS(e,n):"not-in"===t?new aS(e,n):"array-contains-any"===t?new lS(e,n):new Kb(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new nS(e,n):new rS(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wb(t,this.value)):null!==t&&yb(this.value)===yb(t)&&this.matchesComparison(wb(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return __()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hb extends Wb{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Hb(e,t)}matches(e){return Gb(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Gb(e){return"and"===e.op}function Qb(e){return"or"===e.op}function Yb(e){return $b(e)&&Gb(e)}function $b(e){for(const t of e.filters)if(t instanceof Hb)return!1;return!0}function Jb(e){if(e instanceof Kb)return e.field.canonicalString()+e.op.toString()+Sb(e.value);if(Yb(e))return e.filters.map((e=>Jb(e))).join(",");{const t=e.filters.map((e=>Jb(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Xb(e,t){return e instanceof Kb?function(e,t){return t instanceof Kb&&e.op===t.op&&e.field.isEqual(t.field)&&vb(e.value,t.value)}(e,t):e instanceof Hb?function(e,t){return t instanceof Hb&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Xb(n,t.filters[r])),!0)}(e,t):void __()}function Zb(e,t){const n=e.filters.concat(t);return Hb.create(n,e.op)}function eS(e){return e instanceof Kb?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Sb(e.value))}(e):e instanceof Hb?function(e){return e.op.toString()+" {"+e.getFilters().map(eS).join(" ,")+"}"}(e):"Filter"}class tS extends Kb{constructor(e,t,n){super(e,t,n),this.key=W_.fromName(n.referenceValue)}matches(e){const t=W_.comparator(e.key,this.key);return this.matchesComparison(t)}}class nS extends Kb{constructor(e,t){super(e,"in",t),this.keys=iS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class rS extends Kb{constructor(e,t){super(e,"not-in",t),this.keys=iS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function iS(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>W_.fromName(e.referenceValue)))}class sS extends Kb{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kb(t)&&_b(t.arrayValue,this.value)}}class oS extends Kb{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_b(this.value.arrayValue,t)}}class aS extends Kb{constructor(e,t){super(e,"not-in",t)}matches(e){if(_b(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_b(this.value.arrayValue,t)}}class lS extends Kb{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kb(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_b(this.value.arrayValue,e)))}}class cS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function uS(e){return new cS(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function hS(e){const t=b_(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Jb(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),gw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Sb(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Sb(e))).join(",")),t.ce=e}return t.ce}function dS(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Xb(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zb(e.startAt,t.startAt)&&zb(e.endAt,t.endAt)}function fS(e){return W_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function pS(e,t){return e.filters.filter((e=>e instanceof Kb&&e.field.isEqual(t)))}function mS(e,t,n){let r=gb,i=!0;for(const s of pS(e,t)){let e=gb,t=!0;switch(s.op){case"<":case"<=":e=Rb(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=gb}Db({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Db({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function gS(e,t,n){let r=mb,i=!0;for(const s of pS(e,t)){let e=mb,t=!0;switch(s.op){case">=":case">":e=Ob(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=mb}Lb({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Lb({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class yS{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function vS(e,t,n,r,i,s,o,a){return new yS(e,t,n,r,i,s,o,a)}function _S(e){return new yS(e)}function wS(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bS(e){return null!==e.collectionGroup}function SS(e){const t=b_(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new eb(q_.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Bb(r,n))})),e.has(q_.keyField().canonicalString())||t.le.push(new Bb(q_.keyField(),n))}return t.le}function IS(e){const t=b_(e);return t.he||(t.he=ES(t,SS(e))),t.he}function ES(e,t){if("F"===e.limitType)return uS(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Bb(e.field,t)}));const n=e.endAt?new jb(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new jb(e.startAt.position,e.startAt.inclusive):null;return uS(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function TS(e,t){const n=e.filters.concat([t]);return new yS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function kS(e,t,n){return new yS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function CS(e,t){return dS(IS(e),IS(t))&&e.limitType===t.limitType}function xS(e){return"".concat(hS(IS(e)),"|lt:").concat(e.limitType)}function AS(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>eS(e))).join(", "),"]")),gw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Sb(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Sb(e))).join(",")),"Target(".concat(t,")")}(IS(e)),"; limitType=").concat(e.limitType,")")}function NS(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):W_.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of SS(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Vb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,SS(e),t))&&!(e.endAt&&!function(e,t,n){const r=Vb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,SS(e),t))}(e,t)}function PS(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function RS(e){return(t,n)=>{let r=!1;for(const i of SS(e)){const e=OS(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function OS(e,t,n){const r=e.field.isKeyField()?W_.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wb(r,i):__()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return __()}}class DS{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yw(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}const LS=new Jw(W_.comparator);function MS(){return LS}const FS=new Jw(W_.comparator);function US(){let e=FS;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function jS(e){let t=FS;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function VS(){return BS()}function zS(){return BS()}function BS(){return new DS((e=>e.toString()),((e,t)=>e.isEqual(t)))}const qS=new Jw(W_.comparator),WS=new eb(W_.comparator);function KS(){let e=WS;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const HS=new eb(L_);function GS(){return HS}function QS(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yw(t)?"-0":t}}function YS(e){return{integerValue:""+e}}function $S(e,t){return vw(t)?YS(t):QS(e,t)}class JS{constructor(){this._=void 0}}function XS(e,t,n){return e instanceof tI?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ub(t)&&(t=hb(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof nI?rI(e,t):e instanceof iI?sI(e,t):function(e,t){const n=eI(e,t),r=aI(n)+aI(e.Ie);return Tb(n)&&Tb(e.Ie)?YS(r):QS(e.serializer,r)}(e,t)}function ZS(e,t,n){return e instanceof nI?rI(e,t):e instanceof iI?sI(e,t):n}function eI(e,t){return e instanceof oI?function(e){return Tb(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class tI extends JS{}class nI extends JS{constructor(e){super(),this.elements=e}}function rI(e,t){const n=lI(t);for(const r of e.elements)n.some((e=>vb(e,r)))||n.push(r);return{arrayValue:{values:n}}}class iI extends JS{constructor(e){super(),this.elements=e}}function sI(e,t){let n=lI(t);for(const r of e.elements)n=n.filter((e=>!vb(e,r)));return{arrayValue:{values:n}}}class oI extends JS{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function aI(e){return lb(e.integerValue||e.doubleValue)}function lI(e){return kb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class cI{constructor(e,t){this.field=e,this.transform=t}}class uI{constructor(e,t){this.version=e,this.transformResults=t}}class hI{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hI}static exists(e){return new hI(void 0,e)}static updateTime(e){return new hI(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dI(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class fI{}function pI(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new EI(e.key,hI.none()):new _I(e.key,e.data,hI.none());{const n=e.data,r=Mb.empty();let i=new eb(q_.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new wI(e.key,r,new rb(i.toArray()),hI.none())}}function mI(e,t,n){e instanceof _I?function(e,t,n){const r=e.value.clone(),i=SI(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof wI?function(e,t,n){if(!dI(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=SI(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(bI(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function gI(e,t,n,r){return e instanceof _I?function(e,t,n,r){if(!dI(e.precondition,t))return n;const i=e.value.clone(),s=II(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof wI?function(e,t,n,r){if(!dI(e.precondition,t))return n;const i=II(e.fieldTransforms,r,t),s=t.data;return s.setAll(bI(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return dI(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function yI(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=eI(r.transform,e||null);null!=i&&(null===n&&(n=Mb.empty()),n.set(r.field,i))}return n||null}function vI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&M_(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof nI&&t instanceof nI||e instanceof iI&&t instanceof iI?M_(e.elements,t.elements,vb):e instanceof oI&&t instanceof oI?vb(e.Ie,t.Ie):e instanceof tI&&t instanceof tI}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _I extends fI{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wI extends fI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bI(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function SI(e,t,n){const r=new Map;w_(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,ZS(o,a,n[i]))}return r}function II(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,XS(e,s,t))}return r}class EI extends fI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TI extends fI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kI{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&mI(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gI(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gI(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=zS();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=pI(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(j_.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),KS())}isEqual(e){return this.batchId===e.batchId&&M_(this.mutations,e.mutations,((e,t)=>vI(e,t)))&&M_(this.baseMutations,e.baseMutations,((e,t)=>vI(e,t)))}}class CI{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){w_(e.mutations.length===n.length);let r=qS;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new CI(e,t,n,r)}}class xI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class AI{constructor(e,t){this.count=e,this.unchangedNames=t}}var NI,PI;function RI(e){switch(e){default:return __();case S_.CANCELLED:case S_.UNKNOWN:case S_.DEADLINE_EXCEEDED:case S_.RESOURCE_EXHAUSTED:case S_.INTERNAL:case S_.UNAVAILABLE:case S_.UNAUTHENTICATED:return!1;case S_.INVALID_ARGUMENT:case S_.NOT_FOUND:case S_.ALREADY_EXISTS:case S_.PERMISSION_DENIED:case S_.FAILED_PRECONDITION:case S_.ABORTED:case S_.OUT_OF_RANGE:case S_.UNIMPLEMENTED:case S_.DATA_LOSS:return!0}}function OI(e){if(void 0===e)return g_("GRPC error has no .code"),S_.UNKNOWN;switch(e){case NI.OK:return S_.OK;case NI.CANCELLED:return S_.CANCELLED;case NI.UNKNOWN:return S_.UNKNOWN;case NI.DEADLINE_EXCEEDED:return S_.DEADLINE_EXCEEDED;case NI.RESOURCE_EXHAUSTED:return S_.RESOURCE_EXHAUSTED;case NI.INTERNAL:return S_.INTERNAL;case NI.UNAVAILABLE:return S_.UNAVAILABLE;case NI.UNAUTHENTICATED:return S_.UNAUTHENTICATED;case NI.INVALID_ARGUMENT:return S_.INVALID_ARGUMENT;case NI.NOT_FOUND:return S_.NOT_FOUND;case NI.ALREADY_EXISTS:return S_.ALREADY_EXISTS;case NI.PERMISSION_DENIED:return S_.PERMISSION_DENIED;case NI.FAILED_PRECONDITION:return S_.FAILED_PRECONDITION;case NI.ABORTED:return S_.ABORTED;case NI.OUT_OF_RANGE:return S_.OUT_OF_RANGE;case NI.UNIMPLEMENTED:return S_.UNIMPLEMENTED;case NI.DATA_LOSS:return S_.DATA_LOSS;default:return __()}}(PI=NI||(NI={}))[PI.OK=0]="OK",PI[PI.CANCELLED=1]="CANCELLED",PI[PI.UNKNOWN=2]="UNKNOWN",PI[PI.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",PI[PI.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",PI[PI.NOT_FOUND=5]="NOT_FOUND",PI[PI.ALREADY_EXISTS=6]="ALREADY_EXISTS",PI[PI.PERMISSION_DENIED=7]="PERMISSION_DENIED",PI[PI.UNAUTHENTICATED=16]="UNAUTHENTICATED",PI[PI.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",PI[PI.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",PI[PI.ABORTED=10]="ABORTED",PI[PI.OUT_OF_RANGE=11]="OUT_OF_RANGE",PI[PI.UNIMPLEMENTED=12]="UNIMPLEMENTED",PI[PI.INTERNAL=13]="INTERNAL",PI[PI.UNAVAILABLE=14]="UNAVAILABLE",PI[PI.DATA_LOSS=15]="DATA_LOSS";let DI=null;function LI(){return new TextEncoder}const MI=new c_([4294967295,4294967295],0);function FI(e){const t=LI().encode(e),n=new l_;return n.update(t),new Uint8Array(n.digest())}function UI(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new c_([n,r],0),new c_([i,s],0)]}class jI{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new VI("Invalid padding: ".concat(t));if(n<0)throw new VI("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new VI("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new VI("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=c_.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(c_.fromNumber(n)));return 1===r.compare(MI)&&(r=new c_([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=FI(e),[n,r]=UI(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new jI(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=FI(e),[n,r]=UI(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class VI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class zI{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,BI.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new zI(j_.min(),r,new Jw(L_),MS(),KS())}}class BI{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new BI(n,t,KS(),KS(),KS())}}class qI{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class WI{constructor(e,t){this.targetId=e,this.fe=t}}class KI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sb.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class HI{constructor(){this.ge=0,this.pe=YI(),this.ye=sb.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=KS(),t=KS(),n=KS();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:__()}})),new BI(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=YI()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,w_(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class GI{constructor(e){this.Be=e,this.ke=new Map,this.qe=MS(),this.Qe=QI(),this.Ke=new Jw(L_)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:__()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(fS(i))if(0===n){const e=new W_(i.path);this.We(t,e,Ub.newNoDocument(e,j_.min()))}else w_(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==DI||DI.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=cb(n).toUint8Array()}catch(e){if(e instanceof ib)return y_("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new jI(s,r,i)}catch(e){return y_(e instanceof VI?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&fS(i.target)){const t=new W_(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Ub.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=KS();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new zI(e,t,this.Ke,this.qe,n);return this.qe=MS(),this.Qe=QI(),this.Ke=new Jw(L_),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new HI,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new eb(L_),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||m_("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new HI),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function QI(){return new Jw(W_.comparator)}function YI(){return new Jw(W_.comparator)}const $I={asc:"ASCENDING",desc:"DESCENDING"},JI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XI={and:"AND",or:"OR"};class ZI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eE(e,t){return e.useProto3Json||gw(t)?t:{value:t}}function tE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function nE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rE(e,t){return tE(e,t.toTimestamp())}function iE(e){return w_(!!e),j_.fromTimestamp(function(e){const t=ab(e);return new U_(t.seconds,t.nanos)}(e))}function sE(e,t){return oE(e,t).canonicalString()}function oE(e,t){const n=function(e){return new z_(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function aE(e){const t=z_.fromString(e);return w_(AE(t)),t}function lE(e,t){return sE(e.databaseId,t.path)}function cE(e,t){const n=aE(t);if(n.get(1)!==e.databaseId.projectId)throw new I_(S_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new I_(S_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new W_(fE(n))}function uE(e,t){return sE(e.databaseId,t)}function hE(e){const t=aE(e);return 4===t.length?z_.emptyPath():fE(t)}function dE(e){return new z_(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fE(e){return w_(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pE(e,t,n){return{name:lE(e,t),fields:n.value.mapValue.fields}}function mE(e,t,n){const r=cE(e,t.name),i=iE(t.updateTime),s=t.createTime?iE(t.createTime):j_.min(),o=new Mb({mapValue:{fields:t.fields}}),a=Ub.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function gE(e,t){let n;if(t instanceof _I)n={update:pE(e,t.key,t.value)};else if(t instanceof EI)n={delete:lE(e,t.key)};else if(t instanceof wI)n={update:pE(e,t.key,t.data),updateMask:xE(t.fieldMask)};else{if(!(t instanceof TI))return __();n={verify:lE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof tI)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nI)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof iI)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof oI)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw __()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:__()}(e,t.precondition)),n}function yE(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?hI.updateTime(iE(e.updateTime)):void 0!==e.exists?hI.exists(e.exists):hI.none()}(t.currentDocument):hI.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)w_("REQUEST_TIME"===t.setToServerValue),n=new tI;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new nI(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new iI(e)}else"increment"in t?n=new oI(e,t.increment):__();const r=q_.fromServerFormat(t.fieldPath);return new cI(r,n)}(e,t))):[];if(t.update){t.update.name;const i=cE(e,t.update.name),s=new Mb({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new rb(t.map((e=>q_.fromServerFormat(e))))}(t.updateMask);return new wI(i,s,e,n,r)}return new _I(i,s,n,r)}if(t.delete){const r=cE(e,t.delete);return new EI(r,n)}if(t.verify){const r=cE(e,t.verify);return new TI(r,n)}return __()}function vE(e,t){return{documents:[uE(e,t.path)]}}function _E(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uE(e,i);const s=function(e){if(0!==e.length)return CE(Hb.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:TE(e.field),direction:SE(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=eE(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function wE(e){let t=hE(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){w_(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=bE(e);return t instanceof Hb&&Yb(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Bb(kE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,gw(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new jb(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new jb(n,t)}(n.endAt)),vS(t,i,o,s,a,"F",l,c)}function bE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=kE(e.unaryFilter.field);return Kb.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=kE(e.unaryFilter.field);return Kb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=kE(e.unaryFilter.field);return Kb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=kE(e.unaryFilter.field);return Kb.create(i,"!=",{nullValue:"NULL_VALUE"});default:return __()}}(e):void 0!==e.fieldFilter?function(e){return Kb.create(kE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return __()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Hb.create(e.compositeFilter.filters.map((e=>bE(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return __()}}(e.compositeFilter.op))}(e):__()}function SE(e){return $I[e]}function IE(e){return JI[e]}function EE(e){return XI[e]}function TE(e){return{fieldPath:e.canonicalString()}}function kE(e){return q_.fromServerFormat(e.fieldPath)}function CE(e){return e instanceof Kb?function(e){if("=="===e.op){if(xb(e.value))return{unaryFilter:{field:TE(e.field),op:"IS_NAN"}};if(Cb(e.value))return{unaryFilter:{field:TE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xb(e.value))return{unaryFilter:{field:TE(e.field),op:"IS_NOT_NAN"}};if(Cb(e.value))return{unaryFilter:{field:TE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:TE(e.field),op:IE(e.op),value:e.value}}}(e):e instanceof Hb?function(e){const t=e.getFilters().map((e=>CE(e)));return 1===t.length?t[0]:{compositeFilter:{op:EE(e.op),filters:t}}}(e):__()}function xE(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function AE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class NE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j_.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j_.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:sb.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new NE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new NE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new NE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new NE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class PE{constructor(e){this.ct=e}}function RE(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:OE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:lE(e,t.key),fields:t.data.value.mapValue.fields,updateTime:tE(e,t.version.toTimestamp()),createTime:tE(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:DE(t.version)};else{if(!t.isUnknownDocument())return __();r.unknownDocument={path:n.path.toArray(),version:DE(t.version)}}return r}function OE(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function DE(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function LE(e){const t=new U_(e.seconds,e.nanoseconds);return j_.fromTimestamp(t)}function ME(e,t){const n=(t.baseMutations||[]).map((t=>yE(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>yE(e.ct,t))),i=U_.fromMillis(t.localWriteTimeMs);return new kI(t.batchId,i,n,r)}function FE(e){const t=LE(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?LE(e.lastLimboFreeSnapshotVersion):j_.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return w_(1===e.documents.length),IS(_S(hE(e.documents[0])))}(e.query):function(e){return IS(wE(e))}(e.query),new NE(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,sb.fromBase64String(e.resumeToken))}function UE(e,t){const n=DE(t.snapshotVersion),r=DE(t.lastLimboFreeSnapshotVersion);let i;i=fS(t.target)?vE(e.ct,t.target):_E(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hS(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jE(e){const t=wE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?kS(t,t.limit,"L"):t}function VE(e,t){return new xI(t.largestBatchId,yE(e.ct,t.overlayMutation))}function zE(e,t){const n=t.path.lastSegment();return[e,_w(t.path.popLast()),n]}function BE(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:DE(r.readTime),documentKey:_w(r.documentKey.path),largestBatchId:r.largestBatchId}}class qE{getBundleMetadata(e,t){return WE(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:LE(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return WE(e).put(function(e){return{bundleId:e.id,createTime:DE(iE(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return KE(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:jE(e.bundledQuery),readTime:LE(e.readTime)}}(e)}))}saveNamedQuery(e,t){return KE(e).put(function(e){return{name:e.name,readTime:DE(iE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function WE(e){return Gw(e,"bundles")}function KE(e){return Gw(e,"namedQueries")}class HE{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new HE(e,n)}getOverlay(e,t){return GE(e).get(zE(this.userId,t)).next((e=>e?VE(this.serializer,e):null))}getOverlays(e,t){const n=VS();return rw.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new xI(t,i);r.push(this.ht(e,s))})),rw.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(_w(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(GE(e).H("collectionPathOverlayIndex",r))})),rw.waitFor(i)}getOverlaysForCollection(e,t,n){const r=VS(),i=_w(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return GE(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=VE(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=VS();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return GE(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=VE(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return GE(e).put(function(e,t,n){const[r,i,s]=zE(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:gE(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function GE(e){return Gw(e,"documentOverlays")}class QE{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(lb(e.integerValue));else if("doubleValue"in e){const n=lb(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),yw(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(cb(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Pb(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):__()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),W_.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function YE(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function $E(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=YE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}QE.bt=new QE;class JE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=$E(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=$E(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class XE{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class ZE{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class eT{constructor(){this.Gt=new JE,this.zt=new XE(this.Gt),this.jt=new ZE(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class tT{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new tT(this.indexId,this.documentKey,this.arrayValue,n)}}function nT(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=rT(e.arrayValue,t.arrayValue),0!==n?n:(n=rT(e.directionalValue,t.directionalValue),0!==n?n:W_.comparator(e.documentKey,t.documentKey)))}function rT(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class iT{constructor(e){this.Yt=new eb(((e,t)=>q_.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(w_(e.collectionGroup===this.collectionId),this.en)return!1;const t=H_(e);if(void 0!==t&&!this.nn(t))return!1;const n=G_(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new eb(q_.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Q_(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Q_(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Q_(n.field,"asc"===n.dir?0:1)));return new K_(K_.UNKNOWN_ID,this.collectionId,t,Y_.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function sT(e){var t,n;if(w_(e instanceof Kb||e instanceof Hb),e instanceof Kb){if(e instanceof oS){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Kb.create(e.field,"==",t))))||[];return Hb.create(r,"or")}return e}const r=e.filters.map((e=>sT(e)));return Hb.create(r,e.op)}function oT(e){if(0===e.getFilters().length)return[];const t=uT(sT(e));return w_(cT(t)),aT(t)||lT(t)?[t]:t.getFilters()}function aT(e){return e instanceof Kb}function lT(e){return e instanceof Hb&&Yb(e)}function cT(e){return aT(e)||lT(e)||function(e){if(e instanceof Hb&&Qb(e)){for(const t of e.getFilters())if(!aT(t)&&!lT(t))return!1;return!0}return!1}(e)}function uT(e){if(w_(e instanceof Kb||e instanceof Hb),e instanceof Kb)return e;if(1===e.filters.length)return uT(e.filters[0]);const t=e.filters.map((e=>uT(e)));let n=Hb.create(t,e.op);return n=fT(n),cT(n)?n:(w_(n instanceof Hb),w_(Gb(n)),w_(n.filters.length>1),n.filters.reduce(((e,t)=>hT(e,t))))}function hT(e,t){let n;return w_(e instanceof Kb||e instanceof Hb),w_(t instanceof Kb||t instanceof Hb),n=e instanceof Kb?t instanceof Kb?function(e,t){return Hb.create([e,t],"and")}(e,t):dT(e,t):t instanceof Kb?dT(t,e):function(e,t){if(w_(e.filters.length>0&&t.filters.length>0),Gb(e)&&Gb(t))return Zb(e,t.getFilters());const n=Qb(e)?e:t,r=Qb(e)?t:e,i=n.filters.map((e=>hT(e,r)));return Hb.create(i,"or")}(e,t),fT(n)}function dT(e,t){if(Gb(t))return Zb(t,e.getFilters());{const n=t.filters.map((t=>hT(e,t)));return Hb.create(n,"or")}}function fT(e){if(w_(e instanceof Kb||e instanceof Hb),e instanceof Kb)return e;const t=e.getFilters();if(1===t.length)return fT(t[0]);if($b(e))return e;const n=t.map((e=>fT(e))),r=[];return n.forEach((t=>{t instanceof Kb?r.push(t):t instanceof Hb&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Hb.create(r,e.op)}class pT{constructor(){this._n=new mT}addToCollectionParentIndex(e,t){return this._n.add(t),rw.resolve()}getCollectionParents(e,t){return rw.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return rw.resolve()}deleteFieldIndex(e,t){return rw.resolve()}deleteAllFieldIndexes(e){return rw.resolve()}createTargetIndexes(e,t){return rw.resolve()}getDocumentsMatchingTarget(e,t){return rw.resolve(null)}getIndexType(e,t){return rw.resolve(0)}getFieldIndexes(e,t){return rw.resolve([])}getNextCollectionGroupToUpdate(e){return rw.resolve(null)}getMinOffset(e,t){return rw.resolve(X_.min())}getMinOffsetFromCollectionGroup(e,t){return rw.resolve(X_.min())}updateCollectionGroup(e,t,n){return rw.resolve()}updateIndexEntries(e,t){return rw.resolve()}}class mT{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new eb(z_.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new eb(z_.comparator)).toArray()}}const gT=new Uint8Array(0);class yT{constructor(e,t){this.databaseId=t,this.an=new mT,this.un=new DS((e=>hS(e)),((e,t)=>dS(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:_w(r)};return vT(e).put(i)}return rw.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[F_(t),""],!1,!0);return vT(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Sw(r.parent))}return n}))}addFieldIndex(e,t){const n=wT(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=bT(e);return i.next((e=>{n.put(BE(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=wT(e),r=bT(e),i=_T(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=wT(e),n=_T(e),r=bT(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return rw.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new iT(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=_T(e);let r=!0;const i=new Map;return rw.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=KS();const r=[];return rw.forEach(i,((i,s)=>{m_("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(hS(t)));const o=function(e,t){const n=H_(t);if(void 0===n)return null;for(const r of pS(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of G_(t))for(const t of pS(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of G_(t)){const t=0===i.kind?mS(e,i.fieldPath,e.startAt):gS(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new jb(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of G_(t)){const t=0===i.kind?gS(e,i.fieldPath,e.endAt):mS(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new jb(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return rw.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=W_.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return rw.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:oT(Hb.create(e.filters,"and")).map((t=>uS(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):gT,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new tT(e,W_.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new tT(e,W_.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new iT(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return rw.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new eb(q_.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new eT;for(const r of G_(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);QE.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new eT;return QE.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new eT;return QE.bt.Pt(Eb(this.databaseId,t),n.Ht(function(e){const t=G_(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new eT);let i=0;for(const s of G_(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&kb(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);QE.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new eT;n.seed(e.Wt()),QE.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Kb&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=wT(e),r=bT(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return rw.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Y_(t.sequenceNumber,new X_(LE(t.readTime),new W_(Sw(t.documentKey)),t.largestBatchId)):Y_.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Q_(q_.fromServerFormat(t),n)}));return new K_(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:L_(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=wT(e),i=bT(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>rw.forEach(t,(t=>i.put(BE(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return rw.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?rw.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),rw.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?rw.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return _T(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return _T(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=_T(e);let i=new eb(nT);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new tT(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new eb(nT);const r=this.An(t,e);if(null==r)return n;const i=H_(t);if(null!=i){const s=e.data.field(i.fieldPath);if(kb(s))for(const i of s.arrayValue.values||[])n=n.add(new tT(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new tT(t.indexId,e.key,gT,r));return n}wn(e,t,n,r,i){m_("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=nb(s),l=nb(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=nb(o)):t?(i(a),a=nb(s)):(a=nb(s),l=nb(o))}}(r,i,nT,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),rw.waitFor(s)}gn(e){let t=1;return bT(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>nT(e,t))).filter(((e,t,n)=>!t||0!==nT(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=nT(s,e),i=nT(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,gT,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,gT,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return nT(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ST)}getMinOffset(e,t){return rw.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||__())))).next(ST)}}function vT(e){return Gw(e,"collectionParents")}function _T(e){return Gw(e,"indexEntries")}function wT(e){return Gw(e,"indexConfiguration")}function bT(e){return Gw(e,"indexState")}function ST(e){w_(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Z_(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new X_(t.readTime,t.documentKey,n)}const IT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ET{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ET(e,ET.DEFAULT_COLLECTION_PERCENTILE,ET.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function TT(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{w_(1===a)})));const c=[];for(const u of n.mutations){const e=Tw(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return rw.waitFor(s).next((()=>c))}function kT(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw __();t=e.noDocument}return JSON.stringify(t).length}ET.DEFAULT_COLLECTION_PERCENTILE=10,ET.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ET.DEFAULT=new ET(41943040,ET.DEFAULT_COLLECTION_PERCENTILE,ET.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ET.DISABLED=new ET(-1,0,0);class CT{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){w_(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new CT(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return AT(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=NT(e),s=AT(e);return s.add({}).next((o=>{w_("number"==typeof o);const a=new kI(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>gE(e.ct,t))),i=n.mutations.map((t=>gE(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new eb(((e,t)=>L_(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Tw(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,kw))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),rw.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return AT(e).get(t).next((e=>e?(w_(e.userId===this.userId),ME(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?rw.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return AT(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(w_(t.batchId>=n),i=ME(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return AT(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return AT(e).W("userMutationsIndex",t).next((e=>e.map((e=>ME(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ew(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return NT(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Sw(a);if(o===this.userId&&t.path.isEqual(c))return AT(e).get(l).next((e=>{if(!e)throw __();w_(e.userId===this.userId),i.push(ME(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new eb(L_);const r=[];return t.forEach((t=>{const i=Ew(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=NT(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Sw(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),rw.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ew(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new eb(L_);return NT(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=Sw(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(AT(e).get(t).next((e=>{if(null===e)throw __();w_(e.userId===this.userId),n.push(ME(this.serializer,e))})))})),rw.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return TT(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),rw.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return rw.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return NT(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Sw(e[1]);r.push(t)}else n.done()})).next((()=>{w_(0===r.length)}))}))}containsKey(e,t){return xT(e,this.userId,t)}xn(e){return PT(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function xT(e,t,n){const r=Ew(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return NT(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function AT(e){return Gw(e,"mutations")}function NT(e){return Gw(e,"documentMutations")}function PT(e){return Gw(e,"mutationQueues")}class RT{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new RT(0)}static Ln(){return new RT(-1)}}class OT{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new RT(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>j_.fromTimestamp(new U_(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>DT(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(w_(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return DT(e).Y(((s,o)=>{const a=FE(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>rw.waitFor(i))).next((()=>r))}forEachTarget(e,t){return DT(e).Y(((e,n)=>{const r=FE(n);t(r)}))}Bn(e){return LT(e).get("targetGlobalKey").next((e=>(w_(null!==e),e)))}kn(e,t){return LT(e).put("targetGlobalKey",t)}qn(e,t){return DT(e).put(UE(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=hS(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return DT(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=FE(n);dS(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=MT(e);return t.forEach((t=>{const s=_w(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),rw.waitFor(r)}removeMatchingKeys(e,t,n){const r=MT(e);return rw.forEach(t,(t=>{const i=_w(t.path);return rw.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=MT(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=MT(e);let i=KS();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Sw(e[1]),s=new W_(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=_w(t.path),r=IDBKeyRange.bound([n],[F_(n)],!1,!0);let i=0;return MT(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return DT(e).get(t).next((e=>e?FE(e):null))}}function DT(e){return Gw(e,"targets")}function LT(e){return Gw(e,"targetGlobal")}function MT(e){return Gw(e,"targetDocuments")}function FT(e,t){let[n,r]=e,[i,s]=t;const o=L_(n,i);return 0===o?L_(r,s):o}class UT{constructor(e){this.Kn=e,this.buffer=new eb(FT),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();FT(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jT{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){m_("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){lw(e)?m_("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await nw(e)}await this.zn(3e5)}))}}class VT{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return rw.resolve(mw._e);const n=new UT(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(m_("LruGarbageCollector","Garbage collection skipped; disabled"),rw.resolve(IT)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(m_("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),IT):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(m_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),p_()<=jt.DEBUG&&m_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),rw.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function zT(e,t){return new VT(e,t)}class BT{constructor(e,t){this.db=e,this.garbageCollector=zT(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return qT(e,n)}removeReference(e,t,n){return qT(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return qT(e,t)}er(e,t){return function(e,t){let n=!1;return PT(e).Z((r=>xT(e,r,t).next((e=>(e&&(n=!0),rw.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,j_.min()),MT(e).delete(function(e){return[0,_w(e.path)]}(s)))))}));r.push(t)}})).next((()=>rw.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return qT(e,t)}Xn(e,t){const n=MT(e);let r,i=mw._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==mw._e&&t(new W_(Sw(r)),i),i=l,r=a):i=mw._e})).next((()=>{i!==mw._e&&t(new W_(Sw(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qT(e,t){return MT(e).put(function(e,t){return{targetId:0,path:_w(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class WT{constructor(){this.changes=new DS((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ub.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?rw.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KT{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return YT(e).put(n)}removeEntry(e,t,n){return YT(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],OE(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Ub.newInvalidDocument(t);return YT(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only($T(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Ub.newInvalidDocument(t)};return YT(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only($T(t))},((e,r)=>{n={document:this.nr(t,r),size:kT(r)}})).next((()=>n))}getEntries(e,t){let n=MS();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=MS(),r=new Jw(W_.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,kT(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return rw.resolve();let r=new eb(XT);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound($T(r.first()),$T(r.last())),s=r.getIterator();let o=s.getNext();return YT(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=W_.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&XT(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U($T(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),OE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return YT(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=MS();for(const i of e){const e=this.nr(W_.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(NS(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=MS();const s=JT(t,n),o=JT(t,X_.max());return YT(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(W_.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new GT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return QT(e).get("remoteDocumentGlobalKey").next((e=>(w_(!!e),e)))}tr(e,t){return QT(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=mE(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=W_.fromSegments(t.noDocument.path),r=LE(t.noDocument.readTime);n=Ub.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return __();{const e=W_.fromSegments(t.unknownDocument.path),r=LE(t.unknownDocument.version);n=Ub.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new U_(e[0],e[1]);return j_.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(j_.min()))return e}return Ub.newInvalidDocument(e)}}function HT(e){return new KT(e)}class GT extends WT{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new DS((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new eb(((e,t)=>L_(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=RE(this.ar.serializer,s);r=r.add(i.path.popLast());const l=kT(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=RE(this.ar.serializer,s.convertToNoDocument(j_.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),rw.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function QT(e){return Gw(e,"remoteDocumentGlobal")}function YT(e){return Gw(e,"remoteDocumentsV14")}function $T(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function JT(e,t){const n=t.documentKey.path.toArray();return[e,OE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XT(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=L_(n[s],r[s]),i)return i;return i=L_(n.length,r.length),i||(i=L_(n[n.length-2],r[r.length-2]),i||L_(n[n.length-1],r[r.length-1]))}class ZT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ek{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&gI(n.mutation,e,rb.empty(),U_.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,KS()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:KS();const r=VS();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=US();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=VS();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,KS())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=MS();const s=BS(),o=BS();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof wI)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),gI(o.mutation,t,o.mutation.getFieldMask(),U_.now())):s.set(t.key,rb.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new ZT(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=BS();let r=new Jw(((e,t)=>e-t)),i=KS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||rb.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||KS()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=zS();l.forEach((e=>{if(!i.has(e)){const r=pI(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return rw.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return W_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):rw.resolve(VS());let o=-1,a=i;return s.next((t=>rw.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?rw.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,KS()))).next((e=>({batchId:o,changes:jS(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W_(t)).next((e=>{let t=US();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=US();return this.indexManager.getCollectionParents(e,i).next((o=>rw.forEach(o,(o=>{const a=function(e,t){return new yS(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ub.newInvalidDocument(r)))}));let n=US();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&gI(s.mutation,r,rb.empty(),U_.now()),NS(t,r)&&(n=n.insert(e,r))})),n}))}}class tk{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return rw.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:iE(e.createTime)}}(t)),rw.resolve()}getNamedQuery(e,t){return rw.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:jE(e.bundledQuery),readTime:iE(e.readTime)}}(t)),rw.resolve()}}class nk{constructor(){this.overlays=new Jw(W_.comparator),this.hr=new Map}getOverlay(e,t){return rw.resolve(this.overlays.get(t))}getOverlays(e,t){const n=VS();return rw.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),rw.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),rw.resolve()}getOverlaysForCollection(e,t,n){const r=VS(),i=t.length+1,s=new W_(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return rw.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Jw(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=VS(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=VS(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return rw.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new xI(t,n));let i=this.hr.get(t);void 0===i&&(i=KS(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class rk{constructor(){this.Pr=new eb(ik.Ir),this.Tr=new eb(ik.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new ik(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new ik(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new W_(new z_([])),n=new ik(t,e),r=new ik(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new W_(new z_([])),n=new ik(t,e),r=new ik(t,e+1);let i=KS();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ik(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ik{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return W_.comparator(e.key,t.key)||L_(e.pr,t.pr)}static Er(e,t){return L_(e.pr,t.pr)||W_.comparator(e.key,t.key)}}class sk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new eb(ik.Ir)}checkEmpty(e){return rw.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new kI(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new ik(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return rw.resolve(s)}lookupMutationBatch(e,t){return rw.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return rw.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return rw.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return rw.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ik(t,0),r=new ik(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),rw.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new eb(L_);return t.forEach((e=>{const t=new ik(e,0),r=new ik(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),rw.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;W_.isDocumentKey(i)||(i=i.child(""));const s=new ik(new W_(i),0);let o=new eb(L_);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),rw.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){w_(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return rw.forEach(t.mutations,(r=>{const i=new ik(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new ik(t,0),r=this.wr.firstAfterOrEqual(n);return rw.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,rw.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ok{constructor(e){this.vr=e,this.docs=new Jw(W_.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return rw.resolve(n?n.document.mutableCopy():Ub.newInvalidDocument(t))}getEntries(e,t){let n=MS();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ub.newInvalidDocument(e))})),rw.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=MS();const s=t.path,o=new W_(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Z_(J_(o),n)<=0||(r.has(o.key)||NS(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return rw.resolve(i)}getAllFromCollectionGroup(e,t,n,r){__()}Fr(e,t){return rw.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ak(this)}getSize(e){return rw.resolve(this.size)}}class ak extends WT{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),rw.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class lk{constructor(e){this.persistence=e,this.Mr=new DS((e=>hS(e)),dS),this.lastRemoteSnapshotVersion=j_.min(),this.highestTargetId=0,this.Or=0,this.Nr=new rk,this.targetCount=0,this.Lr=RT.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),rw.resolve()}getLastRemoteSnapshotVersion(e){return rw.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rw.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),rw.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),rw.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new RT(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,rw.resolve()}updateTargetData(e,t){return this.qn(t),rw.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,rw.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),rw.waitFor(i).next((()=>r))}getTargetCount(e){return rw.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return rw.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),rw.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),rw.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),rw.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return rw.resolve(n)}containsKey(e,t){return rw.resolve(this.Nr.containsKey(t))}}class ck{constructor(e,t){this.Br={},this.overlays={},this.kr=new mw(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new lk(this),this.indexManager=new pT,this.remoteDocumentCache=function(e){return new ok(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new PE(t),this.$r=new tk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new sk(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){m_("MemoryPersistence","Starting transaction:",e);const r=new uk(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return rw.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class uk extends tw{constructor(e){super(),this.currentSequenceNumber=e}}class hk{constructor(e){this.persistence=e,this.zr=new rk,this.jr=null}static Hr(e){return new hk(e)}get Jr(){if(this.jr)return this.jr;throw __()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),rw.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),rw.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),rw.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rw.forEach(this.Jr,(n=>{const r=W_.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,j_.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return rw.or([()=>rw.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class dk{constructor(e){this.serializer=e}N(e,t,n,r){const i=new iw("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iw,{unique:!0}),e.createObjectStore("documentMutations")}(e),fk(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=rw.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),fk(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j_.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iw,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return rw.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Uw});t.createIndex("collectionPathOverlayIndex",jw,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Vw,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Cw});t.createIndex("documentKeyIndex",xw),t.createIndex("collectionGroupIndex",Aw)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Dw}).createIndex("sequenceNumberIndex",Lw,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Mw}).createIndex("documentKeyIndex",Fw,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=kT(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>rw.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>rw.forEach(n,(n=>{w_(n.userId===t.userId);const r=ME(this.serializer,n);return TT(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new z_(n),o=function(e){return[0,_w(e)]}(s);r.push(t.get(o).next((n=>n?rw.resolve():(n=>t.put({targetId:0,path:_w(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>rw.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Ow});const n=t.store("collectionParents"),r=new mT,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:_w(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new z_(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Sw(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=FE(n),i=UE(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new W_(z_.fromString(e.document.name).popFirst(5)):e.noDocument?W_.fromSegments(e.noDocument.path):e.unknownDocument?W_.fromSegments(e.unknownDocument.path):__()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>rw.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=HT(this.serializer),i=new ck(hk.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:KS();ME(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),rw.forEach(n,((e,n)=>{const s=new h_(n),o=HE.lt(this.serializer,s),a=i.getIndexManager(s),l=CT.lt(s,this.serializer,a,i.referenceDelegate);return new ek(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Hw(t,mw._e),e).next()}))}))}}function fk(e){e.createObjectStore("targetDocuments",{keyPath:Pw}).createIndex("documentTargetsIndex",Rw,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nw,{unique:!0}),e.createObjectStore("targetGlobal")}const pk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mk{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!mk.D())throw new I_(S_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new BT(this,r),this.Ti=t+"main",this.serializer=new PE(a),this.Ei=new sw(this.Ti,this.ui,new dk(this.serializer)),this.Qr=new OT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HT(this.serializer),this.$r=new qE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&g_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new I_(S_.FAILED_PRECONDITION,pk);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new mw(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yk(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(lw(e))return m_("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return m_("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return gk(e).get("owner").next((e=>rw.resolve(this.Si(e))))}bi(e){return yk(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Gw(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return rw.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?rw.resolve(!0):gk(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new I_(S_.FAILED_PRECONDITION,pk);return!1}}return!(!this.networkEnabled||!this.inForeground)||yk(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&m_("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Hw(e,mw._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>yk(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return CT.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yT(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return HE.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){m_("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Kw:14===e?Ww:13===e?qw:12===e?Bw:11===e?zw:void __()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Hw(r,this.kr?this.kr.next():mw._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw g_("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new I_(S_.FAILED_PRECONDITION,ew);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return gk(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new I_(S_.FAILED_PRECONDITION,pk)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gk(e).put("owner",t)}static D(){return sw.D()}yi(e){const t=gk(e);return t.get("owner").next((e=>this.Si(e)?(m_("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):rw.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(g_("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;ut()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return m_("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return g_("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(AP){g_("Failed to set zombie client id.",AP)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(AP){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function gk(e){return Gw(e,"owner")}function yk(e){return Gw(e,"clientMetadata")}function vk(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class _k{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=KS(),r=KS();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new _k(e,t.fromCache,n,r)}}class wk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bk{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ut()?8:sw.v(rt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new wk;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(p_()<=jt.DEBUG&&m_("QueryEngine","SDK will not create cache indexes for query:",AS(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),rw.resolve()):(p_()<=jt.DEBUG&&m_("QueryEngine","Query:",AS(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(p_()<=jt.DEBUG&&m_("QueryEngine","The SDK decides to create cache indexes for query:",AS(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,IS(t))):rw.resolve())}ji(e,t){if(wS(t))return rw.resolve(null);let n=IS(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=kS(t,null,"F"),n=IS(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=KS(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,kS(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return wS(t)||r.isEqual(j_.min())?rw.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?rw.resolve(null):(p_()<=jt.DEBUG&&m_("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),AS(t)),this.es(e,s,t,$_(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new eb(RS(e));return t.forEach(((t,r)=>{NS(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return p_()<=jt.DEBUG&&m_("QueryEngine","Using full collection scan to execute query:",AS(t)),this.zi.getDocumentsMatchingQuery(e,t,X_.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Sk{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Jw(L_),this.rs=new DS((e=>hS(e)),dS),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ek(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Ik(e,t,n,r){return new Sk(e,t,n,r)}async function Ek(e,t){const n=b_(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=KS();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Tk(e){const t=b_(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function kk(e,t,n){let r=KS(),i=KS();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=MS();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(j_.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):m_("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Ck(e,t){const n=b_(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function xk(e,t){const n=b_(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,rw.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new NE(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Ak(e,t,n){const r=b_(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!lw(e))throw e;m_("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Nk(e,t,n){const r=b_(e);let i=j_.min(),s=KS();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=b_(e),i=r.rs.get(n);return void 0!==i?rw.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,IS(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:j_.min(),n?s:KS()))).next((e=>(Ok(r,PS(t),e),{documents:e,hs:s})))))}function Pk(e,t){const n=b_(e),r=b_(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Rk(e,t){const n=b_(e),r=n.ss.get(t)||j_.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,$_(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Ok(n,t,e),e)))}function Ok(e,t,n){let r=e.ss.get(t)||j_.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Dk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:KS();const r=await xk(e,IS(jE(t.bundledQuery))),i=b_(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=iE(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(sb.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Lk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Mk(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Fk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Uk{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new I_(r.error.code,r.error.message))),s?new Uk(e,t,r.state,i):(g_("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jk{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new I_(n.error.code,n.error.message))),i?new jk(e,n.state,r):(g_("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vk{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=GS();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=vw(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Vk(e,i):(g_("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class zk{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zk(t.clientId,t.onlineState):(g_("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Bk{constructor(){this.activeTargetIds=GS()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qk{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Jw(L_),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Lk(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Bk),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Lk(this.persistenceKey,n));if(e){const t=Vk.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Fk(this.persistenceKey,e));if(n){const r=jk.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fk(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return m_("SharedClientState","READ",e,t),t}setItem(e,t){m_("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){m_("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(m_("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void g_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=mw._e;if(null!=e)try{const n=JSON.parse(e);w_("number"==typeof n),t=n}catch(e){g_("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==mw._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new Uk(this.currentUser,e,t,n),i=Mk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Mk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Fk(this.persistenceKey,e),i=new jk(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Vk.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Uk.Es(new h_(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return jk.Es(r,t)}xs(e){return zk.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);m_("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=GS();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Wk{constructor(){this.no=new Bk,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Bk,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Kk{io(e){}shutdown(){}}class Hk{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){m_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){m_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gk=null;function Qk(){return null===Gk?Gk=268435456+Math.round(2147483648*Math.random()):Gk++,"0x"+Gk.toString(16)}const Yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $k{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Jk="WebChannelConnection";class Xk extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Qk(),o=this.bo(e,t.toUriEncodedString());m_("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(m_("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw y_("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+d_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Yk[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Qk();return new Promise(((s,o)=>{const a=new a_;a.setWithCredentials(!0),a.listenOnce(r_.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case n_.NO_ERROR:const t=a.getResponseJson();m_(Jk,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case n_.TIMEOUT:m_(Jk,"RPC '".concat(e,"' ").concat(i," timed out")),o(new I_(S_.DEADLINE_EXCEEDED,"Request time out"));break;case n_.HTTP_ERROR:const n=a.getStatus();if(m_(Jk,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(S_).indexOf(t)>=0?t:S_.UNKNOWN}(t.status);o(new I_(e,t.message))}else o(new I_(S_.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new I_(S_.UNAVAILABLE,"Connection failed."));break;default:__()}}finally{m_(Jk,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);m_(Jk,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Qk(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=e_(),o=t_(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");m_(Jk,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new $k({lo:t=>{d?m_(Jk,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(m_(Jk,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),m_(Jk,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,o_.EventType.OPEN,(()=>{d||m_(Jk,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,o_.EventType.CLOSE,(()=>{d||(d=!0,m_(Jk,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,o_.EventType.ERROR,(t=>{d||(d=!0,y_(Jk,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new I_(S_.UNAVAILABLE,"The operation could not be completed")))})),p(u,o_.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];w_(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){m_(Jk,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=NI[e];if(void 0!==t)return OI(t)}(t),i=o.message;void 0===n&&(n=S_.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new I_(n,i)),u.close()}else m_(Jk,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,i_.STAT_EVENT,(t=>{t.stat===s_.PROXY?m_(Jk,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===s_.NOPROXY&&m_(Jk,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function Zk(){return"undefined"!=typeof window?window:null}function eC(){return"undefined"!=typeof document?document:null}function tC(e){return new ZI(e,!0)}class nC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&m_("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class rC{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new nC(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===S_.RESOURCE_EXHAUSTED?(g_(t.toString()),g_("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===S_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new I_(S_.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return m_("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(m_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iC extends rC{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:__()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(w_(void 0===t||"string"==typeof t),sb.fromBase64String(t||"")):(w_(void 0===t||t instanceof Uint8Array),sb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?S_.UNKNOWN:OI(e.code);return new I_(t,e.message||"")}(o);n=new KI(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=cE(e,r.document.name),s=iE(r.document.updateTime),o=r.document.createTime?iE(r.document.createTime):j_.min(),a=new Mb({mapValue:{fields:r.document.fields}}),l=Ub.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new qI(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=cE(e,r.document),s=r.readTime?iE(r.readTime):j_.min(),o=Ub.newNoDocument(i,s),a=r.removedTargetIds||[];n=new qI([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=cE(e,r.document),s=r.removedTargetIds||[];n=new qI([],s,i,null)}else{if(!("filter"in t))return __();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new AI(r,i),o=e.targetId;n=new WI(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return j_.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?j_.min():t.readTime?iE(t.readTime):j_.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=dE(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=fS(r)?{documents:vE(e,r)}:{query:_E(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=nE(e,t.resumeToken);const r=eE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(j_.min())>0){n.readTime=tE(e,t.snapshotVersion.toTimestamp());const r=eE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return __()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=dE(this.serializer),t.removeTarget=e,this.t_(t)}}class sC extends rC{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(w_(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(w_(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?iE(e.updateTime):iE(t);return n.isEqual(j_.min())&&(n=iE(t)),new uI(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=iE(e.commitTime);return this.listener.T_(n,t)}return w_(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=dE(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>gE(this.serializer,e)))};this.t_(t)}}class oC extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new I_(S_.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,oE(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===S_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new I_(S_.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,oE(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===S_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new I_(S_.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class aC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(g_(t),this.g_=!1):m_("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class lC{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{yC(this)&&(m_("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=b_(e);t.v_.add(4),await uC(t),t.x_.set("Unknown"),t.v_.delete(4),await cC(t)}(this))}))})),this.x_=new aC(n,r)}}async function cC(e){if(yC(e))for(const t of e.F_)await t(!0)}async function uC(e){for(const t of e.F_)await t(!1)}function hC(e,t){const n=b_(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),gC(n)?mC(n):LC(n).Jo()&&fC(n,t))}function dC(e,t){const n=b_(e),r=LC(n);n.C_.delete(t),r.Jo()&&pC(n,t),0===n.C_.size&&(r.Jo()?r.Xo():yC(n)&&n.x_.set("Unknown"))}function fC(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(j_.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}LC(e).c_(t)}function pC(e,t){e.O_.Oe(t),LC(e).l_(t)}function mC(e){e.O_=new GI({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),LC(e).start(),e.x_.p_()}function gC(e){return yC(e)&&!LC(e).Ho()&&e.C_.size>0}function yC(e){return 0===b_(e).v_.size}function vC(e){e.O_=void 0}async function _C(e){e.C_.forEach(((t,n)=>{fC(e,t)}))}async function wC(e,t){vC(e),gC(e)?(e.x_.S_(t),mC(e)):e.x_.set("Unknown")}async function bC(e,t,n){if(e.x_.set("Online"),t instanceof KI&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){m_("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await SC(e,n)}else if(t instanceof qI?e.O_.$e(t):t instanceof WI?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(j_.min()))try{const t=await Tk(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(sb.EMPTY_BYTE_STRING,r.snapshotVersion)),pC(e,t);const i=new NE(r.target,t,n,r.sequenceNumber);fC(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){m_("RemoteStore","Failed to raise snapshot:",t),await SC(e,t)}}async function SC(e,t,n){if(!lw(t))throw t;e.v_.add(1),await uC(e),e.x_.set("Offline"),n||(n=()=>Tk(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{m_("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await cC(e)}))}function IC(e,t){return t().catch((n=>SC(e,n,t)))}async function EC(e){const t=b_(e),n=MC(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;TC(t);)try{const e=await Ck(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,kC(t,e)}catch(e){await SC(t,e)}CC(t)&&xC(t)}function TC(e){return yC(e)&&e.D_.length<10}function kC(e,t){e.D_.push(t);const n=MC(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function CC(e){return yC(e)&&!MC(e).Ho()&&e.D_.length>0}function xC(e){MC(e).start()}async function AC(e){MC(e).d_()}async function NC(e){const t=MC(e);for(const n of e.D_)t.I_(n.mutations)}async function PC(e,t,n){const r=e.D_.shift(),i=CI.from(r,t,n);await IC(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await EC(e)}async function RC(e,t){t&&MC(e).P_&&await async function(e,t){if(function(e){return RI(e)&&e!==S_.ABORTED}(t.code)){const n=e.D_.shift();MC(e).Zo(),await IC(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await EC(e)}}(e,t),CC(e)&&xC(e)}async function OC(e,t){const n=b_(e);n.asyncQueue.verifyOperationInProgress(),m_("RemoteStore","RemoteStore received new credentials");const r=yC(n);n.v_.add(3),await uC(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await cC(n)}async function DC(e,t){const n=b_(e);t?(n.v_.delete(2),await cC(n)):t||(n.v_.add(2),await uC(n),n.x_.set("Unknown"))}function LC(e){return e.N_||(e.N_=function(e,t,n){const r=b_(e);return r.R_(),new iC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:_C.bind(null,e),To:wC.bind(null,e),u_:bC.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),gC(e)?mC(e):e.x_.set("Unknown")):(await e.N_.stop(),vC(e))}))),e.N_}function MC(e){return e.L_||(e.L_=function(e,t,n){const r=b_(e);return r.R_(),new sC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:AC.bind(null,e),To:RC.bind(null,e),E_:NC.bind(null,e),T_:PC.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await EC(e)):(await e.L_.stop(),e.D_.length>0&&(m_("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class FC{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new E_,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new FC(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new I_(S_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function UC(e,t){if(g_("AsyncQueue","".concat(t,": ").concat(e)),lw(e))return new I_(S_.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class jC{constructor(e){this.comparator=e?(t,n)=>e(t,n)||W_.comparator(t.key,n.key):(e,t)=>W_.comparator(e.key,t.key),this.keyedMap=US(),this.sortedSet=new Jw(this.comparator)}static emptySet(e){return new jC(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jC))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new jC;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class VC{constructor(){this.B_=new Jw(W_.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):__():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class zC{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new zC(e,t,jC.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&CS(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class BC{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class qC{constructor(){this.queries=new DS((e=>xS(e)),CS),this.onlineState="Unknown",this.W_=new Set}}async function WC(e,t){const n=b_(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new BC,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=UC(e,"Initialization of query '".concat(AS(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&QC(n)}async function KC(e,t){const n=b_(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HC(e,t){const n=b_(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&QC(n)}function GC(e,t,n){const r=b_(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function QC(e){e.W_.forEach((e=>{e.next()}))}var YC,$C;($C=YC||(YC={})).j_="default",$C.Cache="cache";class JC{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new zC(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=zC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==YC.Cache}}class XC{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class ZC{constructor(e){this.serializer=e}Ps(e){return cE(this.serializer,e)}Is(e){return e.metadata.exists?mE(this.serializer,e.document,!1):Ub.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return iE(e)}}class ex{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tx(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=z_.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new ZC(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||KS()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=b_(e);let s=KS(),o=MS();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await xk(i,function(e){return IS(_S(z_.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>kk(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new ZC(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await Dk(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function tx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class nx{constructor(e){this.key=e}}class rx{constructor(e){this.key=e}}class ix{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=KS(),this.mutatedKeys=KS(),this.ha=RS(e),this.Pa=new jC(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new VC,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=NS(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||l&&this.ha(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return __()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const o=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,l=a!==this.ca;return this.ca=a,0!==s.length||l?{snapshot:new zC(this.query,e.Pa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new VC,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=KS(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new rx(e))})),this.la.forEach((n=>{e.has(n)||t.push(new nx(n))})),t}fa(e){this.ua=e.hs,this.la=KS();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return zC.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class sx{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ox{constructor(e){this.key=e,this.pa=!1}}class ax{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new DS((e=>xS(e)),CS),this.Sa=new Map,this.ba=new Set,this.Da=new Jw(W_.comparator),this.Ca=new Map,this.va=new rk,this.Fa={},this.Ma=new Map,this.xa=RT.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function lx(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Fx(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await ux(r,t,n,!0),i}async function cx(e,t){const n=Fx(e);await ux(n,t,!0,!1)}async function ux(e,t,n,r){const i=await xk(e.localStore,IS(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await hx(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&hC(e.remoteStore,i),a}async function hx(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await Nk(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Ix(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const s=await Nk(e.localStore,t,!0),o=new ix(t,s.hs),a=o.Ta(s.documents),l=BI.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Ix(e,n,c.Va);const u=new sx(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),c.snapshot}async function dx(e,t,n){const r=b_(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((e=>!CS(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ak(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dC(r.remoteStore,i.targetId),bx(r,i.targetId)})).catch(nw)):(bx(r,i.targetId),await Ak(r.localStore,i.targetId,!0))}async function fx(e,t){const n=b_(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dC(n.remoteStore,r.targetId))}async function px(e,t){const n=b_(e);try{const e=await function(e,t){const n=b_(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(sb.EMPTY_BYTE_STRING,j_.min()).withLastLimboFreeSnapshotVersion(j_.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=MS(),l=KS();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(kk(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(j_.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return rw.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(w_(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?w_(r.pa):e.removedDocuments.size>0&&(w_(r.pa),r.pa=!1))})),await kx(n,e,t)}catch(e){await nw(e)}}function mx(e,t,n){const r=b_(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=b_(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&QC(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function gx(e,t,n){const r=b_(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let e=new Jw(W_.comparator);e=e.insert(s,Ub.newNoDocument(s,j_.min()));const n=KS().add(s),i=new zI(j_.min(),new Map,new Jw(L_),e,n);await px(r,i),r.Da=r.Da.remove(s),r.Ca.delete(t),Tx(r)}else await Ak(r.localStore,t,!1).then((()=>bx(r,t,n))).catch(nw)}async function yx(e,t){const n=b_(e),r=t.batch.batchId;try{const e=await function(e,t){const n=b_(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=rw.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);w_(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=KS();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);wx(n,r,null),_x(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kx(n,e)}catch(e){await nw(e)}}async function vx(e,t,n){const r=b_(e);try{const e=await function(e,t){const n=b_(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(w_(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);wx(r,t,n),_x(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await kx(r,e)}catch(n){await nw(n)}}function _x(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function wx(e,t,n){const r=b_(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function bx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||Sx(e,t)}))}function Sx(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(dC(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),Tx(e))}function Ix(e,t,n){for(const r of n)r instanceof nx?(e.va.addReference(r.key,t),Ex(e,r)):r instanceof rx?(m_("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||Sx(e,r.key)):__()}function Ex(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(m_("SyncEngine","New document in limbo: "+n),e.ba.add(r),Tx(e))}function Tx(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new W_(z_.fromString(t)),r=e.xa.next();e.Ca.set(r,new ox(n)),e.Da=e.Da.insert(n,r),hC(e.remoteStore,new NE(IS(_S(n.path)),r,"TargetPurposeLimboResolution",mw._e))}}async function kx(e,t,n){const r=b_(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{o.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=_k.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ya.u_(i),await async function(e,t){const n=b_(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>rw.forEach(t,(t=>rw.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>rw.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!lw(e))throw e;m_("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Cx(e,t){const n=b_(e);if(!n.currentUser.isEqual(t)){m_("SyncEngine","User change. New user:",t.toKey());const e=await Ek(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new I_(S_.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await kx(n,e.us)}}function xx(e,t){const n=b_(e),r=n.Ca.get(t);if(r&&r.pa)return KS().add(r.key);{let e=KS();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function Ax(e,t){const n=b_(e),r=await Nk(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&Ix(n,t.targetId,i.Va),i}async function Nx(e,t){const n=b_(e);return Rk(n.localStore,t).then((e=>kx(n,e)))}async function Px(e,t,n,r){const i=b_(e),s=await function(e,t){const n=b_(e),r=b_(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):rw.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await EC(i.remoteStore):"acknowledged"===n||"rejected"===n?(wx(i,t,r||null),_x(i,t),function(e,t){b_(b_(e).mutationQueue).Mn(t)}(i.localStore,t)):__(),await kx(i,s)):m_("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Rx(e,t,n){const r=b_(e),i=[],s=[];for(const o of t){let e;const t=r.Sa.get(o);if(t&&0!==t.length){e=await xk(r.localStore,IS(t[0]));for(const e of t){const t=r.wa.get(e),n=await Ax(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Pk(r.localStore,o);e=await xk(r.localStore,t),await hx(r,Ox(t),o,!1,e.resumeToken)}i.push(e)}return r.ya.u_(s),i}function Ox(e){return vS(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Dx(e){return function(e){return b_(b_(e).persistence).Bi()}(b_(e).localStore)}async function Lx(e,t,n,r){const i=b_(e);if(i.Oa)return void m_("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Rk(i.localStore,PS(s[0])),r=zI.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,sb.EMPTY_BYTE_STRING);await kx(i,e,r);break}case"rejected":await Ak(i.localStore,t,!0),bx(i,t,r);break;default:__()}}async function Mx(e,t,n){const r=Fx(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){m_("SyncEngine","Adding an already active target "+e);continue}const t=await Pk(r.localStore,e),n=await xk(r.localStore,t);await hx(r,Ox(t),n.targetId,!1,n.resumeToken),hC(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await Ak(r.localStore,e,!1).then((()=>{dC(r.remoteStore,e),bx(r,e)})).catch(nw)}}function Fx(e){const t=b_(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=px.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gx.bind(null,t),t.ya.u_=HC.bind(null,t.eventManager),t.ya.La=GC.bind(null,t.eventManager),t}function Ux(e){const t=b_(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vx.bind(null,t),t}class jx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=tC(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ik(this.persistence,new bk,e.initialUser,this.serializer)}createPersistence(e){return new ck(hk.Hr,this.serializer)}createSharedClientState(e){return new Wk}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Vx extends jx{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await Ux(this.ka.syncEngine),await EC(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Ik(this.persistence,new bk,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new jT(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new pw(t,this.persistence);return new fw(e.asyncQueue,n)}createPersistence(e){const t=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ET.withCacheSize(this.cacheSizeBytes):ET.DEFAULT;return new mk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Zk(),eC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Wk}}class zx extends Vx{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof qk&&(this.sharedClientState.syncEngine={Zs:Px.bind(null,t),Xs:Lx.bind(null,t),eo:Mx.bind(null,t),Bi:Dx.bind(null,t),Ys:Nx.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=b_(e);if(Fx(n),Ux(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Rx(n,e.toArray());n.Oa=!0,await DC(n.remoteStore,!0);for(const r of t)hC(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(bx(n,i),Ak(n.localStore,i,!0)))),dC(n.remoteStore,i)})),await t,await Rx(n,e),function(e){const t=b_(e);t.Ca.forEach(((e,n)=>{dC(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new Jw(W_.comparator)}(n),n.Oa=!1,await DC(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Zk();if(!qk.D(t))throw new I_(S_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=vk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Bx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>mx(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Cx.bind(null,this.syncEngine),await DC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new qC}createDatastore(e){const t=tC(e.databaseInfo.databaseId),n=function(e){return new Xk(e)}(e.databaseInfo);return function(e,t,n,r){return new oC(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new lC(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>mx(this.syncEngine,e,0)),Hk.D()?new Hk:new Kk)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ax(e,t,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=b_(e);m_("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await uC(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function qx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Wx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):g_("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Kx{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new E_,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new XC(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Hx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new I_(S_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=b_(e),r={documents:t.map((e=>lE(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,z_.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){w_(!!t.found),t.found.name,t.found.updateTime;const n=cE(e,t.found.name),r=iE(t.found.updateTime),i=t.found.createTime?iE(t.found.createTime):j_.min(),s=new Mb({mapValue:{fields:t.found.fields}});return Ub.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){w_(!!t.missing),w_(!!t.readTime);const n=cE(e,t.missing),r=iE(t.readTime);return Ub.newNoDocument(n,r)}(e,t):__()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());w_(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new EI(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=W_.fromPath(t);this.mutations.push(new TI(n,this.precondition(n)))})),await async function(e,t){const n=b_(e),r={writes:t.map((e=>gE(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,z_.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw __();t=j_.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new I_(S_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(j_.min())?hI.exists(!1):hI.updateTime(t):hI.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(j_.min()))throw new I_(S_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hI.updateTime(t)}return hI.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gx{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new nC(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new Hx(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!gw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!RI(t)}return!1}}class Qx{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=h_.UNAUTHENTICATED,this.clientId=D_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{m_("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(m_("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new I_(S_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new E_;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=UC(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Yx(e,t){e.asyncQueue.verifyOperationInProgress(),m_("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ek(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function $x(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Xx(e);m_("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>OC(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>OC(t.remoteStore,n))),e._onlineComponents=t}function Jx(e){return"FirebaseError"===e.name?e.code===S_.FAILED_PRECONDITION||e.code===S_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Xx(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){m_("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yx(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Jx(n))throw n;y_("Error using user provided cache. Falling back to memory cache: "+n),await Yx(e,new jx)}}else m_("FirestoreClient","Using default OfflineComponentProvider"),await Yx(e,new jx);return e._offlineComponents}async function Zx(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(m_("FirestoreClient","Using user provided OnlineComponentProvider"),await $x(e,e._uninitializedComponentsProvider._online)):(m_("FirestoreClient","Using default OnlineComponentProvider"),await $x(e,new Bx))),e._onlineComponents}function eA(e){return Xx(e).then((e=>e.persistence))}function tA(e){return Xx(e).then((e=>e.localStore))}function nA(e){return Zx(e).then((e=>e.remoteStore))}function rA(e){return Zx(e).then((e=>e.syncEngine))}function iA(e){return Zx(e).then((e=>e.datastore))}async function sA(e){const t=await Zx(e),n=t.eventManager;return n.onListen=lx.bind(null,t.syncEngine),n.onUnlisten=dx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fx.bind(null,t.syncEngine),n}function oA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new E_;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Wx({next:s=>{t.enqueueAndForget((()=>KC(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new I_(S_.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new I_(S_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new JC(_S(n.path),s,{includeMetadataChanges:!0,ta:!0});return WC(e,o)}(await sA(e),e.asyncQueue,t,n,r))),r.promise}function aA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new E_;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Wx({next:n=>{t.enqueueAndForget((()=>KC(e,o))),n.fromCache&&"server"===r.source?i.reject(new I_(S_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new JC(n,s,{includeMetadataChanges:!0,ta:!0});return WC(e,o)}(await sA(e),e.asyncQueue,t,n,r))),r.promise}function lA(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?LI().encode(e):e,function(e,t){return new Kx(e,t)}(function(e,t){if(e instanceof Uint8Array)return qx(e,t);if(e instanceof ArrayBuffer)return qx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,tC(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=b_(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=b_(e),r=iE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(tx(r));const i=new ex(r,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await i.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await i.complete();return await kx(e,o.aa,void 0),await function(e,t){const n=b_(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return y_("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await rA(e),i,r)}))}function cA(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const uA=new Map;function hA(e,t,n){if(!n)throw new I_(S_.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dA(e,t,n,r){if(!0===t&&!0===r)throw new I_(S_.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function fA(e){if(!W_.isDocumentKey(e))throw new I_(S_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function pA(e){if(W_.isDocumentKey(e))throw new I_(S_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function mA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":__()}function gA(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new I_(S_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mA(e);throw new I_(S_.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function yA(e,t){if(t<=0)throw new I_(S_.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class vA{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new I_(S_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new I_(S_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cA(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new I_(S_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new I_(S_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new I_(S_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _A{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new I_(S_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new I_(S_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vA(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new k_;switch(e.type){case"firstParty":return new N_(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new I_(S_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uA.get(e);t&&(m_("ComponentProvider","Removing Datastore"),uA.delete(e),t.terminate())}(this),Promise.resolve()}}function wA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=gA(e,_A))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&y_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=h_.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new I_(S_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new h_(s)}e._authCredentials=new C_(new T_(t,n))}}class bA{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bA(this.firestore,e,this._query)}}class SA{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new IA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new SA(this.firestore,e,this._key)}}class IA extends bA{constructor(e,t,n){super(e,t,_S(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new SA(this.firestore,null,new W_(e))}withConverter(e){return new IA(this.firestore,e,this._path)}}function EA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ot(e),hA("collection","path",t),e instanceof _A){const n=z_.fromString(t,...r);return pA(n),new IA(e,null,n)}{if(!(e instanceof SA||e instanceof IA))throw new I_(S_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(z_.fromString(t,...r));return pA(n),new IA(e.firestore,null,n)}}function TA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ot(e),1===arguments.length&&(t=D_.newId()),hA("doc","path",t),e instanceof _A){const n=z_.fromString(t,...r);return fA(n),new SA(e,null,new W_(n))}{if(!(e instanceof SA||e instanceof IA))throw new I_(S_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(z_.fromString(t,...r));return fA(n),new SA(e.firestore,e instanceof IA?e.converter:null,new W_(n))}}function kA(e,t){return e=Ot(e),t=Ot(t),(e instanceof SA||e instanceof IA)&&(t instanceof SA||t instanceof IA)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function CA(e,t){return e=Ot(e),t=Ot(t),e instanceof bA&&t instanceof bA&&e.firestore===t.firestore&&CS(e._query,t._query)&&e.converter===t.converter}class xA{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new nC(this,"async_queue_retry"),this.cu=()=>{const e=eC();e&&m_("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=eC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=eC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new E_;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(AP){if(!lw(AP))throw AP;m_("AsyncQueue","Operation failed with retryable error: "+AP)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw g_("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=FC.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&__()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function AA(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class NA{constructor(){this._progressObserver={},this._taskCompletionResolver=new E_,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class PA extends _A{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new xA,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||OA(this),this._firestoreClient.terminate()}}function RA(e){return e._firestoreClient||OA(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function OA(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new fb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,cA(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Qx(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function DA(e,t,n){const r=new E_;return e.asyncQueue.enqueue((async()=>{try{await Yx(e,n),await $x(e,t),r.resolve()}catch(e){const n=e;if(!Jx(n))throw n;y_("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function LA(e){return function(e){const t=new E_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=b_(e);yC(n.remoteStore)||m_("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=b_(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=UC(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await rA(e),t))),t.promise}(RA(e=gA(e,PA)))}function MA(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await eA(e),n=await nA(e);return t.setNetworkEnabled(!0),function(e){const t=b_(e);return t.v_.delete(0),cC(t)}(n)}))}(RA(e=gA(e,PA)))}function FA(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await eA(e),n=await nA(e);return t.setNetworkEnabled(!1),async function(e){const t=b_(e);t.v_.add(0),await uC(t),t.x_.set("Offline")}(n)}))}(RA(e=gA(e,PA)))}function UA(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=b_(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await tA(e),t)))}(RA(e=gA(e,PA)),t).then((t=>t?new bA(e,null,t.query):null))}function jA(e){if(e._initialized||e._terminated)throw new I_(S_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class VA{constructor(e){this._byteString=e}static fromBase64String(e){try{return new VA(sb.fromBase64String(e))}catch(e){throw new I_(S_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new VA(sb.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zA{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new I_(S_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new q_(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class BA{constructor(e){this._methodName=e}}class qA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new I_(S_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new I_(S_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return L_(this._lat,e._lat)||L_(this._long,e._long)}}const WA=/^__.*__$/;class KA{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new wI(e,this.data,this.fieldMask,t,this.fieldTransforms):new _I(e,this.data,t,this.fieldTransforms)}}class HA{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new wI(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GA(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw __()}}class QA{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new QA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return pN(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(GA(this.Vu)&&WA.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class YA{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||tC(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new QA({Vu:e,methodName:t,Du:n,path:q_.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $A(e){const t=e._freezeSettings(),n=tC(e._databaseId);return new YA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function JA(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);uN("Data must be an object, but it was:",o,r);const a=lN(r,o);let l,c;if(s.merge)l=new rb(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=hN(t,r,n);if(!o.contains(i))throw new I_(S_.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));mN(e,i)||e.push(i)}l=new rb(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new KA(new Mb(a),l,c)}class XA extends BA{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof XA}}function ZA(e,t,n){return new QA({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class eN extends BA{_toFieldTransform(e){return new cI(e.path,new tI)}isEqual(e){return e instanceof eN}}class tN extends BA{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=ZA(this,e,!0),n=this.vu.map((e=>aN(e,t))),r=new nI(n);return new cI(e.path,r)}isEqual(e){return e instanceof tN&&St(this.vu,e.vu)}}class nN extends BA{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=ZA(this,e,!0),n=this.vu.map((e=>aN(e,t))),r=new iI(n);return new cI(e.path,r)}isEqual(e){return e instanceof nN&&St(this.vu,e.vu)}}class rN extends BA{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new oI(e.serializer,$S(e.serializer,this.Fu));return new cI(e.path,t)}isEqual(e){return e instanceof rN&&this.Fu===e.Fu}}function iN(e,t,n,r){const i=e.Cu(1,t,n);uN("Data must be an object, but it was:",i,r);const s=[],o=Mb.empty();Yw(r,((e,r)=>{const a=fN(t,e,n);r=Ot(r);const l=i.yu(a);if(r instanceof XA)s.push(a);else{const e=aN(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new rb(s);return new HA(o,a,i.fieldTransforms)}function sN(e,t,n,r,i,s){const o=e.Cu(1,t,n),a=[hN(t,r,n)],l=[i];if(s.length%2!=0)throw new I_(S_.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(hN(t,s[d])),l.push(s[d+1]);const c=[],u=Mb.empty();for(let d=a.length-1;d>=0;--d)if(!mN(c,a[d])){const e=a[d];let t=l[d];t=Ot(t);const n=o.yu(e);if(t instanceof XA)c.push(e);else{const r=aN(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new rb(c);return new HA(u,h,o.fieldTransforms)}function oN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return aN(n,e.Cu(r?4:3,t))}function aN(e,t){if(cN(e=Ot(e)))return uN("Unsupported field value:",t,e),lN(e,t);if(e instanceof BA)return function(e,t){if(!GA(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=aN(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ot(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $S(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=U_.fromDate(e);return{timestampValue:tE(t.serializer,n)}}if(e instanceof U_){const n=new U_(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:tE(t.serializer,n)}}if(e instanceof qA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof VA)return{bytesValue:nE(t.serializer,e._byteString)};if(e instanceof SA){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:sE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(mA(e)))}(e,t)}function lN(e,t){const n={};return $w(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yw(e,((e,r)=>{const i=aN(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function cN(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof U_||e instanceof qA||e instanceof VA||e instanceof SA||e instanceof BA)}function uN(e,t,n){if(!cN(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=mA(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function hN(e,t,n){if((t=Ot(t))instanceof zA)return t._internalPath;if("string"==typeof t)return fN(e,t);throw pN("Field path arguments must be of type string or ",e,!1,void 0,n)}const dN=new RegExp("[~\\*/\\[\\]]");function fN(e,t,n){if(t.search(dN)>=0)throw pN("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new zA(...t.split("."))._internalPath}catch(im){throw pN("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function pN(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new I_(S_.INVALID_ARGUMENT,a+e+l)}function mN(e,t){return e.some((e=>e.isEqual(t)))}class gN{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new SA(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vN("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yN extends gN{data(){return super.data()}}function vN(e,t){return"string"==typeof t?fN(e,t):t instanceof zA?t._internalPath:t._delegate._internalPath}function _N(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new I_(S_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wN{}class bN extends wN{}function SN(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof wN&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof EN)).length,n=e.filter((e=>e instanceof IN)).length;if(t>1||t>0&&n>0)throw new I_(S_.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class IN extends bN{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new IN(e,t,n)}_apply(e){const t=this._parse(e);return RN(e._query,t),new bA(e.firestore,e.converter,TS(e._query,t))}_parse(e){const t=$A(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new I_(S_.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){PN(o,s);const t=[];for(const n of o)t.push(NN(r,e,n));a={arrayValue:{values:t}}}else a=NN(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||PN(o,s),a=oN(n,t,o,"in"===s||"not-in"===s);return Kb.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class EN extends wN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new EN(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Hb.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)RN(n,i),n=TS(n,i)}(e._query,t),new bA(e.firestore,e.converter,TS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class TN extends bN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new TN(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new I_(S_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new I_(S_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bb(t,n)}(e._query,this._field,this._direction);return new bA(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new yS(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class kN extends bN{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new kN(e,t,n)}_apply(e){return new bA(e.firestore,e.converter,kS(e._query,this._limit,this._limitType))}}class CN extends bN{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new CN(e,t,n)}_apply(e){const t=AN(e,this.type,this._docOrFields,this._inclusive);return new bA(e.firestore,e.converter,function(e,t){return new yS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class xN extends bN{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new xN(e,t,n)}_apply(e){const t=AN(e,this.type,this._docOrFields,this._inclusive);return new bA(e.firestore,e.converter,function(e,t){return new yS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function AN(e,t,n,r){if(n[0]=Ot(n[0]),n[0]instanceof gN)return function(e,t,n,r,i){if(!r)throw new I_(S_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of SS(e))if(o.field.isKeyField())s.push(Eb(t,r.key));else{const e=r.data.field(o.field);if(ub(e))throw new I_(S_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new I_(S_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new jb(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=$A(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new I_(S_.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new I_(S_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!bS(e)&&-1!==s.indexOf("/"))throw new I_(S_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(z_.fromString(s));if(!W_.isDocumentKey(n))throw new I_(S_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new W_(n);a.push(Eb(t,i))}else{const e=oN(n,r,s);a.push(e)}}return new jb(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function NN(e,t,n){if("string"==typeof(n=Ot(n))){if(""===n)throw new I_(S_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(t)&&-1!==n.indexOf("/"))throw new I_(S_.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(z_.fromString(n));if(!W_.isDocumentKey(r))throw new I_(S_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Eb(e,new W_(r))}if(n instanceof SA)return Eb(e,n._key);throw new I_(S_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(mA(n),"."))}function PN(e,t){if(!Array.isArray(e)||0===e.length)throw new I_(S_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function RN(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new I_(S_.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new I_(S_.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ON{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw __()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Yw(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new qA(lb(e.latitude),lb(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(db(e));default:return null}}convertTimestamp(e){const t=ab(e);return new U_(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=z_.fromString(e);w_(AE(n));const r=new pb(n.get(1),n.get(3)),i=new W_(n.popFirst(5));return r.isEqual(t)||g_("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function DN(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class LN extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new VA(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new SA(this.firestore,null,t)}}class MN{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FN extends gN{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new UN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vN("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class UN extends FN{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class jN{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new MN(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new UN(this._firestore,this._userDataWriter,n.key,n,new MN(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new I_(S_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new UN(e._firestore,e._userDataWriter,n.doc.key,n.doc,new MN(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new UN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new MN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:VN(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function VN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return __()}}function zN(e,t){return e instanceof FN&&t instanceof FN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof jN&&t instanceof jN&&e._firestore===t._firestore&&CA(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class BN extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new VA(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new SA(this.firestore,null,t)}}function qN(e){e=gA(e,SA);const t=gA(e.firestore,PA),n=RA(t),r=new BN(t);return function(e,t){const n=new E_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=b_(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new I_(S_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=UC(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await tA(e),t,n))),n.promise}(n,e._key).then((n=>new FN(t,r,e._key,n,new MN(null!==n&&n.hasLocalMutations,!0),e.converter)))}function WN(e){e=gA(e,bA);const t=gA(e.firestore,PA),n=RA(t),r=new BN(t);return function(e,t){const n=new E_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Nk(e,t,!0),i=new ix(t,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=UC(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await tA(e),t,n))),n.promise}(n,e._query).then((n=>new jN(t,r,e,n)))}function KN(e,t,n){e=gA(e,SA);const r=gA(e.firestore,PA),i=DN(e.converter,t,n);return YN(r,[JA($A(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,hI.none())])}function HN(e,t,n){e=gA(e,SA);const r=gA(e.firestore,PA),i=$A(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ot(t))||t instanceof zA?sN(i,"updateDoc",e._key,t,n,a):iN(i,"updateDoc",e._key,t),YN(r,[s.toMutation(e._key,hI.exists(!0))])}function GN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Ot(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||AA(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(AA(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof SA)h=gA(e.firestore,PA),d=_S(e._key.path),u={next:t=>{n[l]&&n[l]($N(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=gA(e,bA);h=gA(t.firestore,PA),d=t._query;const r=new BN(h);u={next:e=>{n[l]&&n[l](new jN(h,r,t,e))},error:n[l+1],complete:n[l+2]},_N(e._query)}return function(e,t,n,r){const i=new Wx(r),s=new JC(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>WC(await sA(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>KC(await sA(e),s)))}}(RA(h),d,c,u)}function QN(e,t){return function(e,t){const n=new Wx(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){b_(e).W_.add(t),t.next()}(await sA(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){b_(e).W_.delete(t)}(await sA(e),n)))}}(RA(e=gA(e,PA)),AA(t)?t:{next:t})}function YN(e,t){return function(e,t){const n=new E_;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Ux(e);try{const e=await function(e,t){const n=b_(e),r=U_.now(),i=t.reduce(((e,t)=>e.add(t.key)),KS());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=MS(),l=KS();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=yI(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new wI(e.key,t,Fb(t.value.mapValue),hI.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:jS(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new Jw(L_)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await kx(r,e.changes),await EC(r.remoteStore)}catch(e){const t=UC(e,"Failed to persist write");n.reject(t)}}(await rA(e),t,n))),n.promise}(RA(e),t)}function $N(e,t,n){const r=n.docs.get(t._key),i=new BN(e);return new FN(e,i,t._key,r,new MN(n.hasPendingWrites,n.fromCache),t.converter)}const JN={maxAttempts:5};class XN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$A(e)}set(e,t,n){this._verifyNotCommitted();const r=ZN(e,this._firestore),i=DN(r.converter,t,n),s=JA(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,hI.none())),this}update(e,t,n){this._verifyNotCommitted();const r=ZN(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ot(t))||t instanceof zA?sN(this._dataReader,"WriteBatch.update",r._key,t,n,o):iN(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,hI.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ZN(e,this._firestore);return this._mutations=this._mutations.concat(new EI(t._key,hI.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new I_(S_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ZN(e,t){if((e=Ot(e)).firestore!==t)throw new I_(S_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class eP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$A(e)}get(e){const t=ZN(e,this._firestore),n=new LN(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return __();const r=e[0];if(r.isFoundDocument())return new gN(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new gN(this._firestore,n,t._key,null,t.converter);throw __()}))}set(e,t,n){const r=ZN(e,this._firestore),i=DN(r.converter,t,n),s=JA(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=ZN(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ot(t))||t instanceof zA?sN(this._dataReader,"Transaction.update",r._key,t,n,o):iN(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=ZN(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ZN(e,this._firestore),n=new BN(this._firestore);return super.get(e).then((e=>new FN(this._firestore,n,t._key,e._document,new MN(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){d_=e}(Tn),_n(new Dt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new PA(new x_(e.getProvider("auth-internal")),new R_(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new I_(S_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pb(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Nn(u_,"4.5.0",e),Nn(u_,"4.5.0","esm2017")}();function tP(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new I_("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function nP(){if("undefined"===typeof Uint8Array)throw new I_("unimplemented","Uint8Arrays are not available in this environment.")}function rP(){if("undefined"==typeof atob)throw new I_("unimplemented","Blobs are unavailable in Firestore in this environment.")}class iP{constructor(e){this._delegate=e}static fromBase64String(e){return rP(),new iP(VA.fromBase64String(e))}static fromUint8Array(e){return nP(),new iP(VA.fromUint8Array(e))}toBase64(){return rP(),this._delegate.toBase64()}toUint8Array(){return nP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sP(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class oP{enableIndexedDbPersistence(e,t){return function(e,t){jA(e=gA(e,PA));const n=RA(e);if(n._uninitializedComponentsProvider)throw new I_(S_.FAILED_PRECONDITION,"SDK cache is already specified.");y_("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Bx;return DA(n,i,new Vx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){jA(e=gA(e,PA));const t=RA(e);if(t._uninitializedComponentsProvider)throw new I_(S_.FAILED_PRECONDITION,"SDK cache is already specified.");y_("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Bx;return DA(t,r,new zx(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new I_(S_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new E_;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!sw.D())return Promise.resolve();const t=e+"main";await sw.delete(t)}(vk(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class aP{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof pb||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||y_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};wA(this._delegate,e,t,n)}enableNetwork(){return MA(this._delegate)}disableNetwork(){return FA(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,dA("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return LA(this._delegate)}onSnapshotsInSync(e){return QN(this._delegate,e)}get app(){if(!this._appCompat)throw new I_("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bP(this,EA(this._delegate,e))}catch(AP){throw fP(AP,"collection()","Firestore.collection()")}}doc(e){try{return new dP(this,TA(this._delegate,e))}catch(AP){throw fP(AP,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vP(this,function(e,t){if(e=gA(e,_A),hA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new I_(S_.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new bA(e,null,function(e){return new yS(z_.emptyPath(),e)}(t))}(this._delegate,e))}catch(AP){throw fP(AP,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=gA(e,PA);const r=Object.assign(Object.assign({},JN),n);return function(e){if(e.maxAttempts<1)throw new I_(S_.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new E_;return e.asyncQueue.enqueueAndForget((async()=>{const i=await iA(e);new Gx(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(RA(e),(n=>t(new eP(e,n))),r)}(this._delegate,(t=>e(new cP(this,t))))}batch(){return RA(this._delegate),new uP(new XN(this._delegate,(e=>YN(this._delegate,e))))}loadBundle(e){return function(e,t){const n=RA(e=gA(e,PA)),r=new NA;return lA(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return UA(this._delegate,e).then((e=>e?new vP(this,e):null))}}class lP extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new iP(new VA(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return dP.forKey(t,this.firestore,null)}}class cP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lP(e)}get(e){const t=SP(e);return this._delegate.get(t).then((e=>new gP(this._firestore,new FN(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=SP(e);return n?(tP("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=SP(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=SP(e);return this._delegate.delete(t),this}}class uP{constructor(e){this._delegate=e}set(e,t,n){const r=SP(e);return n?(tP("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=SP(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=SP(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hP{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new UN(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yP(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=hP.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new hP(e,new lP(e),t),r.set(t,i)),i}}hP.INSTANCES=new WeakMap;class dP{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lP(e)}static forPath(e,t,n){if(e.length%2!==0)throw new I_("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new dP(t,new SA(t._delegate,n,new W_(e)))}static forKey(e,t,n){return new dP(t,new SA(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new bP(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bP(this.firestore,EA(this._delegate,e))}catch(AP){throw fP(AP,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ot(e))instanceof SA&&kA(this._delegate,e)}set(e,t){t=tP("DocumentReference.set",t);try{return t?KN(this._delegate,e,t):KN(this._delegate,e)}catch(AP){throw fP(AP,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?HN(this._delegate,e):HN(this._delegate,e,t,...r)}catch(AP){throw fP(AP,"updateDoc()","DocumentReference.update()")}}delete(){return YN(gA((e=this._delegate).firestore,PA),[new EI(e._key,hI.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=pP(t),i=mP(t,(e=>new gP(this.firestore,new FN(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return GN(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?qN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gA(e,SA);const t=gA(e.firestore,PA);return oA(RA(t),e._key,{source:"server"}).then((n=>$N(t,e,n)))}(this._delegate):function(e){e=gA(e,SA);const t=gA(e.firestore,PA);return oA(RA(t),e._key).then((n=>$N(t,e,n)))}(this._delegate),t.then((e=>new gP(this.firestore,new FN(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new dP(this.firestore,e?this._delegate.withConverter(hP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function fP(e,t,n){return e.message=e.message.replace(t,n),e}function pP(e){for(const t of e)if("object"===typeof t&&!sP(t))return t;return{}}function mP(e,t){var n,r;let i;return i=sP(e[0])?e[0]:sP(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class gP{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new dP(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zN(this._delegate,e._delegate)}}class yP extends gP{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||__(),t}}class vP{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lP(e)}where(e,t,n){try{return new vP(this.firestore,SN(this._delegate,function(e,t,n){const r=t,i=vN("where",e);return IN._create(i,r,n)}(e,t,n)))}catch(AP){throw fP(AP,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vP(this.firestore,SN(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=vN("orderBy",e);return TN._create(n,t)}(e,t)))}catch(AP){throw fP(AP,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vP(this.firestore,SN(this._delegate,(yA("limit",t=e),kN._create("limit",t,"F"))))}catch(t){throw fP(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new vP(this.firestore,SN(this._delegate,(yA("limitToLast",t=e),kN._create("limitToLast",t,"L"))))}catch(t){throw fP(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new vP(this.firestore,SN(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CN._create("startAt",t,!0)}(...arguments)))}catch(AP){throw fP(AP,"startAt()","Query.startAt()")}}startAfter(){try{return new vP(this.firestore,SN(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return CN._create("startAfter",t,!1)}(...arguments)))}catch(AP){throw fP(AP,"startAfter()","Query.startAfter()")}}endBefore(){try{return new vP(this.firestore,SN(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xN._create("endBefore",t,!1)}(...arguments)))}catch(AP){throw fP(AP,"endBefore()","Query.endBefore()")}}endAt(){try{return new vP(this.firestore,SN(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xN._create("endAt",t,!0)}(...arguments)))}catch(AP){throw fP(AP,"endAt()","Query.endAt()")}}isEqual(e){return CA(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?WN(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gA(e,bA);const t=gA(e.firestore,PA),n=RA(t),r=new BN(t);return aA(n,e._query,{source:"server"}).then((n=>new jN(t,r,e,n)))}(this._delegate):function(e){e=gA(e,bA);const t=gA(e.firestore,PA),n=RA(t),r=new BN(t);return _N(e._query),aA(n,e._query).then((n=>new jN(t,r,e,n)))}(this._delegate),t.then((e=>new wP(this.firestore,new jN(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=pP(t),i=mP(t,(e=>new wP(this.firestore,new jN(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return GN(this._delegate,r,i)}withConverter(e){return new vP(this.firestore,e?this._delegate.withConverter(hP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class _P{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yP(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vP(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new yP(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new _P(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new yP(this._firestore,n))}))}isEqual(e){return zN(this._delegate,e._delegate)}}class bP extends vP{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new dP(this.firestore,e):null}doc(e){try{return new dP(this.firestore,void 0===e?TA(this._delegate):TA(this._delegate,e))}catch(AP){throw fP(AP,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=gA(e.firestore,PA),r=TA(e),i=DN(e.converter,t);return YN(n,[JA($A(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,hI.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new dP(this.firestore,e)))}isEqual(e){return kA(this._delegate,e._delegate)}withConverter(e){return new bP(this.firestore,e?this._delegate.withConverter(hP.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function SP(e){return gA(e,SA)}class IP{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new zA(...t)}static documentId(){return new IP(q_.keyField().canonicalString())}isEqual(e){return(e=Ot(e))instanceof zA&&this._delegate._internalPath.isEqual(e._internalPath)}}class EP{constructor(e){this._delegate=e}static serverTimestamp(){const e=new eN("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new EP(e)}static delete(){const e=new XA("deleteField");return e._methodName="FieldValue.delete",new EP(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tN("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new EP(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nN("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new EP(e)}static increment(e){const t=new rN("increment",e);return t._methodName="FieldValue.increment",new EP(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const TP={Firestore:aP,GeoPoint:qA,Timestamp:U_,Blob:iP,Transaction:cP,WriteBatch:uP,DocumentReference:dP,DocumentSnapshot:gP,Query:vP,QueryDocumentSnapshot:yP,QuerySnapshot:wP,CollectionReference:bP,FieldPath:IP,FieldValue:EP,setLogLevel:function(e){var t;t=e,f_.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Dt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},TP)))}(e,((e,t)=>new aP(e,t,new oP))),e.registerVersion("@firebase/firestore-compat","0.3.27")}(Yn);Yn.initializeApp({apiKey:"AIzaSyDorP6sJFNNQrpIu_DLZjBj4PJJXNZ4ptk",authDomain:"eshop-2d9a1.firebaseapp.com",projectId:"eshop-2d9a1",storageBucket:"eshop-2d9a1.appspot.com",messagingSenderId:"777786864172",appId:"1:777786864172:web:a9de107072ce935557d789",measurementId:"G-BPLKYL5XNK"}).firestore();const kP=Yn.auth();const CP=function(){const e=re(),[t,n]=(0,i.useState)(""),[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)(""),l={email:t,password:r};var{name:u}=Ve();return(0,i.useEffect)((()=>{Yn.auth().onAuthStateChanged((function(t){t&&e("/")}))}),[]),(0,Fe.jsxs)("div",{className:"login",children:[(0,Fe.jsx)(Ae,{to:"/",style:{textDecoration:"none"},children:(0,Fe.jsxs)("div",{className:"login__logo",children:[(0,Fe.jsx)(c.A,{className:"login__logoImage",fontSize:"large"}),(0,Fe.jsx)("h2",{className:"login__logoTitle",children:"eSHOP"})]})}),(0,Fe.jsxs)("div",{className:"login__container",children:[(0,Fe.jsx)("h1",{children:"Sign-in"}),(0,Fe.jsxs)("div",{className:"alignbox",children:[(0,Fe.jsxs)("form",{children:[(0,Fe.jsx)("h5",{children:"Name"}),(0,Fe.jsx)("input",{type:"text",name:"username",value:o,onChange:e=>a(e.target.value)}),(0,Fe.jsx)("h5",{children:"E-mail"}),(0,Fe.jsx)("input",{type:"text",name:"email",value:t,onChange:e=>n(e.target.value)}),(0,Fe.jsx)("h5",{children:"Password"}),(0,Fe.jsx)("input",{type:"password",name:"password",value:r,onChange:e=>s(e.target.value)})]}),(0,Fe.jsxs)("div",{children:[(0,Fe.jsx)("button",{type:"submit",className:"login__signInButton",onClick:async n=>{n.preventDefault(),Yn.auth().onAuthStateChanged((async function(n){if(n)e("/");else try{await Yn.auth().signInWithEmailAndPassword(t,r),Fc.post("http://localhost:8080/login",l),e("/")}catch(pr){console.error(pr.message)}}))},children:"Sign In"}),(0,Fe.jsx)("p",{children:"By signing-in you agree to the eShop Website Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads Notice."}),(0,Fe.jsx)("button",{className:"login__registerButton",onClick:n=>{n.preventDefault(),kP.createUserWithEmailAndPassword(t,r).then((t=>{t&&(e("/"),Fc.post("http://localhost:8080/login",l).then((()=>console.log("user created"))).catch((e=>{console.error(e)})))})).catch((e=>alert(e.message)))},children:"Create your eShop Account"})]})]})]})]})};const xP=function(){return(0,Fe.jsx)("div",{className:"App",children:(0,Fe.jsx)(ke,{children:(0,Fe.jsxs)(we,{children:[(0,Fe.jsx)(ve,{path:"/login",element:(0,Fe.jsxs)(Fe.Fragment,{children:[" ",(0,Fe.jsx)(CP,{})]})}),(0,Fe.jsx)(ve,{path:"/frontend-1/checkout",element:(0,Fe.jsxs)(Fe.Fragment,{children:[" ",(0,Fe.jsx)(Ma,{})," ",(0,Fe.jsx)(Wa,{})," "]})}),(0,Fe.jsx)(ve,{path:"/frontend-1",element:(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)(Ma,{})," ",(0,Fe.jsx)(Ua,{})," "]})}),(0,Fe.jsx)(ve,{path:"/frontend-1/:products",element:(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)(Ma,{})," ",(0,Fe.jsx)(Uc,{})," "]})}),(0,Fe.jsx)(ve,{path:"/frontend-1/products/:productIds",element:(0,Fe.jsxs)(Fe.Fragment,{children:[(0,Fe.jsx)(Ma,{})," ",(0,Fe.jsx)(jc,{})," "]})})]})})})};o.render((0,Fe.jsx)(i.StrictMode,{children:(0,Fe.jsx)(je,{initialState:{basket:[]},reducer:Me,children:(0,Fe.jsx)(xP,{})})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.f0f91205.js.map